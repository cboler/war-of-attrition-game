import{$ as H,$b as je,B as R,Ba as G,C as yt,Ca as oi,D as Xn,Da as P,E as V,Ea as si,F as Z,Fa as pn,G as Jn,Ga as li,H as ee,I as te,Ia as ci,Ja as di,K as Zn,L as Ct,Lb as un,M as ei,Mb as bi,Nb as Si,O as b,Oa as tt,Ob as wi,Pa as he,Pb as Pi,Qb as Ei,R as ti,Ra as nt,Rb as Mi,Sa as m,Sb as xi,T as dn,Ta as j,U as g,Ua as be,Va as mi,W as ni,Y as me,Ya as pi,Yb as wt,_ as ii,_a as ui,_b as Pt,a as Le,aa as _t,ab as N,ac as Ke,ba as ri,c as Hn,db as bt,e as gt,eb as T,f as ft,ga as vt,hb as hi,j as Oe,ja as ai,ka as mn,la as Ge,ma as O,na as D,o as _e,oa as Be,ob as Se,p as cn,pb as gi,qa as ze,qb as fi,r as Fe,ra as Ve,rb as yi,rc as Ti,sa as I,sb as St,sc as Oi,ta as p,tb as Ci,tc as Di,ua as d,ub as _i,va as L,vb as vi,w as Ze,wa as ie,xa as re,xc as ki,y as w,ya as et,yc as Et,z as Qn,za as ve,zc as Mt}from"./chunk-LN4IHGWI.js";var E=function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i}(E||{}),oe="*";function Ai(i,e=null){return{type:E.Sequence,steps:i,options:e}}function hn(i){return{type:E.Style,styles:i,offset:null}}var ge=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},Ue=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,n=0,r=0,a=this.players.length;a==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==a&&this._onFinish()}),o.onDestroy(()=>{++n==a&&this._onDestroy()}),o.onStart(()=>{++r==a&&this._onStart()})}),this.totalTime=this.players.reduce((o,s)=>Math.max(o,s.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(n=>{let r=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(r)})}getPosition(){let e=this.players.reduce((t,n)=>t===null||n.totalTime>t.totalTime?n:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},it="!";function Ni(i){return new w(3e3,!1)}function Vr(){return new w(3100,!1)}function jr(){return new w(3101,!1)}function Kr(i){return new w(3001,!1)}function Ur(i){return new w(3003,!1)}function Wr(i){return new w(3004,!1)}function Ii(i,e){return new w(3005,!1)}function Li(){return new w(3006,!1)}function Fi(){return new w(3007,!1)}function Gi(i,e){return new w(3008,!1)}function Bi(i){return new w(3002,!1)}function zi(i,e,t,n,r){return new w(3010,!1)}function Vi(){return new w(3011,!1)}function ji(){return new w(3012,!1)}function Ki(){return new w(3200,!1)}function Ui(){return new w(3202,!1)}function Wi(){return new w(3013,!1)}function qi(i){return new w(3014,!1)}function Yi(i){return new w(3015,!1)}function $i(i){return new w(3016,!1)}function Hi(i,e){return new w(3404,!1)}function qr(i){return new w(3502,!1)}function Qi(i){return new w(3503,!1)}function Xi(){return new w(3300,!1)}function Ji(i){return new w(3504,!1)}function Zi(i){return new w(3301,!1)}function er(i,e){return new w(3302,!1)}function tr(i){return new w(3303,!1)}function nr(i,e){return new w(3400,!1)}function ir(i){return new w(3401,!1)}function rr(i){return new w(3402,!1)}function ar(i,e){return new w(3505,!1)}function fe(i){switch(i.length){case 0:return new ge;case 1:return i[0];default:return new Ue(i)}}function Cn(i,e,t=new Map,n=new Map){let r=[],a=[],o=-1,s=null;if(e.forEach(l=>{let c=l.get("offset"),u=c==o,h=u&&s||new Map;l.forEach((M,y)=>{let C=y,S=M;if(y!=="offset")switch(C=i.normalizePropertyName(C,r),S){case it:S=t.get(y);break;case oe:S=n.get(y);break;default:S=i.normalizeStyleValue(y,C,S,r);break}h.set(C,S)}),u||a.push(h),s=h,o=c}),r.length)throw qr(r);return a}function xt(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&gn(t,"start",i)));break;case"done":i.onDone(()=>n(t&&gn(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&gn(t,"destroy",i)));break}}function gn(i,e,t){let n=t.totalTime,r=!!t.disabled,a=Tt(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,n??i.totalTime,r),o=i._data;return o!=null&&(a._data=o),a}function Tt(i,e,t,n,r="",a=0,o){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:r,totalTime:a,disabled:!!o}}function Q(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function _n(i){let e=i.indexOf(":"),t=i.substring(1,e),n=i.slice(e+1);return[t,n]}var Yr=typeof document>"u"?null:document.documentElement;function Ot(i){let e=i.parentNode||i.host||null;return e===Yr?null:e}function $r(i){return i.substring(1,6)=="ebkit"}var De=null,Ri=!1;function or(i){De||(De=Hr()||{},Ri=De.style?"WebkitAppearance"in De.style:!1);let e=!0;return De.style&&!$r(i)&&(e=i in De.style,!e&&Ri&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in De.style)),e}function Hr(){return typeof document<"u"?document.body:null}function vn(i,e){for(;e;){if(e===i)return!0;e=Ot(e)}return!1}function bn(i,e,t){if(t)return Array.from(i.querySelectorAll(e));let n=i.querySelector(e);return n?[n]:[]}var Qr=1e3,Sn="{{",Xr="}}",wn="ng-enter",Dt="ng-leave",rt="ng-trigger",at=".ng-trigger",Pn="ng-animating",kt=".ng-animating";function pe(i){if(typeof i=="number")return i;let e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:fn(parseFloat(e[1]),e[2])}function fn(i,e){switch(e){case"s":return i*Qr;default:return i}}function ot(i,e,t){return i.hasOwnProperty("duration")?i:Zr(i,e,t)}var Jr=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function Zr(i,e,t){let n,r=0,a="";if(typeof i=="string"){let o=i.match(Jr);if(o===null)return e.push(Ni(i)),{duration:0,delay:0,easing:""};n=fn(parseFloat(o[1]),o[2]);let s=o[3];s!=null&&(r=fn(parseFloat(s),o[4]));let l=o[5];l&&(a=l)}else n=i;if(!t){let o=!1,s=e.length;n<0&&(e.push(Vr()),o=!0),r<0&&(e.push(jr()),o=!0),o&&e.splice(s,0,Ni(i))}return{duration:n,delay:r,easing:a}}function sr(i){return i.length?i[0]instanceof Map?i:i.map(e=>new Map(Object.entries(e))):[]}function se(i,e,t){e.forEach((n,r)=>{let a=At(r);t&&!t.has(r)&&t.set(r,i.style[a]),i.style[a]=n})}function we(i,e){e.forEach((t,n)=>{let r=At(n);i.style[r]=""})}function We(i){return Array.isArray(i)?i.length==1?i[0]:Ai(i):i}function lr(i,e,t){let n=e.params||{},r=En(i);r.length&&r.forEach(a=>{n.hasOwnProperty(a)||t.push(Kr(a))})}var yn=new RegExp(`${Sn}\\s*(.+?)\\s*${Xr}`,"g");function En(i){let e=[];if(typeof i=="string"){let t;for(;t=yn.exec(i);)e.push(t[1]);yn.lastIndex=0}return e}function qe(i,e,t){let n=`${i}`,r=n.replace(yn,(a,o)=>{let s=e[o];return s==null&&(t.push(Ur(o)),s=""),s.toString()});return r==n?i:r}var ea=/-+([a-z0-9])/g;function At(i){return i.replace(ea,(...e)=>e[1].toUpperCase())}function cr(i,e){return i===0||e===0}function dr(i,e,t){if(t.size&&e.length){let n=e[0],r=[];if(t.forEach((a,o)=>{n.has(o)||r.push(o),n.set(o,a)}),r.length)for(let a=1;a<e.length;a++){let o=e[a];r.forEach(s=>o.set(s,Nt(i,s)))}}return e}function X(i,e,t){switch(e.type){case E.Trigger:return i.visitTrigger(e,t);case E.State:return i.visitState(e,t);case E.Transition:return i.visitTransition(e,t);case E.Sequence:return i.visitSequence(e,t);case E.Group:return i.visitGroup(e,t);case E.Animate:return i.visitAnimate(e,t);case E.Keyframes:return i.visitKeyframes(e,t);case E.Style:return i.visitStyle(e,t);case E.Reference:return i.visitReference(e,t);case E.AnimateChild:return i.visitAnimateChild(e,t);case E.AnimateRef:return i.visitAnimateRef(e,t);case E.Query:return i.visitQuery(e,t);case E.Stagger:return i.visitStagger(e,t);default:throw Wr(e.type)}}function Nt(i,e){return window.getComputedStyle(i)[e]}var jn=(()=>{class i{validateStyleProperty(t){return or(t)}containsElement(t,n){return vn(t,n)}getParentElement(t){return Ot(t)}query(t,n,r){return bn(t,n,r)}computeStyle(t,n,r){return r||""}animate(t,n,r,a,o,s=[],l){return new ge(r,a)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=R({token:i,factory:i.\u0275fac})}return i})(),Ae=class{static NOOP=new jn},Ne=class{};var ta=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Gt=class extends Ne{normalizePropertyName(e,t){return At(e)}normalizeStyleValue(e,t,n,r){let a="",o=n.toString().trim();if(ta.has(t)&&n!==0&&n!=="0")if(typeof n=="number")a="px";else{let s=n.match(/^[+-]?[\d\.]+([a-z]*)$/);s&&s[1].length==0&&r.push(Ii(e,n))}return o+a}};var Bt="*";function na(i,e){let t=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(n=>ia(n,t,e)):t.push(i),t}function ia(i,e,t){if(i[0]==":"){let l=ra(i,t);if(typeof l=="function"){e.push(l);return}i=l}let n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return t.push(Yi(i)),e;let r=n[1],a=n[2],o=n[3];e.push(mr(r,o));let s=r==Bt&&o==Bt;a[0]=="<"&&!s&&e.push(mr(o,r))}function ra(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push($i(i)),"* => *"}}var Rt=new Set(["true","1"]),It=new Set(["false","0"]);function mr(i,e){let t=Rt.has(i)||It.has(i),n=Rt.has(e)||It.has(e);return(r,a)=>{let o=i==Bt||i==r,s=e==Bt||e==a;return!o&&t&&typeof r=="boolean"&&(o=r?Rt.has(i):It.has(i)),!s&&n&&typeof a=="boolean"&&(s=a?Rt.has(e):It.has(e)),o&&s}}var br=":self",aa=new RegExp(`s*${br}s*,?`,"g");function Sr(i,e,t,n){return new kn(i).build(e,t,n)}var pr="",kn=class{_driver;constructor(e){this._driver=e}build(e,t,n){let r=new An(t);return this._resetContextStyleTimingState(r),X(this,We(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=pr,e.collectedStyles=new Map,e.collectedStyles.set(pr,new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0,a=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(Li()),e.definitions.forEach(s=>{if(this._resetContextStyleTimingState(t),s.type==E.State){let l=s,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,a.push(this.visitState(l,t))}),l.name=c}else if(s.type==E.Transition){let l=this.visitTransition(s,t);n+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(Fi())}),{type:E.Trigger,name:e.name,states:a,transitions:o,queryCount:n,depCount:r,options:null}}visitState(e,t){let n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){let a=new Set,o=r||{};n.styles.forEach(s=>{s instanceof Map&&s.forEach(l=>{En(l).forEach(c=>{o.hasOwnProperty(c)||a.add(c)})})}),a.size&&t.errors.push(Gi(e.name,[...a.values()]))}return{type:E.State,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let n=X(this,We(e.animation),t),r=na(e.expr,t.errors);return{type:E.Transition,matchers:r,animation:n,queryCount:t.queryCount,depCount:t.depCount,options:ke(e.options)}}visitSequence(e,t){return{type:E.Sequence,steps:e.steps.map(n=>X(this,n,t)),options:ke(e.options)}}visitGroup(e,t){let n=t.currentTime,r=0,a=e.steps.map(o=>{t.currentTime=n;let s=X(this,o,t);return r=Math.max(r,t.currentTime),s});return t.currentTime=r,{type:E.Group,steps:a,options:ke(e.options)}}visitAnimate(e,t){let n=ca(e.timings,t.errors);t.currentAnimateTimings=n;let r,a=e.styles?e.styles:hn({});if(a.type==E.Keyframes)r=this.visitKeyframes(a,t);else{let o=e.styles,s=!1;if(!o){s=!0;let c={};n.easing&&(c.easing=n.easing),o=hn(c)}t.currentTime+=n.duration+n.delay;let l=this.visitStyle(o,t);l.isEmptyStep=s,r=l}return t.currentAnimateTimings=null,{type:E.Animate,timings:n,style:r,options:null}}visitStyle(e,t){let n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){let n=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let s of r)typeof s=="string"?s===oe?n.push(s):t.errors.push(Bi(s)):n.push(new Map(Object.entries(s)));let a=!1,o=null;return n.forEach(s=>{if(s instanceof Map&&(s.has("easing")&&(o=s.get("easing"),s.delete("easing")),!a)){for(let l of s.values())if(l.toString().indexOf(Sn)>=0){a=!0;break}}}),{type:E.Style,styles:n,easing:o,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){let n=t.currentAnimateTimings,r=t.currentTime,a=t.currentTime;n&&a>0&&(a-=n.duration+n.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l),h=!0;u&&(a!=r&&a>=u.startTime&&r<=u.endTime&&(t.errors.push(zi(l,u.startTime,u.endTime,a,r)),h=!1),a=u.startTime),h&&c.set(l,{startTime:a,endTime:r}),t.options&&lr(s,t.options,t.errors)})})}visitKeyframes(e,t){let n={type:E.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Vi()),n;let r=1,a=0,o=[],s=!1,l=!1,c=0,u=e.steps.map(F=>{let B=this._makeStyleAst(F,t),q=B.offset!=null?B.offset:la(B.styles),K=0;return q!=null&&(a++,K=B.offset=q),l=l||K<0||K>1,s=s||K<c,c=K,o.push(K),B});l&&t.errors.push(ji()),s&&t.errors.push(Ki());let h=e.steps.length,M=0;a>0&&a<h?t.errors.push(Ui()):a==0&&(M=r/(h-1));let y=h-1,C=t.currentTime,S=t.currentAnimateTimings,k=S.duration;return u.forEach((F,B)=>{let q=M>0?B==y?1:M*B:o[B],K=q*k;t.currentTime=C+S.delay+K,S.duration=K,this._validateStyleAst(F,t),F.offset=q,n.styles.push(F)}),n}visitReference(e,t){return{type:E.Reference,animation:X(this,We(e.animation),t),options:ke(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:E.AnimateChild,options:ke(e.options)}}visitAnimateRef(e,t){return{type:E.AnimateRef,animation:this.visitReference(e.animation,t),options:ke(e.options)}}visitQuery(e,t){let n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[a,o]=oa(e.selector);t.currentQuerySelector=n.length?n+" "+a:a,Q(t.collectedStyles,t.currentQuerySelector,new Map);let s=X(this,We(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:E.Query,selector:a,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:e.selector,options:ke(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Wi());let n=e.timings==="full"?{duration:0,delay:0,easing:"full"}:ot(e.timings,t.errors,!0);return{type:E.Stagger,animation:X(this,We(e.animation),t),timings:n,options:null}}};function oa(i){let e=!!i.split(/\s*,\s*/).find(t=>t==br);return e&&(i=i.replace(aa,"")),i=i.replace(/@\*/g,at).replace(/@\w+/g,t=>at+"-"+t.slice(1)).replace(/:animating/g,kt),[i,e]}function sa(i){return i?Le({},i):null}var An=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function la(i){if(typeof i=="string")return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function ca(i,e){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let a=ot(i,e).duration;return Mn(a,0,"")}let t=i;if(t.split(/\s+/).some(a=>a.charAt(0)=="{"&&a.charAt(1)=="{")){let a=Mn(0,0,"");return a.dynamic=!0,a.strValue=t,a}let r=ot(t,e);return Mn(r.duration,r.delay,r.easing)}function ke(i){return i?(i=Le({},i),i.params&&(i.params=sa(i.params))):i={},i}function Mn(i,e,t){return{duration:i,delay:e,easing:t}}function Kn(i,e,t,n,r,a,o=null,s=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:r,delay:a,totalTime:r+a,easing:o,subTimeline:s}}var lt=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},da=1,ma=":enter",pa=new RegExp(ma,"g"),ua=":leave",ha=new RegExp(ua,"g");function wr(i,e,t,n,r,a=new Map,o=new Map,s,l,c=[]){return new Nn().buildKeyframes(i,e,t,n,r,a,o,s,l,c)}var Nn=class{buildKeyframes(e,t,n,r,a,o,s,l,c,u=[]){c=c||new lt;let h=new Rn(e,t,c,r,a,u,[]);h.options=l;let M=l.delay?pe(l.delay):0;h.currentTimeline.delayNextStep(M),h.currentTimeline.setStyles([o],null,h.errors,l),X(this,n,h);let y=h.timelines.filter(C=>C.containsAnimation());if(y.length&&s.size){let C;for(let S=y.length-1;S>=0;S--){let k=y[S];if(k.element===t){C=k;break}}C&&!C.allowOnlyTimelineStyles()&&C.setStyles([s],null,h.errors,l)}return y.length?y.map(C=>C.buildKeyframes()):[Kn(t,[],[],[],0,M,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let n=t.subInstructions.get(t.element);if(n){let r=t.createSubContext(e.options),a=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);a!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(let r of e){let a=r?.delay;if(a){let o=typeof a=="number"?a:pe(qe(a,r?.params??{},t.errors));n.delayNextStep(o)}}}_visitSubInstructions(e,t,n){let a=t.currentTimeline.currentTime,o=n.duration!=null?pe(n.duration):null,s=n.delay!=null?pe(n.delay):null;return o!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,o,s);a=Math.max(a,c.duration+c.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),X(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let n=t.subContextCount,r=t,a=e.options;if(a&&(a.params||a.delay)&&(r=t.createSubContext(a),r.transformIntoNewTimeline(),a.delay!=null)){r.previousNode.type==E.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=zt);let o=pe(a.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>X(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let n=[],r=t.currentTimeline.currentTime,a=e.options&&e.options.delay?pe(e.options.delay):0;e.steps.forEach(o=>{let s=t.createSubContext(e.options);a&&s.delayNextStep(a),X(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let n=e.strValue,r=t.params?qe(n,t.params,t.errors):n;return ot(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());let a=e.style;a.type==E.Keyframes?this.visitKeyframes(a,t):(t.incrementTime(n.duration),this.visitStyle(a,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();let a=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(a):n.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let n=t.currentAnimateTimings,r=t.currentTimeline.duration,a=n.duration,s=t.createSubContext().currentTimeline;s.easing=n.easing,e.styles.forEach(l=>{let c=l.offset||0;s.forwardTime(c*a),s.setStyles(l.styles,l.easing,t.errors,t.options),s.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(s),t.transformIntoNewTimeline(r+a),t.previousNode=e}visitQuery(e,t){let n=t.currentTimeline.currentTime,r=e.options||{},a=r.delay?pe(r.delay):0;a&&(t.previousNode.type===E.Style||n==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=zt);let o=n,s=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=s.length;let l=null;s.forEach((c,u)=>{t.currentQueryIndex=u;let h=t.createSubContext(e.options,c);a&&h.delayNextStep(a),c===t.element&&(l=h.currentTimeline),X(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe();let M=h.currentTimeline.currentTime;o=Math.max(o,M)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let n=t.parentContext,r=t.currentTimeline,a=e.timings,o=Math.abs(a.duration),s=o*(t.currentQueryTotal-1),l=o*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":l=s-l;break;case"full":l=n.currentStaggerTime;break}let u=t.currentTimeline;l&&u.delayNextStep(l);let h=u.currentTime;X(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-h+(r.startTime-n.currentTimeline.startTime)}},zt={},Rn=class i{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=zt;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,n,r,a,o,s,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=a,this.errors=o,this.timelines=s,this.currentTimeline=l||new Vt(this._driver,t,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let n=e,r=this.options;n.duration!=null&&(r.duration=pe(n.duration)),n.delay!=null&&(r.delay=pe(n.delay));let a=n.params;if(a){let o=r.params;o||(o=this.options.params={}),Object.keys(a).forEach(s=>{(!t||!o.hasOwnProperty(s))&&(o[s]=qe(a[s],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let n=e.params={};Object.keys(t).forEach(r=>{n[r]=t[r]})}}return e}createSubContext(e=null,t,n){let r=t||this.element,a=new i(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=zt,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},a=new In(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(a),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,a,o){let s=[];if(r&&s.push(this.element),e.length>0){e=e.replace(pa,"."+this._enterClassName),e=e.replace(ha,"."+this._leaveClassName);let l=n!=1,c=this._driver.query(this.element,e,l);n!==0&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),s.push(...c)}return!a&&s.length==0&&o.push(qi(t)),s}},Vt=class i{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new i(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=da,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||oe),this._currentKeyframe.set(t,oe);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&this._previousKeyframe.set("easing",t);let a=r&&r.params||{},o=ga(e,this._globalTimelineStyles);for(let[s,l]of o){let c=qe(l,a,n);this._pendingStyles.set(s,c),this._localTimelineStyles.has(s)||this._backFill.set(s,this._globalTimelineStyles.get(s)??oe),this._updateStyle(s,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{let r=this._styleSummary.get(n);(!r||t.time>r.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,n=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((s,l)=>{let c=new Map([...this._backFill,...s]);c.forEach((u,h)=>{u===it?e.add(h):u===oe&&t.add(h)}),n||c.set("offset",l/this.duration),r.push(c)});let a=[...e.values()],o=[...t.values()];if(n){let s=r[0],l=new Map(s);s.set("offset",0),l.set("offset",1),r=[s,l]}return Kn(this.element,r,a,o,this.duration,this.startTime,this.easing,!1)}},In=class extends Vt{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,n,r,a,o,s=!1){super(e,t,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=a,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let a=[],o=n+t,s=t/o,l=new Map(e[0]);l.set("offset",0),a.push(l);let c=new Map(e[0]);c.set("offset",ur(s)),a.push(c);let u=e.length-1;for(let h=1;h<=u;h++){let M=new Map(e[h]),y=M.get("offset"),C=t+y*n;M.set("offset",ur(C/o)),a.push(M)}n=o,t=0,r="",e=a}return Kn(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}};function ur(i,e=3){let t=Math.pow(10,e-1);return Math.round(i*t)/t}function ga(i,e){let t=new Map,n;return i.forEach(r=>{if(r==="*"){n??=e.keys();for(let a of n)t.set(a,oe)}else for(let[a,o]of r)t.set(a,o)}),t}function hr(i,e,t,n,r,a,o,s,l,c,u,h,M){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:a,toState:n,toStyles:o,timelines:s,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:M}}var xn={},jt=class{_triggerName;ast;_stateStyles;constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return fa(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,n):new Map}build(e,t,n,r,a,o,s,l,c,u){let h=[],M=this.ast.options&&this.ast.options.params||xn,y=s&&s.params||xn,C=this.buildStyles(n,y,h),S=l&&l.params||xn,k=this.buildStyles(r,S,h),F=new Set,B=new Map,q=new Map,K=r==="void",Re={params:Pr(S,M),delay:this.ast.options?.delay},ce=u?[]:wr(e,t,this.ast.animation,a,o,C,k,Re,c,h),Y=0;return ce.forEach($=>{Y=Math.max($.duration+$.delay,Y)}),h.length?hr(t,this._triggerName,n,r,K,C,k,[],[],B,q,Y,h):(ce.forEach($=>{let Me=$.element,Ie=Q(B,Me,new Set);$.preStyleProps.forEach(xe=>Ie.add(xe));let Wn=Q(q,Me,new Set);$.postStyleProps.forEach(xe=>Wn.add(xe)),Me!==t&&F.add(Me)}),hr(t,this._triggerName,n,r,K,C,k,ce,[...F.values()],B,q,Y))}};function fa(i,e,t,n,r){return i.some(a=>a(e,t,n,r))}function Pr(i,e){let t=Le({},e);return Object.entries(i).forEach(([n,r])=>{r!=null&&(t[n]=r)}),t}var Ln=class{styles;defaultParams;normalizer;constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){let n=new Map,r=Pr(e,this.defaultParams);return this.styles.styles.forEach(a=>{typeof a!="string"&&a.forEach((o,s)=>{o&&(o=qe(o,r,t));let l=this.normalizer.normalizePropertyName(s,t);o=this.normalizer.normalizeStyleValue(s,l,o,t),n.set(s,o)})}),n}};function ya(i,e,t){return new Fn(i,e,t)}var Fn=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,t.states.forEach(r=>{let a=r.options&&r.options.params||{};this.states.set(r.name,new Ln(r.style,a,n))}),gr(this.states,"true","1"),gr(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new jt(e,r,this.states))}),this.fallbackTransition=Ca(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(o=>o.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}};function Ca(i,e,t){let n=[(o,s)=>!0],r={type:E.Sequence,steps:[],options:null},a={type:E.Transition,animation:r,matchers:n,options:null,queryCount:0,depCount:0};return new jt(i,a,e)}function gr(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}var _a=new lt,Gn=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n}register(e,t){let n=[],r=[],a=Sr(this._driver,t,n,r);if(n.length)throw Qi(n);this._animations.set(e,a)}_buildPlayer(e,t,n){let r=e.element,a=Cn(this._normalizer,e.keyframes,t,n);return this._driver.animate(r,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){let r=[],a=this._animations.get(e),o,s=new Map;if(a?(o=wr(this._driver,t,a,wn,Dt,new Map,new Map,n,_a,r),o.forEach(u=>{let h=Q(s,u.element,new Map);u.postStyleProps.forEach(M=>h.set(M,null))})):(r.push(Xi()),o=[]),r.length)throw Ji(r);s.forEach((u,h)=>{u.forEach((M,y)=>{u.set(y,this._driver.computeStyle(h,y,oe))})});let l=o.map(u=>{let h=s.get(u.element);return this._buildPlayer(u,new Map,h)}),c=fe(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw Zi(e);return t}listen(e,t,n,r){let a=Tt(t,"","","");return xt(this._getPlayer(e),n,a,r),()=>{}}command(e,t,n,r){if(n=="register"){this.register(e,r[0]);return}if(n=="create"){let o=r[0]||{};this.create(e,t,o);return}let a=this._getPlayer(e);switch(n){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},fr="ng-animate-queued",va=".ng-animate-queued",Tn="ng-animate-disabled",ba=".ng-animate-disabled",Sa="ng-star-inserted",wa=".ng-star-inserted",Pa=[],Er={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ea={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},le="__ng_removed",ct=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let n=e&&e.hasOwnProperty("value"),r=n?e.value:e;if(this.value=xa(r),n){let a=e,{value:o}=a,s=Hn(a,["value"]);this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let n=this.options.params;Object.keys(t).forEach(r=>{n[r]==null&&(n[r]=t[r])})}}},st="void",On=new ct(st),Bn=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this._hostClassName="ng-tns-"+e,ae(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.has(t))throw er(n,t);if(n==null||n.length==0)throw tr(t);if(!Ta(n))throw nr(n,t);let a=Q(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};a.push(o);let s=Q(this._engine.statesByElement,e,new Map);return s.has(t)||(ae(e,rt),ae(e,rt+"-"+t),s.set(t,On)),()=>{this._engine.afterFlush(()=>{let l=a.indexOf(o);l>=0&&a.splice(l,1),this._triggers.has(t)||s.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw ir(e);return t}trigger(e,t,n,r=!0){let a=this._getTrigger(t),o=new dt(this.id,t,e),s=this._engine.statesByElement.get(e);s||(ae(e,rt),ae(e,rt+"-"+t),this._engine.statesByElement.set(e,s=new Map));let l=s.get(t),c=new ct(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),s.set(t,c),l||(l=On),!(c.value===st)&&l.value===c.value){if(!ka(l.params,c.params)){let S=[],k=a.matchStyles(l.value,l.params,S),F=a.matchStyles(c.value,c.params,S);S.length?this._engine.reportError(S):this._engine.afterFlush(()=>{we(e,k),se(e,F)})}return}let M=Q(this._engine.playersByElement,e,[]);M.forEach(S=>{S.namespaceId==this.id&&S.triggerName==t&&S.queued&&S.destroy()});let y=a.matchTransition(l.value,c.value,e,c.params),C=!1;if(!y){if(!r)return;y=a.fallbackTransition,C=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:l,toState:c,player:o,isFallbackTransition:C}),C||(ae(e,fr),o.onStart(()=>{Ye(e,fr)})),o.onDone(()=>{let S=this.players.indexOf(o);S>=0&&this.players.splice(S,1);let k=this._engine.playersByElement.get(e);if(k){let F=k.indexOf(o);F>=0&&k.splice(F,1)}}),this.players.push(o),M.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let n=this._engine.driver.query(e,at,!0);n.forEach(r=>{if(r[le])return;let a=this._engine.fetchNamespacesByElement(r);a.size?a.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,n,r){let a=this._engine.statesByElement.get(e),o=new Map;if(a){let s=[];if(a.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){let u=this.trigger(e,c,st,r);u&&s.push(u)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),n&&fe(s).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){let r=new Set;t.forEach(a=>{let o=a.name;if(r.has(o))return;r.add(o);let l=this._triggers.get(o).fallbackTransition,c=n.get(o)||On,u=new ct(st),h=new dt(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:h,isFallbackTransition:!0})})}}removeNode(e,t){let n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){let a=n.players.length?n.playersByQueriedElement.get(e):[];if(a&&a.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{let a=e[le];(!a||a===Er)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){ae(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(n=>{let r=n.player;if(r.destroyed)return;let a=n.element,o=this._elementListeners.get(a);o&&o.forEach(s=>{if(s.name==n.triggerName){let l=Tt(a,n.triggerName,n.fromState.value,n.toState.value);l._data=e,xt(n.player,s.phase,l,s.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((n,r)=>{let a=n.transition.ast.depCount,o=r.transition.ast.depCount;return a==0||o==0?a-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},zn=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){let n=new Bn(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){let n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,s=this.driver.getParentElement(t);for(;s;){let l=r.get(s);if(l){let c=n.indexOf(l);n.splice(c+1,0,e),o=!0;break}s=this.driver.getParentElement(s)}o||n.unshift(e)}else n.push(e);return r.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(e);this.namespacesByHostElement.delete(n.hostElement);let r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1),n.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,n=this.statesByElement.get(e);if(n){for(let r of n.values())if(r.namespaceId){let a=this._fetchNamespace(r.namespaceId);a&&t.add(a)}}return t}trigger(e,t,n,r){if(Lt(t)){let a=this._fetchNamespace(e);if(a)return a.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!Lt(t))return;let a=t[le];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ae(e,Tn)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ye(e,Tn))}removeNode(e,t,n){if(Lt(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n);let a=this.namespacesByHostElement.get(t);a&&a.id!==e&&a.removeNode(t,n)}else this._onRemovalComplete(t,n)}markElementAsRemoved(e,t,n,r,a){this.collectedLeaveElements.push(t),t[le]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,n,r,a){return Lt(t)?this._fetchNamespace(e).listen(t,n,r,a):()=>{}}_buildInstruction(e,t,n,r,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,at,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,kt,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return fe(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[le];if(t&&t.setForRemoval){if(e[le]=Er,t.namespaceId){this.destroyInnerAnimations(e);let n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Tn)&&this.markElementAsDisabled(e,!1),this.driver.query(e,ba,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let r=this.collectedEnterElements[n];ae(r,Sa)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{t=this._flushAnimations(n,e)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let r=this.collectedLeaveElements[n];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],t.length?fe(t).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(e){throw rr(e)}_flushAnimations(e,t){let n=new lt,r=[],a=new Map,o=[],s=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(f=>{u.add(f);let _=this.driver.query(f,va,!0);for(let v=0;v<_.length;v++)u.add(_[v])});let h=this.bodyNode,M=Array.from(this.statesByElement.keys()),y=_r(M,this.collectedEnterElements),C=new Map,S=0;y.forEach((f,_)=>{let v=wn+S++;C.set(_,v),f.forEach(x=>ae(x,v))});let k=[],F=new Set,B=new Set;for(let f=0;f<this.collectedLeaveElements.length;f++){let _=this.collectedLeaveElements[f],v=_[le];v&&v.setForRemoval&&(k.push(_),F.add(_),v.hasAnimation?this.driver.query(_,wa,!0).forEach(x=>F.add(x)):B.add(_))}let q=new Map,K=_r(M,Array.from(F));K.forEach((f,_)=>{let v=Dt+S++;q.set(_,v),f.forEach(x=>ae(x,v))}),e.push(()=>{y.forEach((f,_)=>{let v=C.get(_);f.forEach(x=>Ye(x,v))}),K.forEach((f,_)=>{let v=q.get(_);f.forEach(x=>Ye(x,v))}),k.forEach(f=>{this.processLeaveNode(f)})});let Re=[],ce=[];for(let f=this._namespaceList.length-1;f>=0;f--)this._namespaceList[f].drainQueuedTransitions(t).forEach(v=>{let x=v.player,z=v.element;if(Re.push(x),this.collectedEnterElements.length){let U=z[le];if(U&&U.setForMove){if(U.previousTriggersValues&&U.previousTriggersValues.has(v.triggerName)){let Te=U.previousTriggersValues.get(v.triggerName),ne=this.statesByElement.get(v.element);if(ne&&ne.has(v.triggerName)){let ht=ne.get(v.triggerName);ht.value=Te,ne.set(v.triggerName,ht)}}x.destroy();return}}let de=!h||!this.driver.containsElement(h,z),J=q.get(z),Ce=C.get(z),A=this._buildInstruction(v,n,Ce,J,de);if(A.errors&&A.errors.length){ce.push(A);return}if(de){x.onStart(()=>we(z,A.fromStyles)),x.onDestroy(()=>se(z,A.toStyles)),r.push(x);return}if(v.isFallbackTransition){x.onStart(()=>we(z,A.fromStyles)),x.onDestroy(()=>se(z,A.toStyles)),r.push(x);return}let $n=[];A.timelines.forEach(U=>{U.stretchStartingKeyframe=!0,this.disabledNodes.has(U.element)||$n.push(U)}),A.timelines=$n,n.append(z,A.timelines);let zr={instruction:A,player:x,element:z};o.push(zr),A.queriedElements.forEach(U=>Q(s,U,[]).push(x)),A.preStyleProps.forEach((U,Te)=>{if(U.size){let ne=l.get(Te);ne||l.set(Te,ne=new Set),U.forEach((ht,ln)=>ne.add(ln))}}),A.postStyleProps.forEach((U,Te)=>{let ne=c.get(Te);ne||c.set(Te,ne=new Set),U.forEach((ht,ln)=>ne.add(ln))})});if(ce.length){let f=[];ce.forEach(_=>{f.push(ar(_.triggerName,_.errors))}),Re.forEach(_=>_.destroy()),this.reportError(f)}let Y=new Map,$=new Map;o.forEach(f=>{let _=f.element;n.has(_)&&($.set(_,_),this._beforeAnimationBuild(f.player.namespaceId,f.instruction,Y))}),r.forEach(f=>{let _=f.element;this._getPreviousPlayers(_,!1,f.namespaceId,f.triggerName,null).forEach(x=>{Q(Y,_,[]).push(x),x.destroy()})});let Me=k.filter(f=>vr(f,l,c)),Ie=new Map;Cr(Ie,this.driver,B,c,oe).forEach(f=>{vr(f,l,c)&&Me.push(f)});let xe=new Map;y.forEach((f,_)=>{Cr(xe,this.driver,new Set(f),l,it)}),Me.forEach(f=>{let _=Ie.get(f),v=xe.get(f);Ie.set(f,new Map([..._?.entries()??[],...v?.entries()??[]]))});let sn=[],qn=[],Yn={};o.forEach(f=>{let{element:_,player:v,instruction:x}=f;if(n.has(_)){if(u.has(_)){v.onDestroy(()=>se(_,x.toStyles)),v.disabled=!0,v.overrideTotalTime(x.totalTime),r.push(v);return}let z=Yn;if($.size>1){let J=_,Ce=[];for(;J=J.parentNode;){let A=$.get(J);if(A){z=A;break}Ce.push(J)}Ce.forEach(A=>$.set(A,z))}let de=this._buildAnimation(v.namespaceId,x,Y,a,xe,Ie);if(v.setRealPlayer(de),z===Yn)sn.push(v);else{let J=this.playersByElement.get(z);J&&J.length&&(v.parentPlayer=fe(J)),r.push(v)}}else we(_,x.fromStyles),v.onDestroy(()=>se(_,x.toStyles)),qn.push(v),u.has(_)&&r.push(v)}),qn.forEach(f=>{let _=a.get(f.element);if(_&&_.length){let v=fe(_);f.setRealPlayer(v)}}),r.forEach(f=>{f.parentPlayer?f.syncPlayerEvents(f.parentPlayer):f.destroy()});for(let f=0;f<k.length;f++){let _=k[f],v=_[le];if(Ye(_,Dt),v&&v.hasAnimation)continue;let x=[];if(s.size){let de=s.get(_);de&&de.length&&x.push(...de);let J=this.driver.query(_,kt,!0);for(let Ce=0;Ce<J.length;Ce++){let A=s.get(J[Ce]);A&&A.length&&x.push(...A)}}let z=x.filter(de=>!de.destroyed);z.length?Oa(this,_,z):this.processLeaveNode(_)}return k.length=0,sn.forEach(f=>{this.players.push(f),f.onDone(()=>{f.destroy();let _=this.players.indexOf(f);this.players.splice(_,1)}),f.play()}),sn}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,a){let o=[];if(t){let s=this.playersByQueriedElement.get(e);s&&(o=s)}else{let s=this.playersByElement.get(e);if(s){let l=!a||a==st;s.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(s=>!(n&&n!=s.namespaceId||r&&r!=s.triggerName))),o}_beforeAnimationBuild(e,t,n){let r=t.triggerName,a=t.element,o=t.isRemovalTransition?void 0:e,s=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let c=l.element,u=c!==a,h=Q(n,c,[]);this._getPreviousPlayers(c,u,o,s,t.toState).forEach(y=>{let C=y.getRealPlayer();C.beforeDestroy&&C.beforeDestroy(),y.destroy(),h.push(y)})}we(a,t.fromStyles)}_buildAnimation(e,t,n,r,a,o){let s=t.triggerName,l=t.element,c=[],u=new Set,h=new Set,M=t.timelines.map(C=>{let S=C.element;u.add(S);let k=S[le];if(k&&k.removedBeforeQueried)return new ge(C.duration,C.delay);let F=S!==l,B=Da((n.get(S)||Pa).map(Y=>Y.getRealPlayer())).filter(Y=>{let $=Y;return $.element?$.element===S:!1}),q=a.get(S),K=o.get(S),Re=Cn(this._normalizer,C.keyframes,q,K),ce=this._buildPlayer(C,Re,B);if(C.subTimeline&&r&&h.add(S),F){let Y=new dt(e,s,S);Y.setRealPlayer(ce),c.push(Y)}return ce});c.forEach(C=>{Q(this.playersByQueriedElement,C.element,[]).push(C),C.onDone(()=>Ma(this.playersByQueriedElement,C.element,C))}),u.forEach(C=>ae(C,Pn));let y=fe(M);return y.onDestroy(()=>{u.forEach(C=>Ye(C,Pn)),se(l,t.toStyles)}),h.forEach(C=>{Q(r,C,[]).push(y)}),y}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new ge(e.duration,e.delay)}},dt=class{namespaceId;triggerName;element;_player=new ge;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(r=>xt(e,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Q(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Ma(i,e,t){let n=i.get(e);if(n){if(n.length){let r=n.indexOf(t);n.splice(r,1)}n.length==0&&i.delete(e)}return n}function xa(i){return i??null}function Lt(i){return i&&i.nodeType===1}function Ta(i){return i=="start"||i=="done"}function yr(i,e){let t=i.style.display;return i.style.display=e??"none",t}function Cr(i,e,t,n,r){let a=[];t.forEach(l=>a.push(yr(l)));let o=[];n.forEach((l,c)=>{let u=new Map;l.forEach(h=>{let M=e.computeStyle(c,h,r);u.set(h,M),(!M||M.length==0)&&(c[le]=Ea,o.push(c))}),i.set(c,u)});let s=0;return t.forEach(l=>yr(l,a[s++])),o}function _r(i,e){let t=new Map;if(i.forEach(s=>t.set(s,[])),e.length==0)return t;let n=1,r=new Set(e),a=new Map;function o(s){if(!s)return n;let l=a.get(s);if(l)return l;let c=s.parentNode;return t.has(c)?l=c:r.has(c)?l=n:l=o(c),a.set(s,l),l}return e.forEach(s=>{let l=o(s);l!==n&&t.get(l).push(s)}),t}function ae(i,e){i.classList?.add(e)}function Ye(i,e){i.classList?.remove(e)}function Oa(i,e,t){fe(t).onDone(()=>i.processLeaveNode(e))}function Da(i){let e=[];return Mr(i,e),e}function Mr(i,e){for(let t=0;t<i.length;t++){let n=i[t];n instanceof Ue?Mr(n.players,e):e.push(n)}}function ka(i,e){let t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){let a=t[r];if(!e.hasOwnProperty(a)||i[a]!==e[a])return!1}return!0}function vr(i,e,t){let n=t.get(i);if(!n)return!1;let r=e.get(i);return r?n.forEach(a=>r.add(a)):e.set(i,n),t.delete(i),!0}var $e=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,n){this._driver=t,this._normalizer=n,this._transitionEngine=new zn(e.body,t,n),this._timelineEngine=new Gn(e.body,t,n),this._transitionEngine.onRemovalComplete=(r,a)=>this.onRemovalComplete(r,a)}registerTrigger(e,t,n,r,a){let o=e+"-"+r,s=this._triggerCache[o];if(!s){let l=[],c=[],u=Sr(this._driver,a,l,c);if(l.length)throw Hi(r,l);s=ya(r,u,this._normalizer),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(t,r,s)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n){this._transitionEngine.removeNode(e,t,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if(n.charAt(0)=="@"){let[a,o]=_n(n),s=r;this._timelineEngine.command(a,t,o,s)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,a){if(n.charAt(0)=="@"){let[o,s]=_n(n);return this._timelineEngine.listen(o,t,s,a)}return this._transitionEngine.listen(e,t,n,r,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Aa(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=Dn(e[0]),e.length>1&&(n=Dn(e[e.length-1]))):e instanceof Map&&(t=Dn(e)),t||n?new Na(i,t,n):null}var Na=(()=>{class i{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r;let a=i.initialStylesByElement.get(t);a||i.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&se(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(se(this._element,this._initialStyles),this._endStyles&&(se(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(we(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(we(this._element,this._endStyles),this._endStyles=null),se(this._element,this._initialStyles),this._state=3)}}return i})();function Dn(i){let e=null;return i.forEach((t,n)=>{Ra(n)&&(e=e||new Map,e.set(n,t))}),e}function Ra(i){return i==="display"||i==="position"}var Kt=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{r!=="offset"&&e.set(r,this._finished?n:Nt(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},Ut=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return vn(e,t)}getParentElement(e){return Ot(e)}query(e,t,n){return bn(e,t,n)}computeStyle(e,t,n){return Nt(e,t)}animate(e,t,n,r,a,o=[]){let s=r==0?"both":"forwards",l={duration:n,delay:r,fill:s};a&&(l.easing=a);let c=new Map,u=o.filter(y=>y instanceof Kt);cr(n,r)&&u.forEach(y=>{y.currentSnapshot.forEach((C,S)=>c.set(S,C))});let h=sr(t).map(y=>new Map(y));h=dr(e,h,c);let M=Aa(e,h);return new Kt(e,h,l,M)}};var Ft="@",xr="@.disabled",Wt=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,n,r){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==Ft&&t==xr?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n,r){return this.delegate.listen(e,t,n,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Vn=class extends Wt{factory;constructor(e,t,n,r,a){super(t,n,r,a),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==Ft?t.charAt(1)=="."&&t==xr?(n=n===void 0?!0:!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n,r){if(t.charAt(0)==Ft){let a=Ia(e),o=t.slice(1),s="";return o.charAt(0)!=Ft&&([o,s]=La(o)),this.engine.listen(this.namespaceId,a,o,s,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,n,l)})}return this.delegate.listen(e,t,n,r)}};function Ia(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function La(i){let e=i.indexOf("."),t=i.substring(0,e),n=i.slice(e+1);return[t,n]}var qt=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,t.onRemovalComplete=(r,a)=>{a?.removeChild(null,r)}}createRenderer(e,t){let n="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,u=c.get(r);if(!u){let h=()=>c.delete(r);u=new Wt(n,r,this.engine,h),c.set(r,u)}return u}let a=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let s=c=>{Array.isArray(c)?c.forEach(s):this.engine.registerTrigger(a,o,e,c.name,c)};return t.data.animation.forEach(s),new Vn(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(n));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(a=>{let[o,s]=a;o(s)}),this._animationCallbacksBuffer=[]})}),r.push([t,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var Ga=(()=>{class i extends $e{constructor(t,n,r){super(t,n,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(n){return new(n||i)(V(Ct),V(Ae),V(Ne))};static \u0275prov=R({token:i,factory:i.\u0275fac})}return i})();function Ba(){return new Gt}function za(i,e,t){return new qt(i,e,t)}var Tr=[{provide:Ne,useFactory:Ba},{provide:$e,useClass:Ga},{provide:ni,useFactory:za,deps:[gi,$e,vt]}],es=[{provide:Ae,useClass:jn},{provide:dn,useValue:"NoopAnimations"},...Tr],Va=[{provide:Ae,useFactory:()=>new Ut},{provide:dn,useFactory:()=>"BrowserAnimations"},...Tr];function Or(){return ii("NgEagerAnimations"),[...Va]}var mt=(r=>(r.HEARTS="hearts",r.DIAMONDS="diamonds",r.CLUBS="clubs",r.SPADES="spades",r))(mt||{}),Pe=(y=>(y.ACE="A",y.KING="K",y.QUEEN="Q",y.JACK="J",y.TEN="10",y.NINE="9",y.EIGHT="8",y.SEVEN="7",y.SIX="6",y.FIVE="5",y.FOUR="4",y.THREE="3",y.TWO="2",y))(Pe||{}),He=class{id;suit;rank;value;isRed;constructor(e,t){this.id=`${e}-${t}`,this.suit=e,this.rank=t,this.value=this.calculateValue(t),this.isRed=e==="hearts"||e==="diamonds"}calculateValue(e){switch(e){case"A":return 14;case"K":return 13;case"Q":return 12;case"J":return 11;case"10":return 10;case"9":return 9;case"8":return 8;case"7":return 7;case"6":return 6;case"5":return 5;case"4":return 4;case"3":return 3;case"2":return 2;default:return 0}}toString(){return`${this.rank} of ${this.suit}`}};function ja(i,e){if(i&1&&(ie(0,"div",3),et(1,"div",4),re()),i&2){let t=P();tt("background",t.cardBackingPattern())}}function Ka(i,e){if(i&1&&(ie(0,"div",2)(1,"div",5)(2,"div",6),m(3),re(),ie(4,"div",7),m(5),re()(),ie(6,"div",8)(7,"div",9),m(8),re()(),ie(9,"div",10)(10,"div",6),m(11),re(),ie(12,"div",7),m(13),re()()()),i&2){let t=P();g(3),j(t.displayRank()),g(2),j(t.displaySuit()),g(3),j(t.displaySuit()),g(3),j(t.displayRank()),g(2),j(t.displaySuit())}}var Ee=class i{card=T(null);faceDown=T(!1);glow=T(null);clickable=T(!1);animationState=T(null);fromPosition=T(null);cardClicked=bt();settingsService=Z(Ke);isRed=N(()=>this.card()?.isRed??!1);cardBackingPattern=N(()=>{let e=this.settingsService.selectedCardBackingOption();return e?e.pattern:""});displayRank=N(()=>{let e=this.card();return e?e.rank:""});displaySuit=N(()=>{let e=this.card();if(!e)return"";switch(e.suit){case"hearts":return"\u2665";case"diamonds":return"\u2666";case"clubs":return"\u2663";case"spades":return"\u2660";default:return""}});ariaLabel=N(()=>{if(this.faceDown())return"Face down card";let e=this.card();if(!e)return"Empty card slot";let t=e.suit.charAt(0).toUpperCase()+e.suit.slice(1);return`${this.getRankName(e.rank)} of ${t}`});getRankName(e){switch(e){case"A":return"Ace";case"K":return"King";case"Q":return"Queen";case"J":return"Jack";default:return e}}onCardClick(){this.clickable()&&this.cardClicked.emit()}onKeyDown(e){this.clickable()&&(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),this.cardClicked.emit())}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=H({type:i,selectors:[["app-card"]],inputs:{card:[1,"card"],faceDown:[1,"faceDown"],glow:[1,"glow"],clickable:[1,"clickable"],animationState:[1,"animationState"],fromPosition:[1,"fromPosition"]},outputs:{cardClicked:"cardClicked"},decls:3,vars:32,consts:[[1,"card",3,"click","keydown.enter","keydown.space"],[1,"card-back",3,"background"],[1,"card-face"],[1,"card-back"],[1,"card-pattern"],[1,"card-corner","top-left"],[1,"rank"],[1,"suit"],[1,"card-center"],[1,"suit-symbol"],[1,"card-corner","bottom-right"]],template:function(t,n){t&1&&(ie(0,"div",0),oi("click",function(){return n.onCardClick()})("keydown.enter",function(){return n.onCardClick()})("keydown.space",function(){return n.onCardClick()}),O(1,ja,2,2,"div",1)(2,Ka,14,5,"div",2),re()),t&2&&(he("face-down",n.faceDown())("red-card",n.isRed())("black-card",!n.isRed())("glowing",n.glow())("glow-green",n.glow()==="green")("glow-red",n.glow()==="red")("glow-blue",n.glow()==="blue")("clickable",n.clickable())("animate-slide-in",n.animationState()==="slide-in")("animate-flip",n.animationState()==="flip")("animate-clash-win",n.animationState()==="clash-win")("animate-clash-lose",n.animationState()==="clash-lose")("animate-fall-away",n.animationState()==="fall-away")("from-deck",n.fromPosition()==="deck"),Ge("role",n.clickable()?"button":null)("aria-label",n.ariaLabel())("tabindex",n.clickable()?0:null),g(),D(n.faceDown()?1:2))},dependencies:[Se],styles:[".card[_ngcontent-%COMP%]{width:70px;height:100px;border-radius:8px;border:1px solid #ccc;position:relative;background:#fff;cursor:pointer;transition:all .3s ease-in-out;box-shadow:0 2px 4px #0000001a;-webkit-user-select:none;user-select:none}@media (max-width: 599px){.card[_ngcontent-%COMP%]{width:60px;height:85px}}@media (max-width: 359px){.card[_ngcontent-%COMP%]{width:50px;height:70px}}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.card.glowing[_ngcontent-%COMP%]{transition:box-shadow .3s ease-in-out,transform .3s ease-in-out}.card.glow-green[_ngcontent-%COMP%]{box-shadow:0 0 10px #4caf5099,0 2px 4px #0000001a;border-color:#4caf50}.card.glow-red[_ngcontent-%COMP%]{box-shadow:0 0 10px #f4433699,0 2px 4px #0000001a;border-color:#f44336}.card.glow-blue[_ngcontent-%COMP%]{box-shadow:0 0 10px #2196f399,0 2px 4px #0000001a;border-color:#2196f3;animation:_ngcontent-%COMP%_pulse-blue 1.5s infinite}.card.clickable[_ngcontent-%COMP%]{cursor:pointer}.card.clickable[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 12px #0003}.card.clickable[_ngcontent-%COMP%]:active{transform:translateY(-2px)}.card[_ngcontent-%COMP%]:not(.clickable){cursor:default}.card[_ngcontent-%COMP%]:not(.clickable):hover{transform:none;box-shadow:0 2px 4px #0000001a}@keyframes _ngcontent-%COMP%_pulse-blue{0%,to{box-shadow:0 0 10px #2196f399,0 2px 4px #0000001a}50%{box-shadow:0 0 20px #2196f3cc,0 4px 8px #00000026}}.card-back[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(45deg,#1565c0 25%,#1976d2 25% 50%,#1565c0 50% 75%,#1976d2 75%);background-size:8px 8px;border-radius:7px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}.card-pattern[_ngcontent-%COMP%]{width:80%;height:80%;background-image:radial-gradient(circle at 50% 50%,rgba(255,255,255,.1) 0%,rgba(255,255,255,.05) 50%,transparent 100%);border-radius:4px}.card-face[_ngcontent-%COMP%]{width:100%;height:100%;padding:4px;position:relative;display:flex;flex-direction:column;justify-content:space-between}@media (max-width: 599px){.card-face[_ngcontent-%COMP%]{padding:3px}}@media (max-width: 359px){.card-face[_ngcontent-%COMP%]{padding:2px}}.card-corner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;font-weight:700;font-size:10px;line-height:1}@media (max-width: 599px){.card-corner[_ngcontent-%COMP%]{font-size:9px}}@media (max-width: 359px){.card-corner[_ngcontent-%COMP%]{font-size:8px}}.card-corner[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{margin-bottom:1px}.card-corner[_ngcontent-%COMP%]   .suit[_ngcontent-%COMP%]{font-size:8px}@media (max-width: 599px){.card-corner[_ngcontent-%COMP%]   .suit[_ngcontent-%COMP%]{font-size:7px}}@media (max-width: 359px){.card-corner[_ngcontent-%COMP%]   .suit[_ngcontent-%COMP%]{font-size:6px}}.top-left[_ngcontent-%COMP%]{align-self:flex-start}.bottom-right[_ngcontent-%COMP%]{align-self:flex-end;transform:rotate(180deg)}.card-center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;align-items:center;justify-content:center}.suit-symbol[_ngcontent-%COMP%]{font-size:24px;font-weight:700}@media (max-width: 599px){.suit-symbol[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 359px){.suit-symbol[_ngcontent-%COMP%]{font-size:16px}}.red-card[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%], .red-card[_ngcontent-%COMP%]   .suit-symbol[_ngcontent-%COMP%]{color:#d32f2f}.black-card[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%], .black-card[_ngcontent-%COMP%]   .suit-symbol[_ngcontent-%COMP%]{color:#212121}[_nghost-%COMP%]     .dark-theme .card{background:#424242;border-color:#666;color:#e0e0e0}[_nghost-%COMP%]     .dark-theme .card.red-card .rank, [_nghost-%COMP%]     .dark-theme .card.red-card .suit-symbol{color:#f44336}[_nghost-%COMP%]     .dark-theme .card.black-card .rank, [_nghost-%COMP%]     .dark-theme .card.black-card .suit-symbol{color:#e0e0e0}.card.animate-slide-in[_ngcontent-%COMP%], .card.animate-slide-in.from-deck[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-from-deck .8s ease-out}.card.animate-flip[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_card-flip .6s ease-in-out}.card.animate-clash-win[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_clash-victory 1s ease-out}.card.animate-clash-lose[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_clash-defeat 1s ease-out}.card.animate-fall-away[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fall-away 1.2s ease-in forwards}@keyframes _ngcontent-%COMP%_slide-in-from-deck{0%{transform:translateY(-100px) scale(.8);opacity:.7}60%{transform:translateY(10px) scale(1.05);opacity:.9}to{transform:translateY(0) scale(1);opacity:1}}@keyframes _ngcontent-%COMP%_card-flip{0%{transform:rotateY(0)}50%{transform:rotateY(90deg)}to{transform:rotateY(0)}}@keyframes _ngcontent-%COMP%_clash-victory{0%{transform:translate(0) scale(1)}25%{transform:translate(-15px) scale(1.1)}50%{transform:translate(15px) scale(1.15)}75%{transform:translate(-5px) scale(1.1)}to{transform:translate(0) scale(1.05);box-shadow:0 0 20px #4caf50cc}}@keyframes _ngcontent-%COMP%_clash-defeat{0%{transform:translate(0) scale(1)}25%{transform:translate(15px) scale(1.05) rotate(5deg)}50%{transform:translate(-15px) scale(.95) rotate(-5deg)}75%{transform:translate(5px) scale(.9) rotate(2deg)}to{transform:translate(0) scale(.85) rotate(0);opacity:.7}}@keyframes _ngcontent-%COMP%_fall-away{0%{transform:translateY(0) rotate(0) scale(1);opacity:1}30%{transform:translateY(20px) rotate(-15deg) scale(.9);opacity:.8}70%{transform:translateY(100px) rotate(-45deg) scale(.6);opacity:.3}to{transform:translateY(200px) rotate(-90deg) scale(.2);opacity:0}}"]})};function Ua(i,e){if(i&1&&et(0,"div",6),i&2){let t=P();tt("width",t.dangerPercentage(),"%")("right",100-t.healthPercentage(),"%")}}var Yt=class i{label=T("Player");current=T(26);maximum=T(26);inDanger=T(0);showDamageAnimation=T(!1);healthPercentage=N(()=>{let e=this.maximum(),t=this.current();return e>0?t/e*100:0});dangerPercentage=N(()=>{let e=this.maximum(),t=this.inDanger();return e>0?Math.min(100,t/e*100):0});healthColor=N(()=>{let e=this.healthPercentage();return e>=75?"green":e>=50?"yellow":e>=25?"orange":"red"});static \u0275fac=function(t){return new(t||i)};static \u0275cmp=H({type:i,selectors:[["app-health-bar"]],inputs:{label:[1,"label"],current:[1,"current"],maximum:[1,"maximum"],inDanger:[1,"inDanger"],showDamageAnimation:[1,"showDamageAnimation"]},decls:9,vars:16,consts:[[1,"health-bar-container"],[1,"health-bar-label"],[1,"card-count"],[1,"health-bar-track"],[1,"health-bar-fill"],[1,"health-bar-danger",3,"width","right"],[1,"health-bar-danger"]],template:function(t,n){t&1&&(ie(0,"div",0)(1,"div",1)(2,"span"),m(3),re(),ie(4,"span",2),m(5),re()(),ie(6,"div",3),et(7,"div",4),O(8,Ua,1,4,"div",5),re()()),t&2&&(g(3),j(n.label()),g(2),mi("",n.current(),"/",n.maximum()),g(2),tt("width",n.healthPercentage(),"%"),he("green",n.healthColor()==="green")("yellow",n.healthColor()==="yellow")("orange",n.healthColor()==="orange")("red",n.healthColor()==="red")("damage-animation",n.showDamageAnimation()),g(),D(n.inDanger()>0?8:-1))},dependencies:[Se],styles:[".health-bar-container[_ngcontent-%COMP%]{width:100%;max-width:400px}@media (max-width: 959px){.health-bar-container[_ngcontent-%COMP%]{max-width:320px}}@media (max-width: 599px){.health-bar-container[_ngcontent-%COMP%]{max-width:250px}}@media (max-width: 359px){.health-bar-container[_ngcontent-%COMP%]{max-width:200px}}.health-bar-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;font-size:14px;font-weight:500}@media (max-width: 599px){.health-bar-label[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 359px){.health-bar-label[_ngcontent-%COMP%]{font-size:12px}}.health-bar-label[_ngcontent-%COMP%]   .card-count[_ngcontent-%COMP%]{font-weight:400;opacity:.8}.health-bar-track[_ngcontent-%COMP%]{height:12px;background-color:#e0e0e0;border-radius:6px;overflow:hidden;position:relative;border:1px solid #ccc}@media (max-width: 599px){.health-bar-track[_ngcontent-%COMP%]{height:10px;border-radius:5px}}@media (max-width: 359px){.health-bar-track[_ngcontent-%COMP%]{height:8px;border-radius:4px}}.health-bar-fill[_ngcontent-%COMP%]{height:100%;border-radius:inherit;transition:width .5s ease-in-out,background-color .3s ease-in-out;position:relative}.health-bar-fill.green[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4caf50,#66bb6a)}.health-bar-fill.yellow[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ffc107,#ffd54f)}.health-bar-fill.orange[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ff9800,#ffb74d)}.health-bar-fill.red[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f44336,#ef5350)}.health-bar-danger[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;background:repeating-linear-gradient(45deg,rgba(255,255,255,.3) 0px,rgba(255,255,255,.3) 4px,transparent 4px,transparent 8px);border-radius:inherit;animation:_ngcontent-%COMP%_danger-pulse 1s infinite alternate}@keyframes _ngcontent-%COMP%_danger-pulse{0%{opacity:.4;transform:scaleY(1)}50%{opacity:.7;transform:scaleY(1.1)}to{opacity:.9;transform:scaleY(1)}}.health-bar-fill.damage-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_damage-flash .8s ease-in-out}@keyframes _ngcontent-%COMP%_damage-flash{0%{filter:brightness(1) contrast(1);transform:scale(1)}15%{filter:brightness(1.8) contrast(1.4);transform:scale(1.02)}30%{filter:brightness(.6) contrast(.8);transform:scale(.98)}45%{filter:brightness(1.4) contrast(1.2);transform:scale(1.01)}60%{filter:brightness(.9) contrast(1.1);transform:scale(.99)}80%{filter:brightness(1.1) contrast(1.05);transform:scale(1.005)}to{filter:brightness(1) contrast(1);transform:scale(1)}}[_nghost-%COMP%]     .dark-theme .health-bar-track{background-color:#424242;border-color:#666}[_nghost-%COMP%]     .dark-theme .health-bar-label{color:#e0e0e0}"]})};function Wa(i,e){if(i&1&&(p(0,"div",7),m(1),d()),i&2){let t=P();g(),j(t.opponentCardCount())}}function qa(i,e){if(i&1&&L(0,"app-card",10),i&2){let t=P();I("card",t.opponentActiveCard())("faceDown",!1)("glow",t.opponentCardGlow())("animationState",t.opponentCardAnimation())("fromPosition","deck")}}function Ya(i,e){if(i&1&&L(0,"app-card",10),i&2){let t=P();I("card",t.playerActiveCard())("faceDown",!1)("glow",t.playerCardGlow())("animationState",t.playerCardAnimation())("fromPosition","deck")}}function $a(i,e){if(i&1&&(p(0,"div",11),m(1),d()),i&2){let t=P();g(),be(" Turn ",t.turnNumber()," ")}}function Ha(i,e){if(i&1&&(p(0,"div",12),m(1),d()),i&2){let t=P();g(),be(" ",t.gameMessage()," ")}}function Qa(i,e){i&1&&(p(0,"div",13),m(1," Challenge? "),d())}function Xa(i,e){if(i&1&&(p(0,"div",7),m(1),d()),i&2){let t=P();g(),j(t.playerCardCount())}}var $t=class i{settingsService=Z(Ke);playerCardCount=T(26);opponentCardCount=T(26);playerActiveCard=T(null);opponentActiveCard=T(null);playerCardGlow=T(null);opponentCardGlow=T(null);playerCardsInDanger=T(0);opponentCardsInDanger=T(0);gameMessage=T(null);challengeAvailable=T(!1);canPlayerAct=T(!1);turnNumber=T(0);playerCardAnimation=T(null);opponentCardAnimation=T(null);playerHealthDamageAnimation=T(!1);opponentHealthDamageAnimation=T(!1);playerDeckClicked=bt();onPlayerDeckClick(){this.canPlayerAct()&&this.playerDeckClicked.emit()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=H({type:i,selectors:[["app-game-board"]],inputs:{playerCardCount:[1,"playerCardCount"],opponentCardCount:[1,"opponentCardCount"],playerActiveCard:[1,"playerActiveCard"],opponentActiveCard:[1,"opponentActiveCard"],playerCardGlow:[1,"playerCardGlow"],opponentCardGlow:[1,"opponentCardGlow"],playerCardsInDanger:[1,"playerCardsInDanger"],opponentCardsInDanger:[1,"opponentCardsInDanger"],gameMessage:[1,"gameMessage"],challengeAvailable:[1,"challengeAvailable"],canPlayerAct:[1,"canPlayerAct"],turnNumber:[1,"turnNumber"],playerCardAnimation:[1,"playerCardAnimation"],opponentCardAnimation:[1,"opponentCardAnimation"],playerHealthDamageAnimation:[1,"playerHealthDamageAnimation"],opponentHealthDamageAnimation:[1,"opponentHealthDamageAnimation"]},outputs:{playerDeckClicked:"playerDeckClicked"},decls:22,vars:26,consts:[[1,"game-board"],[1,"player-area","opponent-area"],[1,"player-info"],["label","Opponent",3,"current","maximum","inDanger","showDamageAnimation"],[1,"player-deck-area"],[1,"deck-container"],[3,"card","faceDown"],[1,"deck-count"],[1,"table-area"],[1,"active-cards"],[3,"card","faceDown","glow","animationState","fromPosition"],[1,"turn-counter"],[1,"game-message"],[1,"challenge-prompt"],[1,"player-area","player-area-bottom"],[1,"deck-container",3,"click"],[3,"card","faceDown","glow"],["label","You",3,"current","maximum","inDanger","showDamageAnimation"]],template:function(t,n){t&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),L(3,"app-health-bar",3),d(),p(4,"div",4)(5,"div",5),L(6,"app-card",6),O(7,Wa,2,1,"div",7),d()()(),p(8,"div",8)(9,"div",9),O(10,qa,1,5,"app-card",10),O(11,Ya,1,5,"app-card",10),d(),O(12,$a,2,1,"div",11),O(13,Ha,2,1,"div",12),O(14,Qa,2,0,"div",13),d(),p(15,"div",14)(16,"div",4)(17,"div",15),G("click",function(){return n.onPlayerDeckClick()}),L(18,"app-card",16),O(19,Xa,2,1,"div",7),d()(),p(20,"div",2),L(21,"app-health-bar",17),d()()()),t&2&&(g(3),I("current",n.opponentCardCount())("maximum",26)("inDanger",n.opponentCardsInDanger())("showDamageAnimation",n.opponentHealthDamageAnimation()),g(2),he("can-select",!1),g(),I("card",null)("faceDown",!0),g(),D(n.opponentCardCount()>1?7:-1),g(3),D(n.opponentActiveCard()?10:-1),g(),D(n.playerActiveCard()?11:-1),g(),D(n.settingsService.showTurnCounter()&&n.turnNumber()>0?12:-1),g(),D(n.gameMessage()?13:-1),g(),D(n.challengeAvailable()?14:-1),g(3),he("can-select",n.canPlayerAct())("glowing",n.canPlayerAct()),g(),I("card",null)("faceDown",!0)("glow",n.canPlayerAct()?"blue":null),g(),D(n.playerCardCount()>1?19:-1),g(2),I("current",n.playerCardCount())("maximum",26)("inDanger",n.playerCardsInDanger())("showDamageAnimation",n.playerHealthDamageAnimation()))},dependencies:[Se,Ee,Yt],styles:[".game-board[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:1400px;height:calc(100vh - 80px);max-height:none;margin:0 auto;background:#2e7d32;color:#fff;overflow:hidden;position:relative}@media (max-width: 1440px){.game-board[_ngcontent-%COMP%]{max-width:100%}}@media (max-width: 599px){.game-board[_ngcontent-%COMP%]{height:calc(100dvh - 64px)}}.player-area[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 2%;flex:0 0 auto;min-height:100px}@media (max-width: 959px){.player-area[_ngcontent-%COMP%]{padding:10px 3%;min-height:90px}}@media (max-width: 599px){.player-area[_ngcontent-%COMP%]{padding:8px 12px;min-height:80px}}@media (max-width: 359px){.player-area[_ngcontent-%COMP%]{padding:6px 8px;min-height:70px}}.opponent-area[_ngcontent-%COMP%]{border-bottom:2px solid rgba(255,255,255,.2)}.player-area-bottom[_ngcontent-%COMP%]{border-top:2px solid rgba(255,255,255,.2)}.player-info[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center}@media (max-width: 599px){.player-info[_ngcontent-%COMP%]{flex:0 0 auto;margin-right:12px}}.player-deck-area[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;align-items:center;justify-content:center}.deck-container[_ngcontent-%COMP%]{position:relative;cursor:pointer;transition:transform .3s ease-in-out}.deck-container.can-select[_ngcontent-%COMP%]{cursor:pointer}.deck-container.can-select[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.deck-container.can-select[_ngcontent-%COMP%]:active{transform:translateY(0)}.deck-container.glowing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_deck-glow 1.5s infinite}.deck-container[_ngcontent-%COMP%]   .deck-count[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-8px;background:#ffffffe6;color:#2e7d32;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;border:1px solid rgba(255,255,255,.3)}@media (max-width: 599px){.deck-container[_ngcontent-%COMP%]   .deck-count[_ngcontent-%COMP%]{width:18px;height:18px;font-size:9px}}@media (max-width: 359px){.deck-container[_ngcontent-%COMP%]   .deck-count[_ngcontent-%COMP%]{width:16px;height:16px;font-size:8px}}@keyframes _ngcontent-%COMP%_deck-glow{0%,to{transform:scale(1);filter:drop-shadow(0 0 8px rgba(33,150,243,.6))}50%{transform:scale(1.05);filter:drop-shadow(0 0 16px rgba(33,150,243,.8))}}.table-area[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;padding:16px 2%;min-height:200px}@media (max-width: 959px){.table-area[_ngcontent-%COMP%]{padding:12px 3%;min-height:180px}}@media (max-width: 599px){.table-area[_ngcontent-%COMP%]{padding:12px 2%;min-height:160px}}@media (max-width: 359px){.table-area[_ngcontent-%COMP%]{padding:8px 1%;min-height:140px}}.active-cards[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center;justify-content:center;margin-bottom:16px}@media (max-width: 599px){.active-cards[_ngcontent-%COMP%]{gap:16px;margin-bottom:12px}}@media (max-width: 359px){.active-cards[_ngcontent-%COMP%]{gap:12px;margin-bottom:8px}}.turn-counter[_ngcontent-%COMP%]{background:#0009;color:#fff;padding:6px 16px;border-radius:20px;font-size:14px;font-weight:500;text-align:center;margin-bottom:12px;display:inline-block;border:1px solid rgba(255,255,255,.2);min-width:80px}@media (max-width: 599px){.turn-counter[_ngcontent-%COMP%]{font-size:12px;padding:4px 12px;margin-bottom:8px}}@media (max-width: 359px){.turn-counter[_ngcontent-%COMP%]{font-size:11px;padding:3px 10px;margin-bottom:6px}}.game-message[_ngcontent-%COMP%]{background:#000000b3;color:#fff;padding:12px 20px;border-radius:8px;font-size:16px;font-weight:500;text-align:center;margin-bottom:12px;max-width:80%;box-shadow:0 4px 8px #0000004d}@media (max-width: 599px){.game-message[_ngcontent-%COMP%]{font-size:14px;padding:10px 16px;max-width:90%}}@media (max-width: 359px){.game-message[_ngcontent-%COMP%]{font-size:13px;padding:8px 12px;max-width:95%}}.challenge-prompt[_ngcontent-%COMP%]{background:#2196f3e6;color:#fff;padding:8px 16px;border-radius:6px;font-size:14px;font-weight:600;text-align:center;animation:_ngcontent-%COMP%_challenge-pulse 1s infinite alternate;box-shadow:0 2px 4px #0000004d}@media (max-width: 599px){.challenge-prompt[_ngcontent-%COMP%]{font-size:13px;padding:6px 12px}}@media (max-width: 359px){.challenge-prompt[_ngcontent-%COMP%]{font-size:12px;padding:4px 8px}}@keyframes _ngcontent-%COMP%_challenge-pulse{0%{opacity:.8;transform:scale(1)}to{opacity:1;transform:scale(1.05)}}@media (max-width: 599px){.player-area[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.player-info[_ngcontent-%COMP%]{order:1}.player-deck-area[_ngcontent-%COMP%]{order:2}}@media (max-width: 359px){.active-cards[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}[_nghost-%COMP%]     .dark-theme .game-board{background:#1b5e20}[_nghost-%COMP%]     .dark-theme .deck-count{background:#e0e0e0e6;color:#1b5e20}"]})};var Ja=["*",[["mat-toolbar-row"]]],Za=["*","mat-toolbar-row"],eo=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=ri({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return i})(),Ht=(()=>{class i{_elementRef=Z(ti);_platform=Z(vi);_document=Z(Ct);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=H({type:i,selectors:[["mat-toolbar"]],contentQueries:function(n,r,a){if(n&1&&li(a,eo,5),n&2){let o;ci(o=di())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(n,r){n&2&&(nt(r.color?"mat-"+r.color:""),he("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:Za,decls:2,vars:0,template:function(n,r){n&1&&(si(Ja),pn(0),pn(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mat-button-text-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mat-button-outlined-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return i})();var Qt=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=_t({type:i});static \u0275inj=yt({imports:[un,un]})}return i})();function io(i,e){i&1&&(p(0,"div",5)(1,"mat-icon",10),m(2,"delete_outline"),d(),p(3,"h3"),m(4,"No Cards Discarded"),d(),p(5,"p"),m(6,"Cards lost during gameplay will appear here."),d()())}function ro(i,e){i&1&&m(0," Your Card ")}function ao(i,e){i&1&&m(0," Opponent's Card ")}function oo(i,e){if(i&1&&(p(0,"div",19),m(1),d()),i&2){let t=P().$implicit;g(),be("Turn ",t.turnNumber)}}function so(i,e){if(i&1&&(p(0,"div",20),m(1),d()),i&2){let t=P().$implicit;g(),j(t.reason)}}function lo(i,e){if(i&1&&(p(0,"div",14)(1,"div",15),L(2,"app-card",16),d(),p(3,"div",17)(4,"div",18),O(5,ro,1,0)(6,ao,1,0),d(),O(7,oo,2,1,"div",19),O(8,so,2,1,"div",20),d()()),i&2){let t=e.$implicit;nt("lost-by-"+t.playerType),g(2),I("card",t.card)("faceDown",!1),g(2),nt(t.playerType),g(),D(t.playerType==="player"?5:6),g(2),D(t.turnNumber?7:-1),g(),D(t.reason?8:-1)}}function co(i,e){if(i&1&&(p(0,"div",6)(1,"div",11)(2,"small"),m(3,"Most recent discards shown first"),d()(),p(4,"div",12),ze(5,lo,9,9,"div",13,Be),d()()),i&2){let t=P();g(5),Ve(t.discardedCardInfos())}}function mo(i,e){if(i&1){let t=ve();p(0,"button",21),G("click",function(){ee(t);let r=P();return te(r.scrollToTop())}),p(1,"mat-icon"),m(2,"keyboard_arrow_up"),d(),m(3," Back to Recent "),d()}}var Xt=class i{constructor(e,t){this.dialogRef=e;this.data=t}discardedCards=N(()=>this.data.discardedCards||[]);discardedCardInfos=N(()=>this.discardedCards().map((e,t)=>({card:e,playerType:e.suit==="hearts"||e.suit==="diamonds"?"player":"opponent",turnNumber:void 0,reason:void 0})).reverse());close(){this.dialogRef.close()}scrollToTop(){let e=document.querySelector(".cards-scroll");e&&(e.scrollTop=0)}static \u0275fac=function(t){return new(t||i)(me(Ti),me(Oi))};static \u0275cmp=H({type:i,selectors:[["app-discard-pile-viewer"]],decls:18,vars:3,consts:[[1,"title"],[1,"spacer"],[1,"card-count"],["mat-icon-button","",3,"click"],[1,"dialog-content"],[1,"empty-state"],[1,"cards-container"],[1,"dialog-actions"],["mat-button","",3,"click"],["mat-raised-button","","color","primary"],[1,"empty-icon"],[1,"sort-info"],[1,"cards-scroll"],[1,"card-item",3,"class"],[1,"card-item"],[1,"card-wrapper"],[3,"card","faceDown"],[1,"card-info"],[1,"player-indicator"],[1,"turn-info"],[1,"reason"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,n){t&1&&(p(0,"mat-toolbar")(1,"span",0)(2,"mat-icon"),m(3,"delete"),d(),m(4," Discard Pile "),d(),L(5,"span",1),p(6,"span",2),m(7),d(),p(8,"button",3),G("click",function(){return n.close()}),p(9,"mat-icon"),m(10,"close"),d()()(),p(11,"div",4),O(12,io,7,0,"div",5)(13,co,7,0,"div",6),d(),p(14,"div",7)(15,"button",8),G("click",function(){return n.close()}),m(16,"Close"),d(),O(17,mo,4,0,"button",9),d()),t&2&&(g(7),be("",n.discardedCards().length," cards"),g(5),D(n.discardedCards().length===0?12:13),g(5),D(n.discardedCards().length>0?17:-1))},dependencies:[Se,ki,je,Pt,wt,Mt,Et,Qt,Ht,Ee],styles:[".title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:500}.spacer[_ngcontent-%COMP%]{flex:1}.card-count[_ngcontent-%COMP%]{font-size:.9em;opacity:.8}.dialog-content[_ngcontent-%COMP%]{max-height:70vh;min-height:300px;padding:0;overflow:hidden}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:300px;text-align:center;color:#0009}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.3}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-weight:400}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9em}.cards-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.sort-info[_ngcontent-%COMP%]{padding:8px 16px;background:#00000008;border-bottom:1px solid rgba(0,0,0,.08);text-align:center}.sort-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#0009;font-size:.75em}.cards-scroll[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:12px}.card-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:12px;border-radius:8px;border:1px solid rgba(0,0,0,.12);background-color:#00000005;transition:all .2s ease}.card-item[_ngcontent-%COMP%]:hover{background-color:#0000000a}.card-item.lost-by-player[_ngcontent-%COMP%]{border-left:4px solid #f44336}.card-item.lost-by-opponent[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.card-wrapper[_ngcontent-%COMP%]{flex-shrink:0}.card-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.player-indicator[_ngcontent-%COMP%]{font-weight:500;font-size:.9em}.player-indicator.player[_ngcontent-%COMP%]{color:#f44336}.player-indicator.opponent[_ngcontent-%COMP%]{color:#4caf50}.turn-info[_ngcontent-%COMP%]{font-size:.8em;opacity:.7}.reason[_ngcontent-%COMP%]{font-size:.8em;font-style:italic;opacity:.8}.dialog-actions[_ngcontent-%COMP%]{padding:16px;display:flex;justify-content:space-between;align-items:center;border-top:1px solid rgba(0,0,0,.12)}@media (max-width: 599px){.card-item[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:8px}.card-info[_ngcontent-%COMP%]{align-items:center}.dialog-actions[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.dark-theme[_nghost-%COMP%]   .card-item[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .card-item[_ngcontent-%COMP%]{border-color:#ffffff1f;background-color:#ffffff05}.dark-theme[_nghost-%COMP%]   .card-item[_ngcontent-%COMP%]:hover, .dark-theme   [_nghost-%COMP%]   .card-item[_ngcontent-%COMP%]:hover{background-color:#ffffff0a}.dark-theme[_nghost-%COMP%]   .empty-state[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .empty-state[_ngcontent-%COMP%]{color:#fff9}.dark-theme[_nghost-%COMP%]   .dialog-actions[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{border-top-color:#ffffff1f}.dark-theme[_nghost-%COMP%]   .sort-info[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .sort-info[_ngcontent-%COMP%]{background:#ffffff08;border-bottom-color:#ffffff14}.dark-theme[_nghost-%COMP%]   .sort-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .sort-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#fff9}"]})};var ye=class i{cards=[];constructor(e){e?this.cards=[...e]:this.initializeStandardDeck()}initializeStandardDeck(){let e=Object.values(mt),t=Object.values(Pe);for(let n of e)for(let r of t)this.cards.push(new He(n,r))}static createRedDeck(){let e=[],t=["hearts","diamonds"],n=Object.values(Pe);for(let r of t)for(let a of n)e.push(new He(r,a));return new i(e)}static createBlackDeck(){let e=[],t=["clubs","spades"],n=Object.values(Pe);for(let r of t)for(let a of n)e.push(new He(r,a));return new i(e)}shuffle(){for(let e=this.cards.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[this.cards[e],this.cards[t]]=[this.cards[t],this.cards[e]]}}draw(){return this.cards.pop()||null}drawMultiple(e){let t=[];for(let n=0;n<e&&this.cards.length>0;n++){let r=this.draw();r&&t.push(r)}return t}addCard(e){this.cards.unshift(e)}addCards(e){this.cards.unshift(...e)}get count(){return this.cards.length}get isEmpty(){return this.cards.length===0}get hasMinimumForBattle(){return this.cards.length>=4}peek(){return this.cards[this.cards.length-1]||null}toArray(){return[...this.cards]}copy(){return new i([...this.cards])}reset(){this.cards=[]}};var ue=class i{playerDeck=b(ye.createRedDeck());opponentDeck=b(ye.createBlackDeck());discardPile=b([]);gamePhase=b("setup");turnNumber=b(0);activeTurn=b(null);winner=b(null);isPlayerTurn=b(!0);canChallenge=b(!1);lastResult=b(null);playerCardCount=N(()=>this.playerDeck().count);opponentCardCount=N(()=>this.opponentDeck().count);discardedCardCount=N(()=>this.discardPile().length);discardedCards=N(()=>[...this.discardPile()]);gameStats=N(()=>({turnNumber:this.turnNumber(),playerCardCount:this.playerCardCount(),opponentCardCount:this.opponentCardCount(),discardedCardCount:this.discardedCardCount()}));gameState=N(()=>({phase:this.gamePhase(),stats:this.gameStats(),activeTurn:this.activeTurn(),winner:this.winner(),isPlayerTurn:this.isPlayerTurn(),canChallenge:this.canChallenge(),lastResult:this.lastResult()}));get currentPhase(){return this.gamePhase()}get currentStats(){return this.gameStats()}get currentState(){return this.gameState()}get currentPlayerDeck(){return this.playerDeck()}get currentOpponentDeck(){return this.opponentDeck()}get currentDiscardPile(){return this.discardPile()}initializeGame(){this.playerDeck.set(ye.createRedDeck()),this.opponentDeck.set(ye.createBlackDeck()),this.discardPile.set([]),this.gamePhase.set("setup"),this.turnNumber.set(0),this.activeTurn.set(null),this.winner.set(null),this.isPlayerTurn.set(!0),this.canChallenge.set(!1),this.lastResult.set(null),this.playerDeck().shuffle(),this.opponentDeck().shuffle(),this.gamePhase.set("normal")}startTurn(){if(this.gamePhase()!=="normal")throw new Error("Cannot start turn in current phase");if(this.playerDeck().isEmpty||this.opponentDeck().isEmpty)return this.endGame(),{playerCard:null,opponentCard:null};let e=this.drawPlayerCard(),t=this.drawOpponentCard();return!e||!t?(this.endGame(),{playerCard:null,opponentCard:null}):(this.turnNumber.update(n=>n+1),this.activeTurn.set({playerCard:e,opponentCard:t,phase:"normal"}),{playerCard:e,opponentCard:t})}setPhase(e){this.gamePhase.set(e)}setChallengeAvailable(e){this.canChallenge.set(e)}setActiveTurn(e){this.activeTurn.set(e)}addToDiscardPile(e){this.discardPile.update(t=>[...t,...e]),this.validateDeckCounts()}returnCardsToPlayerDeck(e){let t=this.playerDeck().copy();t.addCards(e),this.playerDeck.set(t),this.validateDeckCounts()}returnCardsToOpponentDeck(e){let t=this.opponentDeck().copy();t.addCards(e),this.opponentDeck.set(t),this.validateDeckCounts()}removeCardsFromPlayerDeck(e){let n=[...this.playerDeck().toArray()];for(let r of e){let a=n.findIndex(o=>o.suit===r.suit&&o.rank===r.rank);a!==-1&&n.splice(a,1)}this.playerDeck.set(new ye(n))}removeCardsFromOpponentDeck(e){let n=[...this.opponentDeck().toArray()];for(let r of e){let a=n.findIndex(o=>o.suit===r.suit&&o.rank===r.rank);a!==-1&&n.splice(a,1)}this.opponentDeck.set(new ye(n))}validateDeckCounts(){let e=this.playerDeck().count,t=this.opponentDeck().count;if(e>26||t>26)throw console.error(`Invalid deck count detected: Player(${e}) Opponent(${t})`),new Error(`Invalid deck count: Player(${e}) Opponent(${t}) - No deck should exceed 26 cards`)}drawPlayerCard(){let e=this.playerDeck().copy(),t=e.draw();return this.playerDeck.set(e),t}drawOpponentCard(){let e=this.opponentDeck().copy(),t=e.draw();return this.opponentDeck.set(e),t}setLastResult(e){this.lastResult.set(e)}endGame(){this.gamePhase.set("game_over"),this.playerCardCount()===0?this.winner.set("opponent"):this.opponentCardCount()===0?this.winner.set("player"):this.winner.set(this.playerCardCount()>this.opponentCardCount()?"player":"opponent"),this.activeTurn.set(null),this.canChallenge.set(!1)}checkGameEndConditions(){return this.playerCardCount()===0||this.opponentCardCount()===0?(this.endGame(),!0):this.gamePhase()==="battle"&&(!this.playerDeck().hasMinimumForBattle||!this.opponentDeck().hasMinimumForBattle)?(this.endGame(),!0):!1}reset(){this.initializeGame()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=R({token:i,factory:i.\u0275fac,providedIn:"root"})};var en=class i{compareCards(e,t){return this.isSpecialAceVsTwoRule(e,t)?e.rank==="2"?"player_wins":"opponent_wins":e.value>t.value?"player_wins":e.value<t.value?"opponent_wins":"tie"}isSpecialAceVsTwoRule(e,t){let n=e.rank==="A"||t.rank==="A",r=e.rank==="2"||t.rank==="2";return n&&r}compareMultipleCards(e,t){if(e.length!==t.length)throw new Error("Card arrays must be the same length for comparison");if(e.length===1&&t.length===1)return this.compareCards(e[0],t[0]);throw new Error("Multiple card comparison not yet implemented for arrays > 1")}getHigherCard(e,t){switch(this.compareCards(e,t)){case"player_wins":return e;case"opponent_wins":return t;case"tie":return e}}areCardsEqual(e,t){return this.compareCards(e,t)==="tie"}static \u0275fac=function(t){return new(t||i)};static \u0275prov=R({token:i,factory:i.\u0275fac,providedIn:"root"})};var tn=class i{shouldChallenge(e){let t={2:.95,3:.8,4:.65,5:.5,6:.4,7:.3,8:.25,9:.2,10:.15,11:.1,12:.05,13:.03,14:.01},n=this.getCardValue(e),r=t[n]||.2;return Math.random()<r}getCardValue(e){switch(e.rank){case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case"10":return 10;case"J":return 11;case"Q":return 12;case"K":return 13;case"A":return 14;default:return 7}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=R({token:i,factory:i.\u0275fac,providedIn:"root"})};var Qe=class i{constructor(e,t,n){this.gameStateService=e;this.cardComparisonService=t;this.opponentAIService=n}resolveTurn(e,t){switch(this.cardComparisonService.compareCards(e,t)){case"player_wins":return this.resolveNormalWin(e,t,"player");case"opponent_wins":return this.resolveNormalLoss(e,t,"opponent");case"tie":return this.resolveTie(e,t)}}resolveNormalWin(e,t,n){let r=n==="player"?[e]:[t],a=n==="player"?[t]:[e],o=!1,s=!1,l="";if(n==="opponent")o=!0,l="Opponent wins this turn!";else{if(s=this.opponentAIService.shouldChallenge(t),s)return l="You win this turn, but opponent challenges!",{winner:null,result:"player_wins",message:l,cardsLost:[],cardsKept:[e,t],nextPhase:"challenge",canChallenge:!1,opponentChallenge:!0};l="You win this turn!"}return n==="player"?this.gameStateService.returnCardsToPlayerDeck([e]):this.gameStateService.returnCardsToOpponentDeck([t]),this.gameStateService.addToDiscardPile(a),{winner:n,result:n==="player"?"player_wins":"opponent_wins",message:l,cardsLost:a,cardsKept:r,nextPhase:o?"challenge":"normal",canChallenge:o,opponentChallenge:!1}}resolveNormalLoss(e,t,n){return this.resolveNormalWin(e,t,n)}resolveTie(e,t){return!this.gameStateService.currentPlayerDeck.hasMinimumForBattle||!this.gameStateService.currentOpponentDeck.hasMinimumForBattle?(this.gameStateService.endGame(),{winner:null,result:"tie",message:"Battle cannot be conducted - insufficient cards. Game ends.",cardsLost:[e,t],cardsKept:[],nextPhase:"game_over",canChallenge:!1}):{winner:null,result:"tie",message:"Cards tie! Preparing for battle...",cardsLost:[],cardsKept:[e,t],nextPhase:"battle",canChallenge:!1}}resolveChallenge(e,t,n){let r=this.cardComparisonService.compareCards(n,t);return r==="player_wins"?(this.gameStateService.returnCardsToPlayerDeck([e,n]),this.gameStateService.removeCardsFromOpponentDeck([t]),this.gameStateService.addToDiscardPile([t]),{winner:"player",result:"player_wins",message:"Challenge successful! You keep your cards.",cardsLost:[t],cardsKept:[e,n],nextPhase:"normal",canChallenge:!1}):(this.gameStateService.addToDiscardPile([e,n]),{winner:"opponent",result:r==="tie"?"tie":"opponent_wins",message:r==="tie"?"Challenge ties! You lose your cards.":"Challenge failed! You lose your cards.",cardsLost:[e,n],cardsKept:[t],nextPhase:r==="tie"?"battle":"normal",canChallenge:!1})}resolveOpponentChallenge(e,t,n){let r=this.cardComparisonService.compareCards(n,e);return r==="opponent_wins"?(this.gameStateService.returnCardsToOpponentDeck([t,n]),this.gameStateService.addToDiscardPile([e]),{winner:"opponent",result:"opponent_wins",message:"Opponent challenge successful! Opponent keeps their cards.",cardsLost:[e],cardsKept:[t,n],nextPhase:"normal",canChallenge:!1,opponentChallenge:!1}):(this.gameStateService.returnCardsToPlayerDeck([e]),this.gameStateService.addToDiscardPile([t,n]),{winner:"player",result:r==="tie"?"tie":"player_wins",message:r==="tie"?"Opponent challenge ties! Opponent loses their cards.":"Opponent challenge failed! Opponent loses their cards.",cardsLost:[t,n],cardsKept:[e],nextPhase:r==="tie"?"battle":"normal",canChallenge:!1,opponentChallenge:!1})}resolveBattle(e,t,n,r,a,o){let s=this.cardComparisonService.compareCards(a,o),l=[e,...n],c=[t,...r];return s==="player_wins"?(this.gameStateService.returnCardsToPlayerDeck(l),this.gameStateService.addToDiscardPile(c),{winner:"player",result:"player_wins",message:"You win the battle! All opponent cards discarded.",cardsLost:c,cardsKept:l,nextPhase:"normal",canChallenge:!1}):s==="opponent_wins"?(this.gameStateService.addToDiscardPile(l),this.gameStateService.returnCardsToOpponentDeck(c),{winner:"opponent",result:"opponent_wins",message:"Opponent wins the battle! All your cards discarded.",cardsLost:l,cardsKept:c,nextPhase:"normal",canChallenge:!1}):!this.gameStateService.currentPlayerDeck.hasMinimumForBattle||!this.gameStateService.currentOpponentDeck.hasMinimumForBattle?(this.gameStateService.addToDiscardPile([...l,...c]),this.gameStateService.endGame(),{winner:null,result:"tie",message:"Another tie in battle, but insufficient cards for another battle. Game ends.",cardsLost:[...l,...c],cardsKept:[],nextPhase:"game_over",canChallenge:!1}):{winner:null,result:"tie",message:"Battle ties again! Another battle required.",cardsLost:[],cardsKept:[...l,...c],nextPhase:"battle",canChallenge:!1}}checkWinConditions(){return this.gameStateService.checkGameEndConditions()}static \u0275fac=function(t){return new(t||i)(V(ue),V(en),V(tn))};static \u0275prov=R({token:i,factory:i.\u0275fac,providedIn:"root"})};var Xe=class i{progressData={project:{name:"War of Attrition Game",version:"Angular 20.1.6",type:"Progressive Web Application"},currentMilestone:{number:7,name:"Testing & Polish",status:"IN_PROGRESS",emoji:"\u{1F9EA}"},milestones:[{number:1,name:"Foundation & Setup",status:"COMPLETED",progress:100,items:[{name:"Basic Angular/PWA setup",status:"COMPLETED"},{name:"Theme toggle implementation",status:"COMPLETED"},{name:"Routing structure",status:"COMPLETED"},{name:"Responsive layout foundation",status:"PARTIALLY_COMPLETED"}]},{number:2,name:"Core Game Engine",status:"COMPLETED",progress:100,items:[{name:"Card & Deck Models",status:"COMPLETED",description:"Complete TypeScript interfaces and classes"},{name:"Game State Management",status:"COMPLETED",description:"Angular signals-based reactive state"},{name:"Card Comparison Logic",status:"COMPLETED",description:"All rules including special Ace vs 2 rule"},{name:"Turn Resolution Engine",status:"COMPLETED",description:"Normal turns, challenges, and battles"},{name:"Comprehensive Tests",status:"COMPLETED",description:"60 passing tests covering all game logic"}]},{number:3,name:"Basic UI Components",status:"COMPLETED",progress:100,items:[{name:"Game Board Layout",status:"COMPLETED"},{name:"Card Component",status:"COMPLETED"},{name:"Health Bar Component",status:"COMPLETED"},{name:"Player Action Indicators",status:"COMPLETED"}]},{number:4,name:"Game Mechanics Implementation",status:"COMPLETED",progress:100,items:[{name:"Basic Turn Flow",status:"COMPLETED"},{name:"Challenge System",status:"COMPLETED"},{name:"Battle System",status:"COMPLETED"},{name:"Game End Conditions",status:"COMPLETED"}]},{number:5,name:"Visual Polish & Animations",status:"COMPLETED",progress:100,items:[{name:"Material Icons Implementation",status:"COMPLETED",description:"Navigation and theme toggle icons implemented"},{name:"Theme Toggle Enhancement",status:"COMPLETED",description:"Lightbulb metaphor with lit/unlit states"},{name:"Card Animations",status:"COMPLETED",description:"Slide-in, flip, and clash animations implemented"},{name:"Health Bar Damage Animations",status:"COMPLETED",description:"Enhanced flash effects and danger pulse animations"},{name:"Enhanced UI Polish",status:"COMPLETED",description:"Card fall-away animations and responsive layout improvements"},{name:"Responsive Layout Optimization",status:"COMPLETED",description:"Game board now utilizes available viewport space effectively"}]},{number:6,name:"Settings & Customization",status:"COMPLETED",progress:100,items:[{name:"Settings Menu Implementation",status:"COMPLETED",description:"Comprehensive settings interface with tabs"},{name:"Card Backing Customization",status:"COMPLETED",description:"Multiple card backing design options"},{name:"Discard Pile Viewer",status:"COMPLETED",description:"Modal dialog showing discarded cards with metadata"},{name:"Game Statistics Tracking",status:"COMPLETED",description:"Turn counter and game session statistics"}]},{number:7,name:"Testing & Polish",status:"IN_PROGRESS",progress:40,items:[{name:"Unit Testing Suite",status:"IN_PROGRESS",description:"Component tests for health-bar, action-indicator, and card components"},{name:"Integration Testing",status:"NOT_STARTED",description:"Game flow and UI interaction tests"},{name:"Performance Optimization",status:"IN_PROGRESS",description:"Bundle size optimization and animation performance"},{name:"Accessibility & Final Polish",status:"IN_PROGRESS",description:"Error handling improvements and code quality"}]}],testMetrics:{totalTests:135,passingTests:135,coverage:"comprehensive"},nextSteps:{immediate:"Continue Milestone 7: Testing & Polish - Complete remaining component tests and integration tests",priority:"Integration testing, performance optimization, and accessibility enhancements"},features:{implemented:["Card and Deck models with proper typing","Game state management with Angular signals","Card comparison logic (including Ace vs 2 rule)","Turn resolution engine","Challenge and battle mechanics","Win condition checking","Comprehensive test coverage","Complete game UI with responsive game board","Health bar system with color coding","Interactive card components","Full turn flow implementation","Challenge system (Accept/Decline)","Battle system with card selection","Game end condition handling","Material Icons for navigation (casino/dice, settings gear)","Enhanced theme toggle with lightbulb metaphor","Local Material Icons font integration","Card slide and flip animations","Battle clash visual effects with shake animations","Health bar damage animations with enhanced flash effects","Dynamic animation system for card states","Responsive layout optimization for better viewport utilization","Card fall-away animations for discarded cards","Settings menu with comprehensive customization options","Card backing customization with multiple design choices","Discard pile viewer with detailed card metadata","Game statistics tracking and session monitoring","Comprehensive unit test suite for UI components","Enhanced error handling and code quality improvements"],nextMilestone:["Integration testing for game flow scenarios","Performance optimization for bundle size","Accessibility enhancements (keyboard navigation, ARIA)","Additional edge case testing and validation"]}};getProgressData(){return this.progressData}getCurrentMilestone(){return this.progressData.currentMilestone}getMilestones(){return this.progressData.milestones}getCompletedMilestone(e){return this.progressData.milestones.find(t=>t.number===e)}getImplementedFeatures(){return this.progressData.features.implemented}getTestMetrics(){return this.progressData.testMetrics}getNextSteps(){return this.progressData.nextSteps}generateDemoLog(){let e=[],t=this.getProgressData(),n=this.getCurrentMilestone(),r=this.getCompletedMilestone(2);return e.push(`\u{1F3AE} ${t.project.name} Demo`),e.push("====================================="),e.push(""),e.push("\u2705 Game initialized"),e.push(""),e.push("\u{1F527} Core Game Engine Features Verified:"),r&&r.items.forEach(a=>{e.push(`   \u2705 ${a.description||a.name}`)}),e.push(""),e.push(`\u{1F680} Ready for ${t.nextSteps.immediate}!`),e}static \u0275fac=function(t){return new(t||i)};static \u0275prov=R({token:i,factory:i.\u0275fac,providedIn:"root"})};var nn=class i{constructor(e,t,n){this.gameStateService=e;this.turnResolutionService=t;this.progressService=n}runGameDemo(){let e=[];e.push("\u{1F3AE} War of Attrition Game Engine Demo"),e.push("====================================="),this.gameStateService.initializeGame(),e.push("\u2705 Game initialized"),e.push(`   Player cards: ${this.gameStateService.currentStats.playerCardCount}`),e.push(`   Opponent cards: ${this.gameStateService.currentStats.opponentCardCount}`),e.push(`   Game phase: ${this.gameStateService.currentPhase}`),e.push("");for(let r=1;r<=3;r++){if(e.push(`\u{1F3AF} Turn ${r}:`),this.gameStateService.currentPhase==="game_over"){e.push("   Game has ended!");break}this.gameStateService.currentPhase!=="normal"&&this.gameStateService.setPhase("normal");let{playerCard:a,opponentCard:o}=this.gameStateService.startTurn();if(!a||!o){e.push("   Cannot draw cards - game ended");break}e.push(`   Player drew: ${a.toString()}`),e.push(`   Opponent drew: ${o.toString()}`);let s=this.turnResolutionService.resolveTurn(a,o);if(e.push(`   Result: ${s.message}`),e.push(`   Winner: ${s.winner||"None (tie)"}`),e.push(`   Next phase: ${s.nextPhase}`),e.push(`   Cards kept: ${s.cardsKept.length}`),e.push(`   Cards lost: ${s.cardsLost.length}`),this.gameStateService.setPhase("normal"),this.gameStateService.setChallengeAvailable(!1),e.push(`   Current cards - Player: ${this.gameStateService.currentStats.playerCardCount}, Opponent: ${this.gameStateService.currentStats.opponentCardCount}`),e.push(""),this.turnResolutionService.checkWinConditions()){e.push(`\u{1F3C6} Game ended! Winner: ${this.gameStateService.currentState.winner}`);break}}let t=this.progressService.getProgressData(),n=this.progressService.getCompletedMilestone(2);return e.push("\u{1F527} Core Game Engine Features Verified:"),n&&n.items.forEach(r=>{e.push(`   \u2705 ${r.description||r.name}`)}),e.push(""),e.push(`\u{1F680} ${t.nextSteps.immediate}!`),e}static \u0275fac=function(t){return new(t||i)(V(ue),V(Qe),V(Xe))};static \u0275prov=R({token:i,factory:i.\u0275fac,providedIn:"root"})};var rn=class i{constructor(e,t){this.gameStateService=e;this.turnResolutionService=t}gameMessage=b("Click your deck to begin!");challengeAvailable=b(!1);showChallenge=b(!1);challengeCard=b(null);showChallengeCard=b(!1);battleCards=b([]);opponentBattleCards=b([]);battlePhase=b("setup");canPlayerAct=b(!1);get message(){return this.gameMessage()}get canChallenge(){return this.challengeAvailable()}get showChallengePrompt(){return this.showChallenge()}get currentChallengeCard(){return this.challengeCard()}get showChallengeCardDisplay(){return this.showChallengeCard()}get playerCanAct(){return this.canPlayerAct()}get currentBattleCards(){return this.battleCards()}get currentOpponentBattleCards(){return this.opponentBattleCards()}get currentBattlePhase(){return this.battlePhase()}startNewGame(){this.gameStateService.initializeGame(),this.gameMessage.set("Click your deck to begin!"),this.challengeAvailable.set(!1),this.showChallenge.set(!1),this.challengeCard.set(null),this.showChallengeCard.set(!1),this.battleCards.set([]),this.opponentBattleCards.set([]),this.battlePhase.set("setup"),this.canPlayerAct.set(!0)}playerDrawCard(){if(!this.canPlayerAct()||this.gameStateService.currentPhase!=="normal")return!1;try{let{playerCard:e,opponentCard:t}=this.gameStateService.startTurn();if(!e||!t)return!1;let n=this.turnResolutionService.resolveTurn(e,t);return this.handleTurnResult(n),!0}catch(e){return console.error("Error during turn:",e),!1}}handleChallenge(e){if(this.challengeAvailable()){if(!e){let t=this.gameStateService.currentState.activeTurn;t&&t.playerCard&&(this.gameStateService.addToDiscardPile([t.playerCard]),t.opponentCard&&this.gameStateService.returnCardsToOpponentDeck([t.opponentCard])),this.gameMessage.set("You declined the challenge. Your card is discarded."),this.showChallenge.set(!1),this.challengeAvailable.set(!1),this.canPlayerAct.set(!0);return}try{let t=this.gameStateService.drawPlayerCard();if(!t){this.gameMessage.set("Cannot draw card for challenge!");return}this.challengeCard.set(t),this.showChallenge.set(!1),this.showChallengeCard.set(!0),this.gameMessage.set("Your challenge card is revealed! Proceed with the challenge?"),this.canPlayerAct.set(!1);let n=this.gameStateService.currentState.activeTurn;n&&(n.challengeCard=t,this.gameStateService.setActiveTurn(n))}catch(t){console.error("Error during challenge:",t),this.gameMessage.set("Error during challenge!")}}}confirmChallenge(){if(this.challengeCard())try{let e=this.gameStateService.currentState.activeTurn;if(!e||!e.playerCard||!e.opponentCard){this.gameMessage.set("No active turn for challenge!");return}let t=this.turnResolutionService.resolveChallenge(e.playerCard,e.opponentCard,this.challengeCard());this.challengeCard.set(null),this.showChallengeCard.set(!1),this.challengeAvailable.set(!1),this.handleTurnResult(t)}catch(e){console.error("Error during challenge resolution:",e),this.gameMessage.set("Error during challenge resolution!")}}selectBattleCard(e){if(this.battlePhase()==="selection")try{let t=this.gameStateService.currentState.activeTurn;if(!t||!t.playerCard||!t.opponentCard)return;let n=this.opponentBattleCards()[Math.floor(Math.random()*this.opponentBattleCards().length)],r=this.turnResolutionService.resolveBattle(t.playerCard,t.opponentCard,this.battleCards(),this.opponentBattleCards(),e,n);this.handleTurnResult(r)}catch(t){console.error("Error during battle:",t),this.gameMessage.set("Error during battle!")}}handleTurnResult(e){if(this.gameMessage.set(e.message),e.opponentChallenge){this.handleOpponentChallenge();return}switch(e.nextPhase){case"normal":this.canPlayerAct.set(!0),this.challengeAvailable.set(!1),this.showChallenge.set(!1),this.battleCards.set([]),this.opponentBattleCards.set([]),this.battlePhase.set("setup");break;case"challenge":this.canPlayerAct.set(!1),this.challengeAvailable.set(e.canChallenge),this.showChallenge.set(e.canChallenge);break;case"battle":this.setupBattle();break;case"game_over":this.canPlayerAct.set(!1),this.challengeAvailable.set(!1),this.showChallenge.set(!1);break}}setupBattle(){this.canPlayerAct.set(!1),this.battlePhase.set("setup");let e=[],t=[];for(let n=0;n<3;n++){let r=this.gameStateService.drawPlayerCard(),a=this.gameStateService.drawOpponentCard();r&&e.push(r),a&&t.push(a)}this.battleCards.set(e),this.opponentBattleCards.set(t),this.battlePhase.set("selection"),this.gameMessage.set("Battle! Select one of the opponent's face-down cards.")}getGameStats(){return this.gameStateService.currentStats}getGameState(){return this.gameStateService.currentState}handleOpponentChallenge(){try{let e=this.gameStateService.currentState.activeTurn;if(!e||!e.playerCard||!e.opponentCard){this.gameMessage.set("Error: No active turn for opponent challenge!");return}let t=this.gameStateService.drawOpponentCard();if(!t){this.gameMessage.set("Opponent cannot draw card for challenge!"),this.gameStateService.returnCardsToPlayerDeck([e.playerCard]),this.gameStateService.addToDiscardPile([e.opponentCard]),this.gameMessage.set("Opponent cannot challenge. You win the turn!"),this.canPlayerAct.set(!0);return}setTimeout(()=>{let n=this.turnResolutionService.resolveOpponentChallenge(e.playerCard,e.opponentCard,t);this.handleTurnResult(n)},1500),this.canPlayerAct.set(!1),this.gameMessage.set("Opponent is challenging your win...")}catch(e){console.error("Error during opponent challenge:",e),this.gameMessage.set("Error during opponent challenge!"),this.canPlayerAct.set(!0)}}static \u0275fac=function(t){return new(t||i)(V(ue),V(Qe))};static \u0275prov=R({token:i,factory:i.\u0275fac,providedIn:"root"})};function fo(i,e){if(i&1&&L(0,"app-card",14),i&2){let t=P(3);I("card",t.playerActiveCard())("glow","red")("faceDown",!1)}}function yo(i,e){if(i&1&&L(0,"app-card",14),i&2){let t=P(3);I("card",t.opponentActiveCard())("glow","green")("faceDown",!1)}}function Co(i,e){if(i&1){let t=ve();p(0,"div",3)(1,"mat-card",10)(2,"mat-card-header")(3,"mat-card-title"),m(4,"Challenge Available!"),d(),p(5,"mat-card-subtitle"),m(6,"Do you want to challenge the result?"),d()(),p(7,"mat-card-content")(8,"div",11)(9,"h4"),m(10,"This Turn's Cards:"),d(),p(11,"div",12)(12,"div",13)(13,"span"),m(14,"Your Card (Lost):"),d(),O(15,fo,1,3,"app-card",14),d(),p(16,"div",15)(17,"span"),m(18,"Opponent's Card (Won):"),d(),O(19,yo,1,3,"app-card",14),d()()(),p(20,"p"),m(21,"You lost this round, but you can draw an additional card to challenge the result."),d(),p(22,"p")(23,"strong"),m(24,"Risk:"),d(),m(25," If you lose the challenge, you lose both cards!"),d(),p(26,"p")(27,"strong"),m(28,"Challenge Rule:"),d(),m(29," Your new card will be compared against the opponent's winning card above."),d()(),p(30,"mat-card-actions")(31,"button",6),G("click",function(){ee(t);let r=P(2);return te(r.acceptChallenge())}),m(32," Accept Challenge "),d(),p(33,"button",9),G("click",function(){ee(t);let r=P(2);return te(r.declineChallenge())}),m(34," Decline "),d()()()()}if(i&2){let t=P(2);g(15),D(t.playerActiveCard()?15:-1),g(4),D(t.opponentActiveCard()?19:-1)}}function _o(i,e){if(i&1&&L(0,"app-card",14),i&2){let t=P(3);I("card",t.playerActiveCard())("glow","red")("faceDown",!1)}}function vo(i,e){if(i&1&&L(0,"app-card",14),i&2){let t=P(3);I("card",t.opponentActiveCard())("glow","green")("faceDown",!1)}}function bo(i,e){if(i&1&&L(0,"app-card",17),i&2){let t=P(3);I("card",t.challengeCard())("glow","blue")("animationState","flip")}}function So(i,e){if(i&1){let t=ve();p(0,"div",3)(1,"mat-card",10)(2,"mat-card-header")(3,"mat-card-title"),m(4,"Your Challenge Card"),d(),p(5,"mat-card-subtitle"),m(6,"This is the card you drew for your challenge"),d()(),p(7,"mat-card-content")(8,"div",11)(9,"h4"),m(10,"Original Turn:"),d(),p(11,"div",12)(12,"div",13)(13,"span"),m(14,"Your Original Card:"),d(),O(15,_o,1,3,"app-card",14),d(),p(16,"div",15)(17,"span"),m(18,"Opponent's Card:"),d(),O(19,vo,1,3,"app-card",14),d()()(),p(20,"div",16)(21,"h4"),m(22,"Your Challenge Card:"),d(),O(23,bo,1,3,"app-card",17),d(),p(24,"p")(25,"strong"),m(26,"Challenge Comparison:"),d(),m(27," Your challenge card vs. opponent's winning card"),d(),p(28,"p"),m(29,"If your challenge card wins, you keep both of your cards and the opponent's card is discarded."),d(),p(30,"p"),m(31,"If your challenge card loses or ties, you lose both cards and the opponent keeps their card."),d()(),p(32,"mat-card-actions")(33,"button",6),G("click",function(){ee(t);let r=P(2);return te(r.confirmChallenge())}),m(34," Continue with Challenge "),d()()()()}if(i&2){let t=P(2);g(15),D(t.playerActiveCard()?15:-1),g(4),D(t.opponentActiveCard()?19:-1),g(4),D(t.challengeCard()?23:-1)}}function wo(i,e){if(i&1){let t=ve();p(0,"app-card",24),G("cardClicked",function(){let r=ee(t).$implicit,a=P(3);return te(a.onBattleCardSelect(r))}),d()}i&2&&I("card",null)("faceDown",!0)("glow","blue")("clickable",!0)}function Po(i,e){i&1&&L(0,"app-card",23),i&2&&I("card",null)("faceDown",!0)}function Eo(i,e){if(i&1&&(p(0,"div",4)(1,"mat-card",18)(2,"mat-card-header")(3,"mat-card-title"),m(4,"Battle Time!"),d(),p(5,"mat-card-subtitle"),m(6,"Select one of the opponent's face-down cards"),d()(),p(7,"mat-card-content")(8,"p"),m(9,"Cards are tied! Both players have placed 3 cards face-down for battle."),d(),p(10,"div",19)(11,"h4"),m(12,"Opponent's Cards (Select One):"),d(),p(13,"div",20),ze(14,wo,1,4,"app-card",21,Be),d(),p(16,"h4"),m(17,"Your Cards in Battle:"),d(),p(18,"div",22),ze(19,Po,1,2,"app-card",23,Be),d()()()()()),i&2){let t=P(2);g(14),Ve(t.opponentBattleCards()),g(5),Ve(t.battleCards())}}function Mo(i,e){if(i&1&&(p(0,"span",8),m(1),d()),i&2){let t=P(2);g(),be("(",t.gameStateService.discardedCardCount(),")")}}function xo(i,e){if(i&1){let t=ve();p(0,"app-game-board",2),G("playerDeckClicked",function(){ee(t);let r=P();return te(r.onPlayerDeckClick())}),d(),O(1,Co,35,2,"div",3),O(2,So,35,3,"div",3),O(3,Eo,21,0,"div",4),p(4,"div",5)(5,"button",6),G("click",function(){ee(t);let r=P();return te(r.startNewGame())}),m(6," New Game "),d(),p(7,"button",7),G("click",function(){ee(t);let r=P();return te(r.openDiscardPileViewer())}),m(8," Discard Pile "),O(9,Mo,2,1,"span",8),d(),p(10,"button",9),G("click",function(){ee(t);let r=P();return te(r.toggleDemo())}),m(11," Show Old Demo "),d()()}if(i&2){let t=P();I("playerCardCount",t.playerCardCount())("opponentCardCount",t.opponentCardCount())("playerActiveCard",t.playerActiveCard())("opponentActiveCard",t.opponentActiveCard())("playerCardGlow",t.playerCardGlow())("opponentCardGlow",t.opponentCardGlow())("playerCardAnimation",t.playerCardAnimation())("opponentCardAnimation",t.opponentCardAnimation())("playerHealthDamageAnimation",t.playerHealthDamageAnimation())("opponentHealthDamageAnimation",t.opponentHealthDamageAnimation())("gameMessage",t.gameMessage())("challengeAvailable",t.challengeAvailable())("canPlayerAct",t.canPlayerAct())("turnNumber",t.gameStateService.gameStats().turnNumber),g(),D(t.showChallengePrompt()?1:-1),g(),D(t.showChallengeCardDisplay()?2:-1),g(),D(t.showBattleUI()?3:-1),g(6),D(t.gameStateService.discardedCardCount()>0?9:-1)}}function To(i,e){if(i&1&&(p(0,"div",26),m(1),d()),i&2){let t=e.$implicit;g(),j(t)}}function Oo(i,e){if(i&1){let t=ve();p(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title"),m(3,"War of Attrition - Milestone 3 Complete! \u{1F389}"),d(),p(4,"mat-card-subtitle"),m(5,"Basic UI Components Implementation"),d()(),p(6,"mat-card-content")(7,"p")(8,"strong"),m(9,"Milestone 3 has been successfully completed!"),d(),m(10," Core UI components are implemented and functional."),d(),p(11,"h3"),m(12,"New UI Components:"),d(),p(13,"ul")(14,"li")(15,"strong"),m(16,"Game Board Layout:"),d(),m(17," Head-to-head player layout with solitaire green background"),d(),p(18,"li")(19,"strong"),m(20,"Card Component:"),d(),m(21," Visual card representation with red/black suits and glow effects"),d(),p(22,"li")(23,"strong"),m(24,"Health Bar Component:"),d(),m(25," Color-coded health bars (Green\u2192Yellow\u2192Orange\u2192Red)"),d(),p(26,"li")(27,"strong"),m(28,"Action Indicators:"),d(),m(29," Blue glow effects for player actions"),d()(),p(30,"h3"),m(31,"Previous - Game Engine Demo:"),d(),p(32,"div",25),ze(33,To,2,1,"div",26,Be),d()(),p(35,"mat-card-actions")(36,"button",6),G("click",function(){ee(t);let r=P();return te(r.toggleDemo())}),m(37," Show New Game Board "),d(),p(38,"button",6),G("click",function(){ee(t);let r=P();return te(r.runDemo())}),m(39,"Run Demo Again"),d(),p(40,"button",27),m(41,"Settings"),d()()()}if(i&2){let t=P();g(33),Ve(t.demoLog())}}var an=class i{constructor(e,t,n,r,a,o){this.gameDemoService=e;this.gameController=t;this.progressService=n;this.gameStateService=r;this.settingsService=a;this.dialog=o;this.progressData=this.progressService.getProgressData(),this.currentMilestone=this.progressService.getCurrentMilestone(),this.completedMilestone=this.progressService.getCompletedMilestone(3),this.gameController.startNewGame(),this.updateGameState()}demoLog=b([]);showOldDemo=b(!1);showGameBoard=b(!0);gameStartTime=null;gameStats=b(this.getInitialGameStats());gameState=b(this.getInitialGameState());gameMessage=b("Click your deck to begin!");challengeAvailable=b(!1);canPlayerAct=b(!0);showChallengePrompt=b(!1);challengeCard=b(null);showChallengeCardDisplay=b(!1);playerCardCount=N(()=>this.gameStateService.playerCardCount());opponentCardCount=N(()=>this.gameStateService.opponentCardCount());playerActiveCard=b(null);opponentActiveCard=b(null);playerCardGlow=b(null);opponentCardGlow=b(null);playerCardAnimation=b(null);opponentCardAnimation=b(null);playerHealthDamageAnimation=b(!1);opponentHealthDamageAnimation=b(!1);battleCards=b([]);opponentBattleCards=b([]);battlePhase=b("setup");showBattleUI=b(!1);progressData;currentMilestone;completedMilestone;getInitialGameStats(){return{turnNumber:0,playerCardCount:26,opponentCardCount:26,discardedCardCount:0}}getInitialGameState(){return{phase:"setup",stats:this.getInitialGameStats(),activeTurn:null,winner:null,isPlayerTurn:!0,canChallenge:!1,lastResult:null}}ngOnInit(){this.showOldDemo()&&this.runDemo()}runDemo(){let e=this.gameDemoService.runGameDemo();this.demoLog.set(e)}toggleDemo(){this.showOldDemo.update(e=>!e),this.showGameBoard.update(e=>!e)}onPlayerDeckClick(){if(!this.gameController.playerCanAct)return;this.gameController.playerDrawCard()&&this.updateGameState()}acceptChallenge(){this.gameController.handleChallenge(!0),this.updateGameState()}declineChallenge(){this.gameController.handleChallenge(!1),this.updateGameState()}confirmChallenge(){this.gameController.confirmChallenge(),this.updateGameState()}startNewGame(){this.gameController.startNewGame(),this.gameStartTime=Date.now(),this.settingsService.recordGameStart(),this.updateGameState()}onBattleCardSelect(e){this.gameController.selectBattleCard(e),this.updateGameState()}simulateChallenge(){this.challengeAvailable.set(!0),this.gameMessage.set("You lost this round. Challenge available!"),this.playerCardGlow.set("red"),this.opponentCardGlow.set("green")}simulateBattle(){this.gameMessage.set("Cards tie! Battle initiated."),this.playerCardGlow.set("blue"),this.opponentCardGlow.set("blue"),this.challengeAvailable.set(!1)}updateGameState(){let e=this.gameController.getGameStats(),t=this.gameController.getGameState(),n=this.playerCardCount(),r=this.opponentCardCount();if(this.gameStats.set(e),this.gameState.set(t),this.gameMessage.set(this.gameController.message),this.challengeAvailable.set(this.gameController.canChallenge),this.canPlayerAct.set(this.gameController.playerCanAct),this.showChallengePrompt.set(this.gameController.showChallengePrompt),this.challengeCard.set(this.gameController.currentChallengeCard),this.showChallengeCardDisplay.set(this.gameController.showChallengeCardDisplay),this.battleCards.set(this.gameController.currentBattleCards),this.opponentBattleCards.set(this.gameController.currentOpponentBattleCards),this.battlePhase.set(this.gameController.currentBattlePhase),this.showBattleUI.set(this.battlePhase()==="selection"),e.playerCardCount<n&&this.triggerPlayerHealthDamageAnimation(),e.opponentCardCount<r&&this.triggerOpponentHealthDamageAnimation(),t.activeTurn?(this.playerActiveCard()!==t.activeTurn.playerCard&&(this.playerActiveCard.set(t.activeTurn.playerCard),this.triggerCardSlideAnimation("player")),this.opponentActiveCard()!==t.activeTurn.opponentCard&&(this.opponentActiveCard.set(t.activeTurn.opponentCard),this.triggerCardSlideAnimation("opponent")),t.lastResult?.includes("win")?(this.playerCardGlow.set("green"),this.opponentCardGlow.set("red"),this.triggerClashAnimations("player-win")):t.lastResult?.includes("lose")?(this.playerCardGlow.set("red"),this.opponentCardGlow.set("green"),this.triggerClashAnimations("opponent-win")):t.lastResult?.includes("tie")||t.lastResult?.includes("battle")?(this.playerCardGlow.set("blue"),this.opponentCardGlow.set("blue")):(this.playerCardGlow.set(null),this.opponentCardGlow.set(null))):this.showOldDemo()||(this.playerActiveCard.set(null),this.opponentActiveCard.set(null),this.playerCardGlow.set(null),this.opponentCardGlow.set(null),this.resetAnimations()),t.winner&&this.gameStartTime){let a=Date.now()-this.gameStartTime,o=t.winner==="player";this.settingsService.recordGameEnd(o,e.turnNumber,a),this.gameStartTime=null}}triggerCardSlideAnimation(e){e==="player"?(this.playerCardAnimation.set("slide-in"),setTimeout(()=>this.playerCardAnimation.set(null),800)):(this.opponentCardAnimation.set("slide-in"),setTimeout(()=>this.opponentCardAnimation.set(null),800))}triggerClashAnimations(e){e==="player-win"?(this.playerCardAnimation.set("clash-win"),this.opponentCardAnimation.set("clash-lose")):(this.playerCardAnimation.set("clash-lose"),this.opponentCardAnimation.set("clash-win")),setTimeout(()=>{this.playerCardAnimation.set(null),this.opponentCardAnimation.set(null)},1e3)}triggerPlayerHealthDamageAnimation(){this.playerHealthDamageAnimation.set(!0),setTimeout(()=>this.playerHealthDamageAnimation.set(!1),800)}triggerOpponentHealthDamageAnimation(){this.opponentHealthDamageAnimation.set(!0),setTimeout(()=>this.opponentHealthDamageAnimation.set(!1),800)}openDiscardPileViewer(){let e=this.gameStateService.discardedCards();this.dialog.open(Xt,{data:{discardedCards:e},width:"90%",maxWidth:"800px",maxHeight:"90vh",panelClass:"discard-pile-dialog"})}resetAnimations(){this.playerCardAnimation.set(null),this.opponentCardAnimation.set(null),this.playerHealthDamageAnimation.set(!1),this.opponentHealthDamageAnimation.set(!1)}static \u0275fac=function(t){return new(t||i)(me(nn),me(rn),me(Xe),me(ue),me(Ke),me(Di))};static \u0275cmp=H({type:i,selectors:[["app-game"]],decls:3,vars:1,consts:[[1,"game-container"],[1,"welcome-card"],[3,"playerDeckClicked","playerCardCount","opponentCardCount","playerActiveCard","opponentActiveCard","playerCardGlow","opponentCardGlow","playerCardAnimation","opponentCardAnimation","playerHealthDamageAnimation","opponentHealthDamageAnimation","gameMessage","challengeAvailable","canPlayerAct","turnNumber"],[1,"challenge-overlay"],[1,"battle-overlay"],[1,"game-controls"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"],[1,"discard-count"],["mat-button","",3,"click"],[1,"challenge-card"],[1,"turn-context"],[1,"cards-display"],[1,"player-card-info"],[3,"card","glow","faceDown"],[1,"opponent-card-info"],[1,"challenge-card-display"],[3,"card","glow","animationState"],[1,"battle-card"],[1,"battle-cards"],[1,"opponent-battle-cards"],[3,"card","faceDown","glow","clickable"],[1,"player-battle-cards"],[3,"card","faceDown"],[3,"cardClicked","card","faceDown","glow","clickable"],[1,"demo-output"],[1,"demo-line"],["mat-button","","routerLink","/settings"]],template:function(t,n){t&1&&(p(0,"div",0),O(1,xo,12,18)(2,Oo,42,0,"mat-card",1),d()),t&2&&(g(),D(n.showGameBoard()?1:2))},dependencies:[xi,bi,Ei,wi,Mi,Pi,Si,je,Pt,St,$t,Ee],styles:[".game-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:60vh;padding:20px;position:relative}@media (max-width: 959px){.game-container[_ngcontent-%COMP%]{padding:16px;min-height:50vh}}@media (max-width: 599px){.game-container[_ngcontent-%COMP%]{padding:8px;min-height:auto;align-items:flex-start}}.game-container[_ngcontent-%COMP%]:has(app-game-board){min-height:calc(100vh - 64px);padding:0;align-items:stretch}@media (max-width: 599px){.game-container[_ngcontent-%COMP%]:has(app-game-board){min-height:calc(100dvh - 56px)}}.game-controls[_ngcontent-%COMP%]{position:fixed;top:80px;right:20px;display:flex;flex-direction:column;gap:8px;background:#000c;padding:8px;border-radius:8px;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1000;max-width:180px}@media (max-width: 959px){.game-controls[_ngcontent-%COMP%]{top:72px;right:16px;max-width:160px}}@media (max-width: 599px){.game-controls[_ngcontent-%COMP%]{top:64px;right:auto;left:8px;flex-direction:row;gap:6px;padding:6px;max-width:calc(100vw - 16px);flex-wrap:wrap;justify-content:flex-start}}@media (max-width: 359px){.game-controls[_ngcontent-%COMP%]{bottom:12px;gap:6px;padding:8px 10px}}.game-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px;min-height:36px}.game-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .discard-count[_ngcontent-%COMP%]{margin-left:4px;font-size:.9em;opacity:.8;background:#fff3;padding:2px 6px;border-radius:12px;min-width:20px;display:inline-block;text-align:center}@media (max-width: 599px){.game-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:11px;min-height:32px;padding:0 12px}}@media (max-width: 359px){.game-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:10px;min-height:28px;padding:0 8px}}.challenge-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:2000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.battle-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:2000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.challenge-card[_ngcontent-%COMP%]{max-width:600px;width:90%;animation:_ngcontent-%COMP%_challengePopIn .3s ease-out}@keyframes _ngcontent-%COMP%_challengePopIn{0%{opacity:0;transform:scale(.8) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}.challenge-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ff6b35,#f7931e);color:#fff;margin:-16px -16px 16px;padding:16px;border-radius:4px 4px 0 0}.challenge-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:16px}.challenge-card[_ngcontent-%COMP%]   .turn-context[_ngcontent-%COMP%]{margin-bottom:20px;padding:12px;background:#0000000d;border-radius:8px}.challenge-card[_ngcontent-%COMP%]   .turn-context[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:#333;font-size:1.1em;font-weight:600}.challenge-card[_ngcontent-%COMP%]   .cards-display[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;align-items:center;flex-wrap:wrap}.challenge-card[_ngcontent-%COMP%]   .cards-display[_ngcontent-%COMP%]   .player-card-info[_ngcontent-%COMP%], .challenge-card[_ngcontent-%COMP%]   .cards-display[_ngcontent-%COMP%]   .opponent-card-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px}.challenge-card[_ngcontent-%COMP%]   .cards-display[_ngcontent-%COMP%]   .player-card-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .challenge-card[_ngcontent-%COMP%]   .cards-display[_ngcontent-%COMP%]   .opponent-card-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9em;font-weight:500;color:#666;text-align:center}.challenge-card[_ngcontent-%COMP%]   .cards-display[_ngcontent-%COMP%]   .player-card-info[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%], .challenge-card[_ngcontent-%COMP%]   .cards-display[_ngcontent-%COMP%]   .opponent-card-info[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{transform:scale(.8)}.challenge-card[_ngcontent-%COMP%]   .challenge-card-display[_ngcontent-%COMP%]{margin:20px 0;padding:12px;background:#007bff1a;border-radius:8px;text-align:center}.challenge-card[_ngcontent-%COMP%]   .challenge-card-display[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:#007bff;font-size:1.1em;font-weight:600}.challenge-card[_ngcontent-%COMP%]   .challenge-card-display[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{transform:scale(.9)}.battle-card[_ngcontent-%COMP%]{max-width:600px;width:95%;animation:_ngcontent-%COMP%_battlePopIn .4s ease-out}@keyframes _ngcontent-%COMP%_battlePopIn{0%{opacity:0;transform:scale(.9) translateY(-30px)}to{opacity:1;transform:scale(1) translateY(0)}}.battle-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{background:linear-gradient(45deg,#d32f2f,#f44336);color:#fff;margin:-16px -16px 16px;padding:16px;border-radius:4px 4px 0 0}.battle-card[_ngcontent-%COMP%]   .battle-cards[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:16px 0 8px;font-weight:500}.battle-card[_ngcontent-%COMP%]   .battle-cards[_ngcontent-%COMP%]   .opponent-battle-cards[_ngcontent-%COMP%], .battle-card[_ngcontent-%COMP%]   .battle-cards[_ngcontent-%COMP%]   .player-battle-cards[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:center;margin-bottom:16px;flex-wrap:wrap}.battle-card[_ngcontent-%COMP%]   .battle-cards[_ngcontent-%COMP%]   .opponent-battle-cards[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s ease}.battle-card[_ngcontent-%COMP%]   .battle-cards[_ngcontent-%COMP%]   .opponent-battle-cards[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.welcome-card[_ngcontent-%COMP%]{max-width:800px;width:100%;transition:background-color .3s ease-in-out,color .3s ease-in-out,box-shadow .3s ease-in-out}@media (max-width: 659px){.welcome-card[_ngcontent-%COMP%]{max-width:none;margin:0}}@media (max-width: 359px){.welcome-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{padding:12px!important}}.welcome-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-start;flex-wrap:wrap}@media (max-width: 599px){.welcome-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{gap:8px}}@media (max-width: 359px){.welcome-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:8px}}.welcome-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition:background-color .3s ease-in-out,color .3s ease-in-out;min-height:44px}@media (max-width: 599px){.welcome-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 359px){.welcome-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.welcome-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:16px 0;padding-left:24px}@media (max-width: 599px){.welcome-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:20px;margin:12px 0}}@media (max-width: 359px){.welcome-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:16px;margin:8px 0}}.welcome-card[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}@media (max-width: 599px){.welcome-card[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px;font-size:14px}}@media (max-width: 359px){.welcome-card[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:4px;font-size:13px}}.demo-output[_ngcontent-%COMP%]{background:#f5f5f5;border:1px solid #ddd;border-radius:4px;padding:16px;margin:16px 0;font-family:Courier New,monospace;font-size:14px;max-height:400px;overflow-y:auto;line-height:1.4;color:#333}.demo-line[_ngcontent-%COMP%]{margin-bottom:4px;white-space:pre-wrap}[_nghost-%COMP%]     .dark-theme .demo-output, [_nghost-%COMP%]     body.dark-theme .demo-output, .dark-theme[_ngcontent-%COMP%]   .demo-output[_ngcontent-%COMP%]{background:#1e1e1e;border-color:#555;color:#e0e0e0}[_nghost-%COMP%]     .dark-theme .demo-line, [_nghost-%COMP%]     body.dark-theme .demo-line, .dark-theme[_ngcontent-%COMP%]   .demo-line[_ngcontent-%COMP%]{color:#e0e0e0}[_nghost-%COMP%]     .discard-pile-dialog .mat-mdc-dialog-container{padding:0;overflow:hidden}"]})};var Ir=[{path:"",component:an},{path:"settings",loadComponent:()=>import("./chunk-CUIO6U4L.js").then(i=>i.Settings)},{path:"**",redirectTo:""}];var Un="Service workers are disabled or not supported by this browser",Je=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new gt(n=>n.error(new w(5601,!1)));else{let n=null,r=new ft;this.worker=new gt(c=>(n!==null&&c.next(n),r.subscribe(u=>c.next(u))));let a=()=>{let{controller:c}=e;c!==null&&(n=c,r.next(n))};e.addEventListener("controllerchange",a),a(),this.registration=this.worker.pipe(Ze(()=>e.getRegistration().then(c=>{if(!c)throw new w(5601,!1);return c})));let o=new ft;this.events=o.asObservable();let s=c=>{let{data:u}=c;u?.type&&o.next(u)};e.addEventListener("message",s),t?.get(mn,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",a),e.removeEventListener("message",s)})}}postMessage(e,t){return new Promise(n=>{this.worker.pipe(Fe(1)).subscribe(r=>{r.postMessage(Le({action:e},t)),n()})})}postMessageWithOperation(e,t,n){let r=this.waitForOperationCompleted(n),a=this.postMessage(e,t);return Promise.all([a,r]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=n=>n.type===e:t=n=>e.includes(n.type),this.events.pipe(cn(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Fe(1))}waitForOperationCompleted(e){return new Promise((t,n)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(cn(r=>r.nonce===e),Fe(1),Oe(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error)})).subscribe({next:t,error:n})})}get isEnabled(){return!!this.serviceWorker}},Do=(()=>{class i{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new ft;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=_e,this.notificationClicks=_e,this.notificationCloses=_e,this.pushSubscriptionChanges=_e,this.subscription=_e;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Oe(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Oe(r=>r.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(Oe(r=>r.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(Oe(r=>r.data)),this.pushManager=this.sw.registration.pipe(Oe(r=>r.pushManager));let n=this.pushManager.pipe(Ze(r=>r.getSubscription()));this.subscription=new gt(r=>{let a=n.subscribe(r),o=this.subscriptionChanges.subscribe(r);return()=>{a.unsubscribe(),o.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Un));let n={userVisibleOnly:!0},r=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(r.length));for(let o=0;o<r.length;o++)a[o]=r.charCodeAt(o);return n.applicationServerKey=a,new Promise((o,s)=>{this.pushManager.pipe(Ze(l=>l.subscribe(n)),Fe(1)).subscribe({next:l=>{this.subscriptionChanges.next(l),o(l)},error:s})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Un));let t=n=>{if(n===null)throw new w(5602,!1);return n.unsubscribe().then(r=>{if(!r)throw new w(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((n,r)=>{this.subscription.pipe(Fe(1),Ze(t)).subscribe({next:n,error:r})})}decodeBase64(t){return atob(t)}static \u0275fac=function(n){return new(n||i)(V(Je))};static \u0275prov=R({token:i,factory:i.\u0275fac})}return i})(),ko=(()=>{class i{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=_e,this.unrecoverable=_e;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Un));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new w(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(n){return new(n||i)(V(Je))};static \u0275prov=R({token:i,factory:i.\u0275fac})}return i})();var Fr=new Xn("");function Ao(){let i=Z(ut);if(!("serviceWorker"in navigator&&i.enabled!==!1))return;let e=Z(Fr),t=Z(vt),n=Z(mn);t.runOutsideAngular(()=>{let r=navigator.serviceWorker,a=()=>r.controller?.postMessage({action:"INITIALIZE"});r.addEventListener("controllerchange",a),n.onDestroy(()=>{r.removeEventListener("controllerchange",a)})}),t.runOutsideAngular(()=>{let r,{registrationStrategy:a}=i;if(typeof a=="function")r=new Promise(o=>a().subscribe(()=>o()));else{let[o,...s]=(a||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":r=Promise.resolve();break;case"registerWithDelay":r=Lr(+s[0]||0);break;case"registerWhenStable":r=Promise.race([n.whenStable(),Lr(+s[0])]);break;default:throw new w(5600,!1)}}r.then(()=>{n.destroyed||navigator.serviceWorker.register(e,{scope:i.scope}).catch(o=>console.error(Qn(5604,!1)))})})}function Lr(i){return new Promise(e=>setTimeout(e,i))}function No(i,e){return new Je(i.enabled!==!1?navigator.serviceWorker:void 0,e)}var ut=class{enabled;scope;registrationStrategy};function Gr(i,e={}){return Jn([Do,ko,{provide:Fr,useValue:i},{provide:ut,useValue:e},{provide:Je,useFactory:No,deps:[ut,Zn]},ai(Ao)])}var Br={providers:[ei(),ui({eventCoalescing:!0}),_i(Ir),Or(),Gr("ngsw-worker.js",{enabled:!hi(),registrationStrategy:"registerWhenStable:30000"})]};var Ro=()=>({exact:!0}),on=class i{title=b("\u2694\uFE0F Attrition");isDarkMode=b(!1);THEME_STORAGE_KEY="war-of-attrition-theme";ngOnInit(){this.loadThemePreference()}loadThemePreference(){let e=localStorage.getItem(this.THEME_STORAGE_KEY),t=e?e==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches;this.isDarkMode.set(t),this.applyTheme(t)}applyTheme(e){e?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme")}saveThemePreference(e){localStorage.setItem(this.THEME_STORAGE_KEY,e?"dark":"light")}toggleTheme(){this.isDarkMode.update(e=>{let t=!e;return this.applyTheme(t),this.saveThemePreference(t),t})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=H({type:i,selectors:[["app-root"]],decls:16,vars:7,consts:[["color","primary",1,"app-toolbar"],[1,"toolbar-spacer"],[1,"nav-links"],["mat-icon-button","","routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],["mat-icon-button","","routerLink","/settings","routerLinkActive","active"],["mat-icon-button","",3,"click"],[1,"app-content"]],template:function(t,n){t&1&&(p(0,"mat-toolbar",0)(1,"span"),m(2),d(),L(3,"span",1),p(4,"nav",2)(5,"button",3)(6,"mat-icon"),m(7,"casino"),d()(),p(8,"button",4)(9,"mat-icon"),m(10,"settings"),d()()(),p(11,"button",5),G("click",function(){return n.toggleTheme()}),p(12,"mat-icon"),m(13),d()()(),p(14,"main",6),L(15,"router-outlet"),d()),t&2&&(g(2),j(n.title()),g(3),I("routerLinkActiveOptions",pi(6,Ro)),Ge("aria-label","Game"),g(3),Ge("aria-label","Settings"),g(3),Ge("aria-label","Toggle "+(n.isDarkMode()?"light":"dark")+" theme"),g(2),j(n.isDarkMode()?"lightbulb":"lightbulb_outline"))},dependencies:[yi,St,Ci,Qt,Ht,je,wt,Mt,Et],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100vh;overflow-x:hidden}.app-toolbar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;transition:background-color .3s ease-in-out,color .3s ease-in-out;min-height:64px}@media (max-width: 599px){.app-toolbar[_ngcontent-%COMP%]{min-height:56px;padding:0 8px}}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.nav-links[_ngcontent-%COMP%]{display:flex;gap:8px;margin-right:16px}@media (max-width: 599px){.nav-links[_ngcontent-%COMP%]{gap:4px;margin-right:8px}}.nav-links[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition:background-color .3s ease-in-out,color .3s ease-in-out;min-height:44px}@media (max-width: 599px){.nav-links[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 12px;font-size:14px}}.nav-links[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ffffff1a}.app-content[_ngcontent-%COMP%]{flex:1;padding:24px;overflow-y:auto;overflow-x:hidden;transition:background-color .3s ease-in-out,color .3s ease-in-out}@media (max-width: 959px){.app-content[_ngcontent-%COMP%]{padding:16px}}@media (max-width: 599px){.app-content[_ngcontent-%COMP%]{padding:12px 8px}}@media (max-width: 359px){.app-content[_ngcontent-%COMP%]{padding:8px 4px}}.app-content[_ngcontent-%COMP%]:has(.game-container){padding:8px}@media (max-width: 599px){.app-content[_ngcontent-%COMP%]:has(.game-container){padding:4px}}.dark-theme[_nghost-%COMP%]   .app-content[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .app-content[_ngcontent-%COMP%]{background-color:var(--mat-sys-surface-container)}"]})};fi(on,Br).catch(i=>console.error(i));
