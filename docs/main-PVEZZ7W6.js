import{$ as H,$b as je,B as I,Ba as L,C as ht,Ca as ai,D as Qn,Da as T,E as V,Ea as si,F as ae,Fa as dn,G as Xn,Ga as oi,H as Z,I as ee,Ia as li,Ja as ci,K as Jn,L as gt,Lb as pn,M as Zn,Mb as vi,Nb as bi,O as b,Oa as mn,Ob as Si,Pa as he,Pb as wi,Qb as Ei,R as ei,Ra as et,Rb as Pi,Sa as p,Sb as Mi,T as ln,Ta as B,U as f,Ua as ve,Va as di,W as ti,Y as me,Ya as mi,Yb as vt,_ as ni,_a as pi,_b as bt,a as Le,aa as ft,ab as N,ac as St,ba as ii,c as Yn,db as Ct,e as pt,eb as x,f as ut,ga as yt,hb as ui,j as Te,ja as ri,ka as cn,la as Ge,ma as D,na as O,o as Ce,oa as Be,ob as be,p as on,pb as hi,qa as ze,qb as gi,r as Fe,ra as Ve,rb as fi,rc as Ti,sa as K,sb as _t,sc as xi,ta as m,tb as yi,tc as Di,ua as d,ub as Ci,va as U,vb as _i,w as Je,wa as ne,xa as ie,xc as Oi,y as w,ya as Ze,yc as wt,z as Hn,za as _e,zc as Et}from"./chunk-BPNRKIRI.js";var E=function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i}(E||{}),se="*";function Ai(i,e=null){return{type:E.Sequence,steps:i,options:e}}function un(i){return{type:E.Style,styles:i,offset:null}}var ge=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},Ke=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,n=0,r=0,a=this.players.length;a==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==a&&this._onFinish()}),s.onDestroy(()=>{++n==a&&this._onDestroy()}),s.onStart(()=>{++r==a&&this._onStart()})}),this.totalTime=this.players.reduce((s,o)=>Math.max(s,o.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(n=>{let r=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(r)})}getPosition(){let e=this.players.reduce((t,n)=>t===null||n.totalTime>t.totalTime?n:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},tt="!";function ki(i){return new w(3e3,!1)}function zr(){return new w(3100,!1)}function Vr(){return new w(3101,!1)}function jr(i){return new w(3001,!1)}function Kr(i){return new w(3003,!1)}function Ur(i){return new w(3004,!1)}function Ri(i,e){return new w(3005,!1)}function Ii(){return new w(3006,!1)}function Li(){return new w(3007,!1)}function Fi(i,e){return new w(3008,!1)}function Gi(i){return new w(3002,!1)}function Bi(i,e,t,n,r){return new w(3010,!1)}function zi(){return new w(3011,!1)}function Vi(){return new w(3012,!1)}function ji(){return new w(3200,!1)}function Ki(){return new w(3202,!1)}function Ui(){return new w(3013,!1)}function qi(i){return new w(3014,!1)}function Wi(i){return new w(3015,!1)}function $i(i){return new w(3016,!1)}function Yi(i,e){return new w(3404,!1)}function qr(i){return new w(3502,!1)}function Hi(i){return new w(3503,!1)}function Qi(){return new w(3300,!1)}function Xi(i){return new w(3504,!1)}function Ji(i){return new w(3301,!1)}function Zi(i,e){return new w(3302,!1)}function er(i){return new w(3303,!1)}function tr(i,e){return new w(3400,!1)}function nr(i){return new w(3401,!1)}function ir(i){return new w(3402,!1)}function rr(i,e){return new w(3505,!1)}function fe(i){switch(i.length){case 0:return new ge;case 1:return i[0];default:return new Ke(i)}}function yn(i,e,t=new Map,n=new Map){let r=[],a=[],s=-1,o=null;if(e.forEach(l=>{let c=l.get("offset"),u=c==s,h=u&&o||new Map;l.forEach((P,y)=>{let C=y,S=P;if(y!=="offset")switch(C=i.normalizePropertyName(C,r),S){case tt:S=t.get(y);break;case se:S=n.get(y);break;default:S=i.normalizeStyleValue(y,C,S,r);break}h.set(C,S)}),u||a.push(h),o=h,s=c}),r.length)throw qr(r);return a}function Pt(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&hn(t,"start",i)));break;case"done":i.onDone(()=>n(t&&hn(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&hn(t,"destroy",i)));break}}function hn(i,e,t){let n=t.totalTime,r=!!t.disabled,a=Mt(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,n??i.totalTime,r),s=i._data;return s!=null&&(a._data=s),a}function Mt(i,e,t,n,r="",a=0,s){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:r,totalTime:a,disabled:!!s}}function Q(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function Cn(i){let e=i.indexOf(":"),t=i.substring(1,e),n=i.slice(e+1);return[t,n]}var Wr=typeof document>"u"?null:document.documentElement;function Tt(i){let e=i.parentNode||i.host||null;return e===Wr?null:e}function $r(i){return i.substring(1,6)=="ebkit"}var xe=null,Ni=!1;function ar(i){xe||(xe=Yr()||{},Ni=xe.style?"WebkitAppearance"in xe.style:!1);let e=!0;return xe.style&&!$r(i)&&(e=i in xe.style,!e&&Ni&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in xe.style)),e}function Yr(){return typeof document<"u"?document.body:null}function _n(i,e){for(;e;){if(e===i)return!0;e=Tt(e)}return!1}function vn(i,e,t){if(t)return Array.from(i.querySelectorAll(e));let n=i.querySelector(e);return n?[n]:[]}var Hr=1e3,bn="{{",Qr="}}",Sn="ng-enter",xt="ng-leave",nt="ng-trigger",it=".ng-trigger",wn="ng-animating",Dt=".ng-animating";function pe(i){if(typeof i=="number")return i;let e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:gn(parseFloat(e[1]),e[2])}function gn(i,e){switch(e){case"s":return i*Hr;default:return i}}function rt(i,e,t){return i.hasOwnProperty("duration")?i:Jr(i,e,t)}var Xr=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function Jr(i,e,t){let n,r=0,a="";if(typeof i=="string"){let s=i.match(Xr);if(s===null)return e.push(ki(i)),{duration:0,delay:0,easing:""};n=gn(parseFloat(s[1]),s[2]);let o=s[3];o!=null&&(r=gn(parseFloat(o),s[4]));let l=s[5];l&&(a=l)}else n=i;if(!t){let s=!1,o=e.length;n<0&&(e.push(zr()),s=!0),r<0&&(e.push(Vr()),s=!0),s&&e.splice(o,0,ki(i))}return{duration:n,delay:r,easing:a}}function sr(i){return i.length?i[0]instanceof Map?i:i.map(e=>new Map(Object.entries(e))):[]}function oe(i,e,t){e.forEach((n,r)=>{let a=Ot(r);t&&!t.has(r)&&t.set(r,i.style[a]),i.style[a]=n})}function Se(i,e){e.forEach((t,n)=>{let r=Ot(n);i.style[r]=""})}function Ue(i){return Array.isArray(i)?i.length==1?i[0]:Ai(i):i}function or(i,e,t){let n=e.params||{},r=En(i);r.length&&r.forEach(a=>{n.hasOwnProperty(a)||t.push(jr(a))})}var fn=new RegExp(`${bn}\\s*(.+?)\\s*${Qr}`,"g");function En(i){let e=[];if(typeof i=="string"){let t;for(;t=fn.exec(i);)e.push(t[1]);fn.lastIndex=0}return e}function qe(i,e,t){let n=`${i}`,r=n.replace(fn,(a,s)=>{let o=e[s];return o==null&&(t.push(Kr(s)),o=""),o.toString()});return r==n?i:r}var Zr=/-+([a-z0-9])/g;function Ot(i){return i.replace(Zr,(...e)=>e[1].toUpperCase())}function lr(i,e){return i===0||e===0}function cr(i,e,t){if(t.size&&e.length){let n=e[0],r=[];if(t.forEach((a,s)=>{n.has(s)||r.push(s),n.set(s,a)}),r.length)for(let a=1;a<e.length;a++){let s=e[a];r.forEach(o=>s.set(o,At(i,o)))}}return e}function X(i,e,t){switch(e.type){case E.Trigger:return i.visitTrigger(e,t);case E.State:return i.visitState(e,t);case E.Transition:return i.visitTransition(e,t);case E.Sequence:return i.visitSequence(e,t);case E.Group:return i.visitGroup(e,t);case E.Animate:return i.visitAnimate(e,t);case E.Keyframes:return i.visitKeyframes(e,t);case E.Style:return i.visitStyle(e,t);case E.Reference:return i.visitReference(e,t);case E.AnimateChild:return i.visitAnimateChild(e,t);case E.AnimateRef:return i.visitAnimateRef(e,t);case E.Query:return i.visitQuery(e,t);case E.Stagger:return i.visitStagger(e,t);default:throw Ur(e.type)}}function At(i,e){return window.getComputedStyle(i)[e]}var Vn=(()=>{class i{validateStyleProperty(t){return ar(t)}containsElement(t,n){return _n(t,n)}getParentElement(t){return Tt(t)}query(t,n,r){return vn(t,n,r)}computeStyle(t,n,r){return r||""}animate(t,n,r,a,s,o=[],l){return new ge(r,a)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=I({token:i,factory:i.\u0275fac})}return i})(),Oe=class{static NOOP=new Vn},Ae=class{};var ea=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Lt=class extends Ae{normalizePropertyName(e,t){return Ot(e)}normalizeStyleValue(e,t,n,r){let a="",s=n.toString().trim();if(ea.has(t)&&n!==0&&n!=="0")if(typeof n=="number")a="px";else{let o=n.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&o[1].length==0&&r.push(Ri(e,n))}return s+a}};var Ft="*";function ta(i,e){let t=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(n=>na(n,t,e)):t.push(i),t}function na(i,e,t){if(i[0]==":"){let l=ia(i,t);if(typeof l=="function"){e.push(l);return}i=l}let n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return t.push(Wi(i)),e;let r=n[1],a=n[2],s=n[3];e.push(dr(r,s));let o=r==Ft&&s==Ft;a[0]=="<"&&!o&&e.push(dr(s,r))}function ia(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push($i(i)),"* => *"}}var kt=new Set(["true","1"]),Nt=new Set(["false","0"]);function dr(i,e){let t=kt.has(i)||Nt.has(i),n=kt.has(e)||Nt.has(e);return(r,a)=>{let s=i==Ft||i==r,o=e==Ft||e==a;return!s&&t&&typeof r=="boolean"&&(s=r?kt.has(i):Nt.has(i)),!o&&n&&typeof a=="boolean"&&(o=a?kt.has(e):Nt.has(e)),s&&o}}var vr=":self",ra=new RegExp(`s*${vr}s*,?`,"g");function br(i,e,t,n){return new On(i).build(e,t,n)}var mr="",On=class{_driver;constructor(e){this._driver=e}build(e,t,n){let r=new An(t);return this._resetContextStyleTimingState(r),X(this,Ue(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=mr,e.collectedStyles=new Map,e.collectedStyles.set(mr,new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0,a=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(Ii()),e.definitions.forEach(o=>{if(this._resetContextStyleTimingState(t),o.type==E.State){let l=o,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,a.push(this.visitState(l,t))}),l.name=c}else if(o.type==E.Transition){let l=this.visitTransition(o,t);n+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(Li())}),{type:E.Trigger,name:e.name,states:a,transitions:s,queryCount:n,depCount:r,options:null}}visitState(e,t){let n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){let a=new Set,s=r||{};n.styles.forEach(o=>{o instanceof Map&&o.forEach(l=>{En(l).forEach(c=>{s.hasOwnProperty(c)||a.add(c)})})}),a.size&&t.errors.push(Fi(e.name,[...a.values()]))}return{type:E.State,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let n=X(this,Ue(e.animation),t),r=ta(e.expr,t.errors);return{type:E.Transition,matchers:r,animation:n,queryCount:t.queryCount,depCount:t.depCount,options:De(e.options)}}visitSequence(e,t){return{type:E.Sequence,steps:e.steps.map(n=>X(this,n,t)),options:De(e.options)}}visitGroup(e,t){let n=t.currentTime,r=0,a=e.steps.map(s=>{t.currentTime=n;let o=X(this,s,t);return r=Math.max(r,t.currentTime),o});return t.currentTime=r,{type:E.Group,steps:a,options:De(e.options)}}visitAnimate(e,t){let n=la(e.timings,t.errors);t.currentAnimateTimings=n;let r,a=e.styles?e.styles:un({});if(a.type==E.Keyframes)r=this.visitKeyframes(a,t);else{let s=e.styles,o=!1;if(!s){o=!0;let c={};n.easing&&(c.easing=n.easing),s=un(c)}t.currentTime+=n.duration+n.delay;let l=this.visitStyle(s,t);l.isEmptyStep=o,r=l}return t.currentAnimateTimings=null,{type:E.Animate,timings:n,style:r,options:null}}visitStyle(e,t){let n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){let n=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let o of r)typeof o=="string"?o===se?n.push(o):t.errors.push(Gi(o)):n.push(new Map(Object.entries(o)));let a=!1,s=null;return n.forEach(o=>{if(o instanceof Map&&(o.has("easing")&&(s=o.get("easing"),o.delete("easing")),!a)){for(let l of o.values())if(l.toString().indexOf(bn)>=0){a=!0;break}}}),{type:E.Style,styles:n,easing:s,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){let n=t.currentAnimateTimings,r=t.currentTime,a=t.currentTime;n&&a>0&&(a-=n.duration+n.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l),h=!0;u&&(a!=r&&a>=u.startTime&&r<=u.endTime&&(t.errors.push(Bi(l,u.startTime,u.endTime,a,r)),h=!1),a=u.startTime),h&&c.set(l,{startTime:a,endTime:r}),t.options&&or(o,t.options,t.errors)})})}visitKeyframes(e,t){let n={type:E.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(zi()),n;let r=1,a=0,s=[],o=!1,l=!1,c=0,u=e.steps.map(R=>{let F=this._makeStyleAst(R,t),q=F.offset!=null?F.offset:oa(F.styles),z=0;return q!=null&&(a++,z=F.offset=q),l=l||z<0||z>1,o=o||z<c,c=z,s.push(z),F});l&&t.errors.push(Vi()),o&&t.errors.push(ji());let h=e.steps.length,P=0;a>0&&a<h?t.errors.push(Ki()):a==0&&(P=r/(h-1));let y=h-1,C=t.currentTime,S=t.currentAnimateTimings,A=S.duration;return u.forEach((R,F)=>{let q=P>0?F==y?1:P*F:s[F],z=q*A;t.currentTime=C+S.delay+z,S.duration=z,this._validateStyleAst(R,t),R.offset=q,n.styles.push(R)}),n}visitReference(e,t){return{type:E.Reference,animation:X(this,Ue(e.animation),t),options:De(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:E.AnimateChild,options:De(e.options)}}visitAnimateRef(e,t){return{type:E.AnimateRef,animation:this.visitReference(e.animation,t),options:De(e.options)}}visitQuery(e,t){let n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[a,s]=aa(e.selector);t.currentQuerySelector=n.length?n+" "+a:a,Q(t.collectedStyles,t.currentQuerySelector,new Map);let o=X(this,Ue(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:E.Query,selector:a,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:e.selector,options:De(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Ui());let n=e.timings==="full"?{duration:0,delay:0,easing:"full"}:rt(e.timings,t.errors,!0);return{type:E.Stagger,animation:X(this,Ue(e.animation),t),timings:n,options:null}}};function aa(i){let e=!!i.split(/\s*,\s*/).find(t=>t==vr);return e&&(i=i.replace(ra,"")),i=i.replace(/@\*/g,it).replace(/@\w+/g,t=>it+"-"+t.slice(1)).replace(/:animating/g,Dt),[i,e]}function sa(i){return i?Le({},i):null}var An=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function oa(i){if(typeof i=="string")return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function la(i,e){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let a=rt(i,e).duration;return Pn(a,0,"")}let t=i;if(t.split(/\s+/).some(a=>a.charAt(0)=="{"&&a.charAt(1)=="{")){let a=Pn(0,0,"");return a.dynamic=!0,a.strValue=t,a}let r=rt(t,e);return Pn(r.duration,r.delay,r.easing)}function De(i){return i?(i=Le({},i),i.params&&(i.params=sa(i.params))):i={},i}function Pn(i,e,t){return{duration:i,delay:e,easing:t}}function jn(i,e,t,n,r,a,s=null,o=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:r,delay:a,totalTime:r+a,easing:s,subTimeline:o}}var st=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},ca=1,da=":enter",ma=new RegExp(da,"g"),pa=":leave",ua=new RegExp(pa,"g");function Sr(i,e,t,n,r,a=new Map,s=new Map,o,l,c=[]){return new kn().buildKeyframes(i,e,t,n,r,a,s,o,l,c)}var kn=class{buildKeyframes(e,t,n,r,a,s,o,l,c,u=[]){c=c||new st;let h=new Nn(e,t,c,r,a,u,[]);h.options=l;let P=l.delay?pe(l.delay):0;h.currentTimeline.delayNextStep(P),h.currentTimeline.setStyles([s],null,h.errors,l),X(this,n,h);let y=h.timelines.filter(C=>C.containsAnimation());if(y.length&&o.size){let C;for(let S=y.length-1;S>=0;S--){let A=y[S];if(A.element===t){C=A;break}}C&&!C.allowOnlyTimelineStyles()&&C.setStyles([o],null,h.errors,l)}return y.length?y.map(C=>C.buildKeyframes()):[jn(t,[],[],[],0,P,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let n=t.subInstructions.get(t.element);if(n){let r=t.createSubContext(e.options),a=t.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);a!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(let r of e){let a=r?.delay;if(a){let s=typeof a=="number"?a:pe(qe(a,r?.params??{},t.errors));n.delayNextStep(s)}}}_visitSubInstructions(e,t,n){let a=t.currentTimeline.currentTime,s=n.duration!=null?pe(n.duration):null,o=n.delay!=null?pe(n.delay):null;return s!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,s,o);a=Math.max(a,c.duration+c.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),X(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let n=t.subContextCount,r=t,a=e.options;if(a&&(a.params||a.delay)&&(r=t.createSubContext(a),r.transformIntoNewTimeline(),a.delay!=null)){r.previousNode.type==E.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Gt);let s=pe(a.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>X(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let n=[],r=t.currentTimeline.currentTime,a=e.options&&e.options.delay?pe(e.options.delay):0;e.steps.forEach(s=>{let o=t.createSubContext(e.options);a&&o.delayNextStep(a),X(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let n=e.strValue,r=t.params?qe(n,t.params,t.errors):n;return rt(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());let a=e.style;a.type==E.Keyframes?this.visitKeyframes(a,t):(t.incrementTime(n.duration),this.visitStyle(a,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();let a=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(a):n.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let n=t.currentAnimateTimings,r=t.currentTimeline.duration,a=n.duration,o=t.createSubContext().currentTimeline;o.easing=n.easing,e.styles.forEach(l=>{let c=l.offset||0;o.forwardTime(c*a),o.setStyles(l.styles,l.easing,t.errors,t.options),o.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(o),t.transformIntoNewTimeline(r+a),t.previousNode=e}visitQuery(e,t){let n=t.currentTimeline.currentTime,r=e.options||{},a=r.delay?pe(r.delay):0;a&&(t.previousNode.type===E.Style||n==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Gt);let s=n,o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=o.length;let l=null;o.forEach((c,u)=>{t.currentQueryIndex=u;let h=t.createSubContext(e.options,c);a&&h.delayNextStep(a),c===t.element&&(l=h.currentTimeline),X(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe();let P=h.currentTimeline.currentTime;s=Math.max(s,P)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let n=t.parentContext,r=t.currentTimeline,a=e.timings,s=Math.abs(a.duration),o=s*(t.currentQueryTotal-1),l=s*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":l=o-l;break;case"full":l=n.currentStaggerTime;break}let u=t.currentTimeline;l&&u.delayNextStep(l);let h=u.currentTime;X(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-h+(r.startTime-n.currentTimeline.startTime)}},Gt={},Nn=class i{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Gt;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,n,r,a,s,o,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=a,this.errors=s,this.timelines=o,this.currentTimeline=l||new Bt(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let n=e,r=this.options;n.duration!=null&&(r.duration=pe(n.duration)),n.delay!=null&&(r.delay=pe(n.delay));let a=n.params;if(a){let s=r.params;s||(s=this.options.params={}),Object.keys(a).forEach(o=>{(!t||!s.hasOwnProperty(o))&&(s[o]=qe(a[o],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let n=e.params={};Object.keys(t).forEach(r=>{n[r]=t[r]})}}return e}createSubContext(e=null,t,n){let r=t||this.element,a=new i(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=Gt,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},a=new Rn(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(a),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,a,s){let o=[];if(r&&o.push(this.element),e.length>0){e=e.replace(ma,"."+this._enterClassName),e=e.replace(ua,"."+this._leaveClassName);let l=n!=1,c=this._driver.query(this.element,e,l);n!==0&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),o.push(...c)}return!a&&o.length==0&&s.push(qi(t)),o}},Bt=class i{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new i(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=ca,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||se),this._currentKeyframe.set(t,se);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&this._previousKeyframe.set("easing",t);let a=r&&r.params||{},s=ha(e,this._globalTimelineStyles);for(let[o,l]of s){let c=qe(l,a,n);this._pendingStyles.set(o,c),this._localTimelineStyles.has(o)||this._backFill.set(o,this._globalTimelineStyles.get(o)??se),this._updateStyle(o,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{let r=this._styleSummary.get(n);(!r||t.time>r.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,n=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((o,l)=>{let c=new Map([...this._backFill,...o]);c.forEach((u,h)=>{u===tt?e.add(h):u===se&&t.add(h)}),n||c.set("offset",l/this.duration),r.push(c)});let a=[...e.values()],s=[...t.values()];if(n){let o=r[0],l=new Map(o);o.set("offset",0),l.set("offset",1),r=[o,l]}return jn(this.element,r,a,s,this.duration,this.startTime,this.easing,!1)}},Rn=class extends Bt{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,n,r,a,s,o=!1){super(e,t,s.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=a,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let a=[],s=n+t,o=t/s,l=new Map(e[0]);l.set("offset",0),a.push(l);let c=new Map(e[0]);c.set("offset",pr(o)),a.push(c);let u=e.length-1;for(let h=1;h<=u;h++){let P=new Map(e[h]),y=P.get("offset"),C=t+y*n;P.set("offset",pr(C/s)),a.push(P)}n=s,t=0,r="",e=a}return jn(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}};function pr(i,e=3){let t=Math.pow(10,e-1);return Math.round(i*t)/t}function ha(i,e){let t=new Map,n;return i.forEach(r=>{if(r==="*"){n??=e.keys();for(let a of n)t.set(a,se)}else for(let[a,s]of r)t.set(a,s)}),t}function ur(i,e,t,n,r,a,s,o,l,c,u,h,P){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:a,toState:n,toStyles:s,timelines:o,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:P}}var Mn={},zt=class{_triggerName;ast;_stateStyles;constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return ga(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,n):new Map}build(e,t,n,r,a,s,o,l,c,u){let h=[],P=this.ast.options&&this.ast.options.params||Mn,y=o&&o.params||Mn,C=this.buildStyles(n,y,h),S=l&&l.params||Mn,A=this.buildStyles(r,S,h),R=new Set,F=new Map,q=new Map,z=r==="void",Re={params:wr(S,P),delay:this.ast.options?.delay},ce=u?[]:Sr(e,t,this.ast.animation,a,s,C,A,Re,c,h),W=0;return ce.forEach(Y=>{W=Math.max(Y.duration+Y.delay,W)}),h.length?ur(t,this._triggerName,n,r,z,C,A,[],[],F,q,W,h):(ce.forEach(Y=>{let Ee=Y.element,Ie=Q(F,Ee,new Set);Y.preStyleProps.forEach(Pe=>Ie.add(Pe));let Un=Q(q,Ee,new Set);Y.postStyleProps.forEach(Pe=>Un.add(Pe)),Ee!==t&&R.add(Ee)}),ur(t,this._triggerName,n,r,z,C,A,ce,[...R.values()],F,q,W))}};function ga(i,e,t,n,r){return i.some(a=>a(e,t,n,r))}function wr(i,e){let t=Le({},e);return Object.entries(i).forEach(([n,r])=>{r!=null&&(t[n]=r)}),t}var In=class{styles;defaultParams;normalizer;constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){let n=new Map,r=wr(e,this.defaultParams);return this.styles.styles.forEach(a=>{typeof a!="string"&&a.forEach((s,o)=>{s&&(s=qe(s,r,t));let l=this.normalizer.normalizePropertyName(o,t);s=this.normalizer.normalizeStyleValue(o,l,s,t),n.set(o,s)})}),n}};function fa(i,e,t){return new Ln(i,e,t)}var Ln=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,t.states.forEach(r=>{let a=r.options&&r.options.params||{};this.states.set(r.name,new In(r.style,a,n))}),hr(this.states,"true","1"),hr(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new zt(e,r,this.states))}),this.fallbackTransition=ya(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(s=>s.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}};function ya(i,e,t){let n=[(s,o)=>!0],r={type:E.Sequence,steps:[],options:null},a={type:E.Transition,animation:r,matchers:n,options:null,queryCount:0,depCount:0};return new zt(i,a,e)}function hr(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}var Ca=new st,Fn=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n}register(e,t){let n=[],r=[],a=br(this._driver,t,n,r);if(n.length)throw Hi(n);this._animations.set(e,a)}_buildPlayer(e,t,n){let r=e.element,a=yn(this._normalizer,e.keyframes,t,n);return this._driver.animate(r,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){let r=[],a=this._animations.get(e),s,o=new Map;if(a?(s=Sr(this._driver,t,a,Sn,xt,new Map,new Map,n,Ca,r),s.forEach(u=>{let h=Q(o,u.element,new Map);u.postStyleProps.forEach(P=>h.set(P,null))})):(r.push(Qi()),s=[]),r.length)throw Xi(r);o.forEach((u,h)=>{u.forEach((P,y)=>{u.set(y,this._driver.computeStyle(h,y,se))})});let l=s.map(u=>{let h=o.get(u.element);return this._buildPlayer(u,new Map,h)}),c=fe(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw Ji(e);return t}listen(e,t,n,r){let a=Mt(t,"","","");return Pt(this._getPlayer(e),n,a,r),()=>{}}command(e,t,n,r){if(n=="register"){this.register(e,r[0]);return}if(n=="create"){let s=r[0]||{};this.create(e,t,s);return}let a=this._getPlayer(e);switch(n){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},gr="ng-animate-queued",_a=".ng-animate-queued",Tn="ng-animate-disabled",va=".ng-animate-disabled",ba="ng-star-inserted",Sa=".ng-star-inserted",wa=[],Er={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ea={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},le="__ng_removed",ot=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let n=e&&e.hasOwnProperty("value"),r=n?e.value:e;if(this.value=Ma(r),n){let a=e,{value:s}=a,o=Yn(a,["value"]);this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let n=this.options.params;Object.keys(t).forEach(r=>{n[r]==null&&(n[r]=t[r])})}}},at="void",xn=new ot(at),Gn=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this._hostClassName="ng-tns-"+e,re(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.has(t))throw Zi(n,t);if(n==null||n.length==0)throw er(t);if(!Ta(n))throw tr(n,t);let a=Q(this._elementListeners,e,[]),s={name:t,phase:n,callback:r};a.push(s);let o=Q(this._engine.statesByElement,e,new Map);return o.has(t)||(re(e,nt),re(e,nt+"-"+t),o.set(t,xn)),()=>{this._engine.afterFlush(()=>{let l=a.indexOf(s);l>=0&&a.splice(l,1),this._triggers.has(t)||o.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw nr(e);return t}trigger(e,t,n,r=!0){let a=this._getTrigger(t),s=new lt(this.id,t,e),o=this._engine.statesByElement.get(e);o||(re(e,nt),re(e,nt+"-"+t),this._engine.statesByElement.set(e,o=new Map));let l=o.get(t),c=new ot(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),o.set(t,c),l||(l=xn),!(c.value===at)&&l.value===c.value){if(!Oa(l.params,c.params)){let S=[],A=a.matchStyles(l.value,l.params,S),R=a.matchStyles(c.value,c.params,S);S.length?this._engine.reportError(S):this._engine.afterFlush(()=>{Se(e,A),oe(e,R)})}return}let P=Q(this._engine.playersByElement,e,[]);P.forEach(S=>{S.namespaceId==this.id&&S.triggerName==t&&S.queued&&S.destroy()});let y=a.matchTransition(l.value,c.value,e,c.params),C=!1;if(!y){if(!r)return;y=a.fallbackTransition,C=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:l,toState:c,player:s,isFallbackTransition:C}),C||(re(e,gr),s.onStart(()=>{We(e,gr)})),s.onDone(()=>{let S=this.players.indexOf(s);S>=0&&this.players.splice(S,1);let A=this._engine.playersByElement.get(e);if(A){let R=A.indexOf(s);R>=0&&A.splice(R,1)}}),this.players.push(s),P.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let n=this._engine.driver.query(e,it,!0);n.forEach(r=>{if(r[le])return;let a=this._engine.fetchNamespacesByElement(r);a.size?a.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,n,r){let a=this._engine.statesByElement.get(e),s=new Map;if(a){let o=[];if(a.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let u=this.trigger(e,c,at,r);u&&o.push(u)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),n&&fe(o).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){let r=new Set;t.forEach(a=>{let s=a.name;if(r.has(s))return;r.add(s);let l=this._triggers.get(s).fallbackTransition,c=n.get(s)||xn,u=new ot(at),h=new lt(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:u,player:h,isFallbackTransition:!0})})}}removeNode(e,t){let n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){let a=n.players.length?n.playersByQueriedElement.get(e):[];if(a&&a.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(n.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{let a=e[le];(!a||a===Er)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){re(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(n=>{let r=n.player;if(r.destroyed)return;let a=n.element,s=this._elementListeners.get(a);s&&s.forEach(o=>{if(o.name==n.triggerName){let l=Mt(a,n.triggerName,n.fromState.value,n.toState.value);l._data=e,Pt(n.player,o.phase,l,o.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((n,r)=>{let a=n.transition.ast.depCount,s=r.transition.ast.depCount;return a==0||s==0?a-s:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Bn=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){let n=new Gn(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){let n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let s=!1,o=this.driver.getParentElement(t);for(;o;){let l=r.get(o);if(l){let c=n.indexOf(l);n.splice(c+1,0,e),s=!0;break}o=this.driver.getParentElement(o)}s||n.unshift(e)}else n.push(e);return r.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(e);this.namespacesByHostElement.delete(n.hostElement);let r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1),n.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,n=this.statesByElement.get(e);if(n){for(let r of n.values())if(r.namespaceId){let a=this._fetchNamespace(r.namespaceId);a&&t.add(a)}}return t}trigger(e,t,n,r){if(Rt(t)){let a=this._fetchNamespace(e);if(a)return a.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!Rt(t))return;let a=t[le];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),re(e,Tn)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),We(e,Tn))}removeNode(e,t,n){if(Rt(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n);let a=this.namespacesByHostElement.get(t);a&&a.id!==e&&a.removeNode(t,n)}else this._onRemovalComplete(t,n)}markElementAsRemoved(e,t,n,r,a){this.collectedLeaveElements.push(t),t[le]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,n,r,a){return Rt(t)?this._fetchNamespace(e).listen(t,n,r,a):()=>{}}_buildInstruction(e,t,n,r,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,it,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Dt,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return fe(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[le];if(t&&t.setForRemoval){if(e[le]=Er,t.namespaceId){this.destroyInnerAnimations(e);let n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Tn)&&this.markElementAsDisabled(e,!1),this.driver.query(e,va,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let r=this.collectedEnterElements[n];re(r,ba)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{t=this._flushAnimations(n,e)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let r=this.collectedLeaveElements[n];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],t.length?fe(t).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(e){throw ir(e)}_flushAnimations(e,t){let n=new st,r=[],a=new Map,s=[],o=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(g=>{u.add(g);let _=this.driver.query(g,_a,!0);for(let v=0;v<_.length;v++)u.add(_[v])});let h=this.bodyNode,P=Array.from(this.statesByElement.keys()),y=Cr(P,this.collectedEnterElements),C=new Map,S=0;y.forEach((g,_)=>{let v=Sn+S++;C.set(_,v),g.forEach(M=>re(M,v))});let A=[],R=new Set,F=new Set;for(let g=0;g<this.collectedLeaveElements.length;g++){let _=this.collectedLeaveElements[g],v=_[le];v&&v.setForRemoval&&(A.push(_),R.add(_),v.hasAnimation?this.driver.query(_,Sa,!0).forEach(M=>R.add(M)):F.add(_))}let q=new Map,z=Cr(P,Array.from(R));z.forEach((g,_)=>{let v=xt+S++;q.set(_,v),g.forEach(M=>re(M,v))}),e.push(()=>{y.forEach((g,_)=>{let v=C.get(_);g.forEach(M=>We(M,v))}),z.forEach((g,_)=>{let v=q.get(_);g.forEach(M=>We(M,v))}),A.forEach(g=>{this.processLeaveNode(g)})});let Re=[],ce=[];for(let g=this._namespaceList.length-1;g>=0;g--)this._namespaceList[g].drainQueuedTransitions(t).forEach(v=>{let M=v.player,G=v.element;if(Re.push(M),this.collectedEnterElements.length){let j=G[le];if(j&&j.setForMove){if(j.previousTriggersValues&&j.previousTriggersValues.has(v.triggerName)){let Me=j.previousTriggersValues.get(v.triggerName),te=this.statesByElement.get(v.element);if(te&&te.has(v.triggerName)){let mt=te.get(v.triggerName);mt.value=Me,te.set(v.triggerName,mt)}}M.destroy();return}}let de=!h||!this.driver.containsElement(h,G),J=q.get(G),ye=C.get(G),k=this._buildInstruction(v,n,ye,J,de);if(k.errors&&k.errors.length){ce.push(k);return}if(de){M.onStart(()=>Se(G,k.fromStyles)),M.onDestroy(()=>oe(G,k.toStyles)),r.push(M);return}if(v.isFallbackTransition){M.onStart(()=>Se(G,k.fromStyles)),M.onDestroy(()=>oe(G,k.toStyles)),r.push(M);return}let $n=[];k.timelines.forEach(j=>{j.stretchStartingKeyframe=!0,this.disabledNodes.has(j.element)||$n.push(j)}),k.timelines=$n,n.append(G,k.timelines);let Br={instruction:k,player:M,element:G};s.push(Br),k.queriedElements.forEach(j=>Q(o,j,[]).push(M)),k.preStyleProps.forEach((j,Me)=>{if(j.size){let te=l.get(Me);te||l.set(Me,te=new Set),j.forEach((mt,sn)=>te.add(sn))}}),k.postStyleProps.forEach((j,Me)=>{let te=c.get(Me);te||c.set(Me,te=new Set),j.forEach((mt,sn)=>te.add(sn))})});if(ce.length){let g=[];ce.forEach(_=>{g.push(rr(_.triggerName,_.errors))}),Re.forEach(_=>_.destroy()),this.reportError(g)}let W=new Map,Y=new Map;s.forEach(g=>{let _=g.element;n.has(_)&&(Y.set(_,_),this._beforeAnimationBuild(g.player.namespaceId,g.instruction,W))}),r.forEach(g=>{let _=g.element;this._getPreviousPlayers(_,!1,g.namespaceId,g.triggerName,null).forEach(M=>{Q(W,_,[]).push(M),M.destroy()})});let Ee=A.filter(g=>_r(g,l,c)),Ie=new Map;yr(Ie,this.driver,F,c,se).forEach(g=>{_r(g,l,c)&&Ee.push(g)});let Pe=new Map;y.forEach((g,_)=>{yr(Pe,this.driver,new Set(g),l,tt)}),Ee.forEach(g=>{let _=Ie.get(g),v=Pe.get(g);Ie.set(g,new Map([..._?.entries()??[],...v?.entries()??[]]))});let an=[],qn=[],Wn={};s.forEach(g=>{let{element:_,player:v,instruction:M}=g;if(n.has(_)){if(u.has(_)){v.onDestroy(()=>oe(_,M.toStyles)),v.disabled=!0,v.overrideTotalTime(M.totalTime),r.push(v);return}let G=Wn;if(Y.size>1){let J=_,ye=[];for(;J=J.parentNode;){let k=Y.get(J);if(k){G=k;break}ye.push(J)}ye.forEach(k=>Y.set(k,G))}let de=this._buildAnimation(v.namespaceId,M,W,a,Pe,Ie);if(v.setRealPlayer(de),G===Wn)an.push(v);else{let J=this.playersByElement.get(G);J&&J.length&&(v.parentPlayer=fe(J)),r.push(v)}}else Se(_,M.fromStyles),v.onDestroy(()=>oe(_,M.toStyles)),qn.push(v),u.has(_)&&r.push(v)}),qn.forEach(g=>{let _=a.get(g.element);if(_&&_.length){let v=fe(_);g.setRealPlayer(v)}}),r.forEach(g=>{g.parentPlayer?g.syncPlayerEvents(g.parentPlayer):g.destroy()});for(let g=0;g<A.length;g++){let _=A[g],v=_[le];if(We(_,xt),v&&v.hasAnimation)continue;let M=[];if(o.size){let de=o.get(_);de&&de.length&&M.push(...de);let J=this.driver.query(_,Dt,!0);for(let ye=0;ye<J.length;ye++){let k=o.get(J[ye]);k&&k.length&&M.push(...k)}}let G=M.filter(de=>!de.destroyed);G.length?xa(this,_,G):this.processLeaveNode(_)}return A.length=0,an.forEach(g=>{this.players.push(g),g.onDone(()=>{g.destroy();let _=this.players.indexOf(g);this.players.splice(_,1)}),g.play()}),an}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,a){let s=[];if(t){let o=this.playersByQueriedElement.get(e);o&&(s=o)}else{let o=this.playersByElement.get(e);if(o){let l=!a||a==at;o.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(n||r)&&(s=s.filter(o=>!(n&&n!=o.namespaceId||r&&r!=o.triggerName))),s}_beforeAnimationBuild(e,t,n){let r=t.triggerName,a=t.element,s=t.isRemovalTransition?void 0:e,o=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let c=l.element,u=c!==a,h=Q(n,c,[]);this._getPreviousPlayers(c,u,s,o,t.toState).forEach(y=>{let C=y.getRealPlayer();C.beforeDestroy&&C.beforeDestroy(),y.destroy(),h.push(y)})}Se(a,t.fromStyles)}_buildAnimation(e,t,n,r,a,s){let o=t.triggerName,l=t.element,c=[],u=new Set,h=new Set,P=t.timelines.map(C=>{let S=C.element;u.add(S);let A=S[le];if(A&&A.removedBeforeQueried)return new ge(C.duration,C.delay);let R=S!==l,F=Da((n.get(S)||wa).map(W=>W.getRealPlayer())).filter(W=>{let Y=W;return Y.element?Y.element===S:!1}),q=a.get(S),z=s.get(S),Re=yn(this._normalizer,C.keyframes,q,z),ce=this._buildPlayer(C,Re,F);if(C.subTimeline&&r&&h.add(S),R){let W=new lt(e,o,S);W.setRealPlayer(ce),c.push(W)}return ce});c.forEach(C=>{Q(this.playersByQueriedElement,C.element,[]).push(C),C.onDone(()=>Pa(this.playersByQueriedElement,C.element,C))}),u.forEach(C=>re(C,wn));let y=fe(P);return y.onDestroy(()=>{u.forEach(C=>We(C,wn)),oe(l,t.toStyles)}),h.forEach(C=>{Q(r,C,[]).push(y)}),y}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new ge(e.duration,e.delay)}},lt=class{namespaceId;triggerName;element;_player=new ge;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(r=>Pt(e,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Q(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Pa(i,e,t){let n=i.get(e);if(n){if(n.length){let r=n.indexOf(t);n.splice(r,1)}n.length==0&&i.delete(e)}return n}function Ma(i){return i??null}function Rt(i){return i&&i.nodeType===1}function Ta(i){return i=="start"||i=="done"}function fr(i,e){let t=i.style.display;return i.style.display=e??"none",t}function yr(i,e,t,n,r){let a=[];t.forEach(l=>a.push(fr(l)));let s=[];n.forEach((l,c)=>{let u=new Map;l.forEach(h=>{let P=e.computeStyle(c,h,r);u.set(h,P),(!P||P.length==0)&&(c[le]=Ea,s.push(c))}),i.set(c,u)});let o=0;return t.forEach(l=>fr(l,a[o++])),s}function Cr(i,e){let t=new Map;if(i.forEach(o=>t.set(o,[])),e.length==0)return t;let n=1,r=new Set(e),a=new Map;function s(o){if(!o)return n;let l=a.get(o);if(l)return l;let c=o.parentNode;return t.has(c)?l=c:r.has(c)?l=n:l=s(c),a.set(o,l),l}return e.forEach(o=>{let l=s(o);l!==n&&t.get(l).push(o)}),t}function re(i,e){i.classList?.add(e)}function We(i,e){i.classList?.remove(e)}function xa(i,e,t){fe(t).onDone(()=>i.processLeaveNode(e))}function Da(i){let e=[];return Pr(i,e),e}function Pr(i,e){for(let t=0;t<i.length;t++){let n=i[t];n instanceof Ke?Pr(n.players,e):e.push(n)}}function Oa(i,e){let t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){let a=t[r];if(!e.hasOwnProperty(a)||i[a]!==e[a])return!1}return!0}function _r(i,e,t){let n=t.get(i);if(!n)return!1;let r=e.get(i);return r?n.forEach(a=>r.add(a)):e.set(i,n),t.delete(i),!0}var $e=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,n){this._driver=t,this._normalizer=n,this._transitionEngine=new Bn(e.body,t,n),this._timelineEngine=new Fn(e.body,t,n),this._transitionEngine.onRemovalComplete=(r,a)=>this.onRemovalComplete(r,a)}registerTrigger(e,t,n,r,a){let s=e+"-"+r,o=this._triggerCache[s];if(!o){let l=[],c=[],u=br(this._driver,a,l,c);if(l.length)throw Yi(r,l);o=fa(r,u,this._normalizer),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(t,r,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n){this._transitionEngine.removeNode(e,t,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if(n.charAt(0)=="@"){let[a,s]=Cn(n),o=r;this._timelineEngine.command(a,t,s,o)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,a){if(n.charAt(0)=="@"){let[s,o]=Cn(n);return this._timelineEngine.listen(s,t,o,a)}return this._transitionEngine.listen(e,t,n,r,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Aa(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=Dn(e[0]),e.length>1&&(n=Dn(e[e.length-1]))):e instanceof Map&&(t=Dn(e)),t||n?new ka(i,t,n):null}var ka=(()=>{class i{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r;let a=i.initialStylesByElement.get(t);a||i.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&oe(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(oe(this._element,this._initialStyles),this._endStyles&&(oe(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(Se(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Se(this._element,this._endStyles),this._endStyles=null),oe(this._element,this._initialStyles),this._state=3)}}return i})();function Dn(i){let e=null;return i.forEach((t,n)=>{Na(n)&&(e=e||new Map,e.set(n,t))}),e}function Na(i){return i==="display"||i==="position"}var Vt=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{r!=="offset"&&e.set(r,this._finished?n:At(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},jt=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return _n(e,t)}getParentElement(e){return Tt(e)}query(e,t,n){return vn(e,t,n)}computeStyle(e,t,n){return At(e,t)}animate(e,t,n,r,a,s=[]){let o=r==0?"both":"forwards",l={duration:n,delay:r,fill:o};a&&(l.easing=a);let c=new Map,u=s.filter(y=>y instanceof Vt);lr(n,r)&&u.forEach(y=>{y.currentSnapshot.forEach((C,S)=>c.set(S,C))});let h=sr(t).map(y=>new Map(y));h=cr(e,h,c);let P=Aa(e,h);return new Vt(e,h,l,P)}};var It="@",Mr="@.disabled",Kt=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,n,r){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==It&&t==Mr?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n,r){return this.delegate.listen(e,t,n,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},zn=class extends Kt{factory;constructor(e,t,n,r,a){super(t,n,r,a),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==It?t.charAt(1)=="."&&t==Mr?(n=n===void 0?!0:!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n,r){if(t.charAt(0)==It){let a=Ra(e),s=t.slice(1),o="";return s.charAt(0)!=It&&([s,o]=Ia(s)),this.engine.listen(this.namespaceId,a,s,o,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,n,l)})}return this.delegate.listen(e,t,n,r)}};function Ra(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function Ia(i){let e=i.indexOf("."),t=i.substring(0,e),n=i.slice(e+1);return[t,n]}var Ut=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,t.onRemovalComplete=(r,a)=>{a?.removeChild(null,r)}}createRenderer(e,t){let n="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,u=c.get(r);if(!u){let h=()=>c.delete(r);u=new Kt(n,r,this.engine,h),c.set(r,u)}return u}let a=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let o=c=>{Array.isArray(c)?c.forEach(o):this.engine.registerTrigger(a,s,e,c.name,c)};return t.data.animation.forEach(o),new zn(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(n));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(a=>{let[s,o]=a;s(o)}),this._animationCallbacksBuffer=[]})}),r.push([t,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var Fa=(()=>{class i extends $e{constructor(t,n,r){super(t,n,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(n){return new(n||i)(V(gt),V(Oe),V(Ae))};static \u0275prov=I({token:i,factory:i.\u0275fac})}return i})();function Ga(){return new Lt}function Ba(i,e,t){return new Ut(i,e,t)}var Tr=[{provide:Ae,useFactory:Ga},{provide:$e,useClass:Fa},{provide:ti,useFactory:Ba,deps:[hi,$e,yt]}],$s=[{provide:Oe,useClass:Vn},{provide:ln,useValue:"NoopAnimations"},...Tr],za=[{provide:Oe,useFactory:()=>new jt},{provide:ln,useFactory:()=>"BrowserAnimations"},...Tr];function xr(){return ni("NgEagerAnimations"),[...za]}var qt=(r=>(r.HEARTS="hearts",r.DIAMONDS="diamonds",r.CLUBS="clubs",r.SPADES="spades",r))(qt||{}),ke=(y=>(y.ACE="A",y.KING="K",y.QUEEN="Q",y.JACK="J",y.TEN="10",y.NINE="9",y.EIGHT="8",y.SEVEN="7",y.SIX="6",y.FIVE="5",y.FOUR="4",y.THREE="3",y.TWO="2",y))(ke||{}),Ye=class{id;suit;rank;value;isRed;constructor(e,t){this.id=`${e}-${t}`,this.suit=e,this.rank=t,this.value=this.calculateValue(t),this.isRed=e==="hearts"||e==="diamonds"}calculateValue(e){switch(e){case"A":return 14;case"K":return 13;case"Q":return 12;case"J":return 11;case"10":return 10;case"9":return 9;case"8":return 8;case"7":return 7;case"6":return 6;case"5":return 5;case"4":return 4;case"3":return 3;case"2":return 2;default:return 0}}toString(){return`${this.rank} of ${this.suit}`}};function Va(i,e){i&1&&(ne(0,"div",1),Ze(1,"div",3),ie())}function ja(i,e){if(i&1&&(ne(0,"div",2)(1,"div",4)(2,"div",5),p(3),ie(),ne(4,"div",6),p(5),ie()(),ne(6,"div",7)(7,"div",8),p(8),ie()(),ne(9,"div",9)(10,"div",5),p(11),ie(),ne(12,"div",6),p(13),ie()()()),i&2){let t=T();f(3),B(t.displayRank()),f(2),B(t.displaySuit()),f(3),B(t.displaySuit()),f(3),B(t.displayRank()),f(2),B(t.displaySuit())}}var we=class i{card=x(null);faceDown=x(!1);glow=x(null);clickable=x(!1);animationState=x(null);fromPosition=x(null);cardClicked=Ct();isRed=N(()=>this.card()?.isRed??!1);displayRank=N(()=>{let e=this.card();return e?e.rank:""});displaySuit=N(()=>{let e=this.card();if(!e)return"";switch(e.suit){case"hearts":return"\u2665";case"diamonds":return"\u2666";case"clubs":return"\u2663";case"spades":return"\u2660";default:return""}});ariaLabel=N(()=>{if(this.faceDown())return"Face down card";let e=this.card();if(!e)return"Empty card slot";let t=e.suit.charAt(0).toUpperCase()+e.suit.slice(1);return`${this.getRankName(e.rank)} of ${t}`});getRankName(e){switch(e){case"A":return"Ace";case"K":return"King";case"Q":return"Queen";case"J":return"Jack";default:return e}}onCardClick(){this.clickable()&&this.cardClicked.emit()}onKeyDown(e){this.clickable()&&(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),this.cardClicked.emit())}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=H({type:i,selectors:[["app-card"]],inputs:{card:[1,"card"],faceDown:[1,"faceDown"],glow:[1,"glow"],clickable:[1,"clickable"],animationState:[1,"animationState"],fromPosition:[1,"fromPosition"]},outputs:{cardClicked:"cardClicked"},decls:3,vars:32,consts:[[1,"card",3,"click","keydown.enter","keydown.space"],[1,"card-back"],[1,"card-face"],[1,"card-pattern"],[1,"card-corner","top-left"],[1,"rank"],[1,"suit"],[1,"card-center"],[1,"suit-symbol"],[1,"card-corner","bottom-right"]],template:function(t,n){t&1&&(ne(0,"div",0),ai("click",function(){return n.onCardClick()})("keydown.enter",function(){return n.onCardClick()})("keydown.space",function(){return n.onCardClick()}),D(1,Va,2,0,"div",1)(2,ja,14,5,"div",2),ie()),t&2&&(he("face-down",n.faceDown())("red-card",n.isRed())("black-card",!n.isRed())("glowing",n.glow())("glow-green",n.glow()==="green")("glow-red",n.glow()==="red")("glow-blue",n.glow()==="blue")("clickable",n.clickable())("animate-slide-in",n.animationState()==="slide-in")("animate-flip",n.animationState()==="flip")("animate-clash-win",n.animationState()==="clash-win")("animate-clash-lose",n.animationState()==="clash-lose")("animate-fall-away",n.animationState()==="fall-away")("from-deck",n.fromPosition()==="deck"),Ge("role",n.clickable()?"button":null)("aria-label",n.ariaLabel())("tabindex",n.clickable()?0:null),f(),O(n.faceDown()?1:2))},dependencies:[be],styles:[".card[_ngcontent-%COMP%]{width:70px;height:100px;border-radius:8px;border:1px solid #ccc;position:relative;background:#fff;cursor:pointer;transition:all .3s ease-in-out;box-shadow:0 2px 4px #0000001a;-webkit-user-select:none;user-select:none}@media (max-width: 599px){.card[_ngcontent-%COMP%]{width:60px;height:85px}}@media (max-width: 359px){.card[_ngcontent-%COMP%]{width:50px;height:70px}}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.card.glowing[_ngcontent-%COMP%]{transition:box-shadow .3s ease-in-out,transform .3s ease-in-out}.card.glow-green[_ngcontent-%COMP%]{box-shadow:0 0 10px #4caf5099,0 2px 4px #0000001a;border-color:#4caf50}.card.glow-red[_ngcontent-%COMP%]{box-shadow:0 0 10px #f4433699,0 2px 4px #0000001a;border-color:#f44336}.card.glow-blue[_ngcontent-%COMP%]{box-shadow:0 0 10px #2196f399,0 2px 4px #0000001a;border-color:#2196f3;animation:_ngcontent-%COMP%_pulse-blue 1.5s infinite}.card.clickable[_ngcontent-%COMP%]{cursor:pointer}.card.clickable[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 12px #0003}.card.clickable[_ngcontent-%COMP%]:active{transform:translateY(-2px)}.card[_ngcontent-%COMP%]:not(.clickable){cursor:default}.card[_ngcontent-%COMP%]:not(.clickable):hover{transform:none;box-shadow:0 2px 4px #0000001a}@keyframes _ngcontent-%COMP%_pulse-blue{0%,to{box-shadow:0 0 10px #2196f399,0 2px 4px #0000001a}50%{box-shadow:0 0 20px #2196f3cc,0 4px 8px #00000026}}.card-back[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(135deg,#1a237e,#3f51b5);border-radius:7px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}.card-pattern[_ngcontent-%COMP%]{width:80%;height:80%;background-image:repeating-linear-gradient(45deg,rgba(255,255,255,.1) 0px,rgba(255,255,255,.1) 4px,transparent 4px,transparent 8px),repeating-linear-gradient(-45deg,rgba(255,255,255,.1) 0px,rgba(255,255,255,.1) 4px,transparent 4px,transparent 8px);border-radius:4px}.card-face[_ngcontent-%COMP%]{width:100%;height:100%;padding:4px;position:relative;display:flex;flex-direction:column;justify-content:space-between}@media (max-width: 599px){.card-face[_ngcontent-%COMP%]{padding:3px}}@media (max-width: 359px){.card-face[_ngcontent-%COMP%]{padding:2px}}.card-corner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;font-weight:700;font-size:10px;line-height:1}@media (max-width: 599px){.card-corner[_ngcontent-%COMP%]{font-size:9px}}@media (max-width: 359px){.card-corner[_ngcontent-%COMP%]{font-size:8px}}.card-corner[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{margin-bottom:1px}.card-corner[_ngcontent-%COMP%]   .suit[_ngcontent-%COMP%]{font-size:8px}@media (max-width: 599px){.card-corner[_ngcontent-%COMP%]   .suit[_ngcontent-%COMP%]{font-size:7px}}@media (max-width: 359px){.card-corner[_ngcontent-%COMP%]   .suit[_ngcontent-%COMP%]{font-size:6px}}.top-left[_ngcontent-%COMP%]{align-self:flex-start}.bottom-right[_ngcontent-%COMP%]{align-self:flex-end;transform:rotate(180deg)}.card-center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;align-items:center;justify-content:center}.suit-symbol[_ngcontent-%COMP%]{font-size:24px;font-weight:700}@media (max-width: 599px){.suit-symbol[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 359px){.suit-symbol[_ngcontent-%COMP%]{font-size:16px}}.red-card[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%], .red-card[_ngcontent-%COMP%]   .suit-symbol[_ngcontent-%COMP%]{color:#d32f2f}.black-card[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%], .black-card[_ngcontent-%COMP%]   .suit-symbol[_ngcontent-%COMP%]{color:#212121}[_nghost-%COMP%]     .dark-theme .card{background:#424242;border-color:#666;color:#e0e0e0}[_nghost-%COMP%]     .dark-theme .card.red-card .rank, [_nghost-%COMP%]     .dark-theme .card.red-card .suit-symbol{color:#f44336}[_nghost-%COMP%]     .dark-theme .card.black-card .rank, [_nghost-%COMP%]     .dark-theme .card.black-card .suit-symbol{color:#e0e0e0}.card.animate-slide-in[_ngcontent-%COMP%], .card.animate-slide-in.from-deck[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-in-from-deck .8s ease-out}.card.animate-flip[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_card-flip .6s ease-in-out}.card.animate-clash-win[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_clash-victory 1s ease-out}.card.animate-clash-lose[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_clash-defeat 1s ease-out}.card.animate-fall-away[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fall-away 1.2s ease-in forwards}@keyframes _ngcontent-%COMP%_slide-in-from-deck{0%{transform:translateY(-100px) scale(.8);opacity:.7}60%{transform:translateY(10px) scale(1.05);opacity:.9}to{transform:translateY(0) scale(1);opacity:1}}@keyframes _ngcontent-%COMP%_card-flip{0%{transform:rotateY(0)}50%{transform:rotateY(90deg)}to{transform:rotateY(0)}}@keyframes _ngcontent-%COMP%_clash-victory{0%{transform:translate(0) scale(1)}25%{transform:translate(-15px) scale(1.1)}50%{transform:translate(15px) scale(1.15)}75%{transform:translate(-5px) scale(1.1)}to{transform:translate(0) scale(1.05);box-shadow:0 0 20px #4caf50cc}}@keyframes _ngcontent-%COMP%_clash-defeat{0%{transform:translate(0) scale(1)}25%{transform:translate(15px) scale(1.05) rotate(5deg)}50%{transform:translate(-15px) scale(.95) rotate(-5deg)}75%{transform:translate(5px) scale(.9) rotate(2deg)}to{transform:translate(0) scale(.85) rotate(0);opacity:.7}}@keyframes _ngcontent-%COMP%_fall-away{0%{transform:translateY(0) rotate(0) scale(1);opacity:1}30%{transform:translateY(20px) rotate(-15deg) scale(.9);opacity:.8}70%{transform:translateY(100px) rotate(-45deg) scale(.6);opacity:.3}to{transform:translateY(200px) rotate(-90deg) scale(.2);opacity:0}}"]})};function Ka(i,e){if(i&1&&Ze(0,"div",6),i&2){let t=T();mn("width",t.dangerPercentage(),"%")("right",100-t.healthPercentage(),"%")}}var Wt=class i{label=x("Player");current=x(26);maximum=x(26);inDanger=x(0);showDamageAnimation=x(!1);healthPercentage=N(()=>{let e=this.maximum(),t=this.current();return e>0?t/e*100:0});dangerPercentage=N(()=>{let e=this.maximum(),t=this.inDanger();return e>0?Math.min(100,t/e*100):0});healthColor=N(()=>{let e=this.healthPercentage();return e>=75?"green":e>=50?"yellow":e>=25?"orange":"red"});static \u0275fac=function(t){return new(t||i)};static \u0275cmp=H({type:i,selectors:[["app-health-bar"]],inputs:{label:[1,"label"],current:[1,"current"],maximum:[1,"maximum"],inDanger:[1,"inDanger"],showDamageAnimation:[1,"showDamageAnimation"]},decls:9,vars:16,consts:[[1,"health-bar-container"],[1,"health-bar-label"],[1,"card-count"],[1,"health-bar-track"],[1,"health-bar-fill"],[1,"health-bar-danger",3,"width","right"],[1,"health-bar-danger"]],template:function(t,n){t&1&&(ne(0,"div",0)(1,"div",1)(2,"span"),p(3),ie(),ne(4,"span",2),p(5),ie()(),ne(6,"div",3),Ze(7,"div",4),D(8,Ka,1,4,"div",5),ie()()),t&2&&(f(3),B(n.label()),f(2),di("",n.current(),"/",n.maximum()),f(2),mn("width",n.healthPercentage(),"%"),he("green",n.healthColor()==="green")("yellow",n.healthColor()==="yellow")("orange",n.healthColor()==="orange")("red",n.healthColor()==="red")("damage-animation",n.showDamageAnimation()),f(),O(n.inDanger()>0?8:-1))},dependencies:[be],styles:[".health-bar-container[_ngcontent-%COMP%]{width:100%;max-width:400px}@media (max-width: 959px){.health-bar-container[_ngcontent-%COMP%]{max-width:320px}}@media (max-width: 599px){.health-bar-container[_ngcontent-%COMP%]{max-width:250px}}@media (max-width: 359px){.health-bar-container[_ngcontent-%COMP%]{max-width:200px}}.health-bar-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;font-size:14px;font-weight:500}@media (max-width: 599px){.health-bar-label[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 359px){.health-bar-label[_ngcontent-%COMP%]{font-size:12px}}.health-bar-label[_ngcontent-%COMP%]   .card-count[_ngcontent-%COMP%]{font-weight:400;opacity:.8}.health-bar-track[_ngcontent-%COMP%]{height:12px;background-color:#e0e0e0;border-radius:6px;overflow:hidden;position:relative;border:1px solid #ccc}@media (max-width: 599px){.health-bar-track[_ngcontent-%COMP%]{height:10px;border-radius:5px}}@media (max-width: 359px){.health-bar-track[_ngcontent-%COMP%]{height:8px;border-radius:4px}}.health-bar-fill[_ngcontent-%COMP%]{height:100%;border-radius:inherit;transition:width .5s ease-in-out,background-color .3s ease-in-out;position:relative}.health-bar-fill.green[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4caf50,#66bb6a)}.health-bar-fill.yellow[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ffc107,#ffd54f)}.health-bar-fill.orange[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ff9800,#ffb74d)}.health-bar-fill.red[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f44336,#ef5350)}.health-bar-danger[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;background:repeating-linear-gradient(45deg,rgba(255,255,255,.3) 0px,rgba(255,255,255,.3) 4px,transparent 4px,transparent 8px);border-radius:inherit;animation:_ngcontent-%COMP%_danger-pulse 1s infinite alternate}@keyframes _ngcontent-%COMP%_danger-pulse{0%{opacity:.4;transform:scaleY(1)}50%{opacity:.7;transform:scaleY(1.1)}to{opacity:.9;transform:scaleY(1)}}.health-bar-fill.damage-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_damage-flash .8s ease-in-out}@keyframes _ngcontent-%COMP%_damage-flash{0%{filter:brightness(1) contrast(1);transform:scale(1)}15%{filter:brightness(1.8) contrast(1.4);transform:scale(1.02)}30%{filter:brightness(.6) contrast(.8);transform:scale(.98)}45%{filter:brightness(1.4) contrast(1.2);transform:scale(1.01)}60%{filter:brightness(.9) contrast(1.1);transform:scale(.99)}80%{filter:brightness(1.1) contrast(1.05);transform:scale(1.005)}to{filter:brightness(1) contrast(1);transform:scale(1)}}[_nghost-%COMP%]     .dark-theme .health-bar-track{background-color:#424242;border-color:#666}[_nghost-%COMP%]     .dark-theme .health-bar-label{color:#e0e0e0}"]})};function Ua(i,e){if(i&1&&(m(0,"div",7),p(1),d()),i&2){let t=T();f(),B(t.opponentCardCount())}}function qa(i,e){if(i&1&&U(0,"app-card",10),i&2){let t=T();K("card",t.opponentActiveCard())("faceDown",!1)("glow",t.opponentCardGlow())("animationState",t.opponentCardAnimation())("fromPosition","deck")}}function Wa(i,e){if(i&1&&U(0,"app-card",10),i&2){let t=T();K("card",t.playerActiveCard())("faceDown",!1)("glow",t.playerCardGlow())("animationState",t.playerCardAnimation())("fromPosition","deck")}}function $a(i,e){if(i&1&&(m(0,"div",11),p(1),d()),i&2){let t=T();f(),ve(" Turn ",t.turnNumber()," ")}}function Ya(i,e){if(i&1&&(m(0,"div",12),p(1),d()),i&2){let t=T();f(),ve(" ",t.gameMessage()," ")}}function Ha(i,e){i&1&&(m(0,"div",13),p(1," Challenge? "),d())}function Qa(i,e){if(i&1&&(m(0,"div",7),p(1),d()),i&2){let t=T();f(),B(t.playerCardCount())}}var $t=class i{settingsService=ae(St);playerCardCount=x(26);opponentCardCount=x(26);playerActiveCard=x(null);opponentActiveCard=x(null);playerCardGlow=x(null);opponentCardGlow=x(null);playerCardsInDanger=x(0);opponentCardsInDanger=x(0);gameMessage=x(null);challengeAvailable=x(!1);canPlayerAct=x(!1);turnNumber=x(0);playerCardAnimation=x(null);opponentCardAnimation=x(null);playerHealthDamageAnimation=x(!1);opponentHealthDamageAnimation=x(!1);playerDeckClicked=Ct();onPlayerDeckClick(){this.canPlayerAct()&&this.playerDeckClicked.emit()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=H({type:i,selectors:[["app-game-board"]],inputs:{playerCardCount:[1,"playerCardCount"],opponentCardCount:[1,"opponentCardCount"],playerActiveCard:[1,"playerActiveCard"],opponentActiveCard:[1,"opponentActiveCard"],playerCardGlow:[1,"playerCardGlow"],opponentCardGlow:[1,"opponentCardGlow"],playerCardsInDanger:[1,"playerCardsInDanger"],opponentCardsInDanger:[1,"opponentCardsInDanger"],gameMessage:[1,"gameMessage"],challengeAvailable:[1,"challengeAvailable"],canPlayerAct:[1,"canPlayerAct"],turnNumber:[1,"turnNumber"],playerCardAnimation:[1,"playerCardAnimation"],opponentCardAnimation:[1,"opponentCardAnimation"],playerHealthDamageAnimation:[1,"playerHealthDamageAnimation"],opponentHealthDamageAnimation:[1,"opponentHealthDamageAnimation"]},outputs:{playerDeckClicked:"playerDeckClicked"},decls:22,vars:26,consts:[[1,"game-board"],[1,"player-area","opponent-area"],[1,"player-info"],["label","Opponent",3,"current","maximum","inDanger","showDamageAnimation"],[1,"player-deck-area"],[1,"deck-container"],[3,"card","faceDown"],[1,"deck-count"],[1,"table-area"],[1,"active-cards"],[3,"card","faceDown","glow","animationState","fromPosition"],[1,"turn-counter"],[1,"game-message"],[1,"challenge-prompt"],[1,"player-area","player-area-bottom"],[1,"deck-container",3,"click"],[3,"card","faceDown","glow"],["label","You",3,"current","maximum","inDanger","showDamageAnimation"]],template:function(t,n){t&1&&(m(0,"div",0)(1,"div",1)(2,"div",2),U(3,"app-health-bar",3),d(),m(4,"div",4)(5,"div",5),U(6,"app-card",6),D(7,Ua,2,1,"div",7),d()()(),m(8,"div",8)(9,"div",9),D(10,qa,1,5,"app-card",10),D(11,Wa,1,5,"app-card",10),d(),D(12,$a,2,1,"div",11),D(13,Ya,2,1,"div",12),D(14,Ha,2,0,"div",13),d(),m(15,"div",14)(16,"div",4)(17,"div",15),L("click",function(){return n.onPlayerDeckClick()}),U(18,"app-card",16),D(19,Qa,2,1,"div",7),d()(),m(20,"div",2),U(21,"app-health-bar",17),d()()()),t&2&&(f(3),K("current",n.opponentCardCount())("maximum",26)("inDanger",n.opponentCardsInDanger())("showDamageAnimation",n.opponentHealthDamageAnimation()),f(2),he("can-select",!1),f(),K("card",null)("faceDown",!0),f(),O(n.opponentCardCount()>1?7:-1),f(3),O(n.opponentActiveCard()?10:-1),f(),O(n.playerActiveCard()?11:-1),f(),O(n.settingsService.showTurnCounter()&&n.turnNumber()>0?12:-1),f(),O(n.gameMessage()?13:-1),f(),O(n.challengeAvailable()?14:-1),f(3),he("can-select",n.canPlayerAct())("glowing",n.canPlayerAct()),f(),K("card",null)("faceDown",!0)("glow",n.canPlayerAct()?"blue":null),f(),O(n.playerCardCount()>1?19:-1),f(2),K("current",n.playerCardCount())("maximum",26)("inDanger",n.playerCardsInDanger())("showDamageAnimation",n.playerHealthDamageAnimation()))},dependencies:[be,we,Wt],styles:[".game-board[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:1200px;height:100vh;max-height:800px;margin:0 auto;background:#2e7d32;color:#fff;overflow:hidden;position:relative}@media (max-width: 599px){.game-board[_ngcontent-%COMP%]{height:100dvh;max-height:none}}.player-area[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 4%;flex:0 0 auto;min-height:120px}@media (max-width: 959px){.player-area[_ngcontent-%COMP%]{padding:12px 6%;min-height:100px}}@media (max-width: 599px){.player-area[_ngcontent-%COMP%]{padding:12px 16px;min-height:80px}}@media (max-width: 359px){.player-area[_ngcontent-%COMP%]{padding:8px 12px;min-height:70px}}.opponent-area[_ngcontent-%COMP%]{border-bottom:2px solid rgba(255,255,255,.2)}.player-area-bottom[_ngcontent-%COMP%]{border-top:2px solid rgba(255,255,255,.2)}.player-info[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center}@media (max-width: 599px){.player-info[_ngcontent-%COMP%]{flex:0 0 auto;margin-right:12px}}.player-deck-area[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;align-items:center;justify-content:center}.deck-container[_ngcontent-%COMP%]{position:relative;cursor:pointer;transition:transform .3s ease-in-out}.deck-container.can-select[_ngcontent-%COMP%]{cursor:pointer}.deck-container.can-select[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.deck-container.can-select[_ngcontent-%COMP%]:active{transform:translateY(0)}.deck-container.glowing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_deck-glow 1.5s infinite}.deck-container[_ngcontent-%COMP%]   .deck-count[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-8px;background:#ffffffe6;color:#2e7d32;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;border:1px solid rgba(255,255,255,.3)}@media (max-width: 599px){.deck-container[_ngcontent-%COMP%]   .deck-count[_ngcontent-%COMP%]{width:18px;height:18px;font-size:9px}}@media (max-width: 359px){.deck-container[_ngcontent-%COMP%]   .deck-count[_ngcontent-%COMP%]{width:16px;height:16px;font-size:8px}}@keyframes _ngcontent-%COMP%_deck-glow{0%,to{transform:scale(1);filter:drop-shadow(0 0 8px rgba(33,150,243,.6))}50%{transform:scale(1.05);filter:drop-shadow(0 0 16px rgba(33,150,243,.8))}}.table-area[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;padding:20px 4%;min-height:300px}@media (max-width: 959px){.table-area[_ngcontent-%COMP%]{padding:16px 6%;min-height:250px}}@media (max-width: 599px){.table-area[_ngcontent-%COMP%]{padding:16px;min-height:200px}}@media (max-width: 359px){.table-area[_ngcontent-%COMP%]{padding:12px;min-height:150px}}.active-cards[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center;justify-content:center;margin-bottom:16px}@media (max-width: 599px){.active-cards[_ngcontent-%COMP%]{gap:16px;margin-bottom:12px}}@media (max-width: 359px){.active-cards[_ngcontent-%COMP%]{gap:12px;margin-bottom:8px}}.turn-counter[_ngcontent-%COMP%]{background:#0009;color:#fff;padding:6px 16px;border-radius:20px;font-size:14px;font-weight:500;text-align:center;margin-bottom:12px;display:inline-block;border:1px solid rgba(255,255,255,.2);min-width:80px}@media (max-width: 599px){.turn-counter[_ngcontent-%COMP%]{font-size:12px;padding:4px 12px;margin-bottom:8px}}@media (max-width: 359px){.turn-counter[_ngcontent-%COMP%]{font-size:11px;padding:3px 10px;margin-bottom:6px}}.game-message[_ngcontent-%COMP%]{background:#000000b3;color:#fff;padding:12px 20px;border-radius:8px;font-size:16px;font-weight:500;text-align:center;margin-bottom:12px;max-width:80%;box-shadow:0 4px 8px #0000004d}@media (max-width: 599px){.game-message[_ngcontent-%COMP%]{font-size:14px;padding:10px 16px;max-width:90%}}@media (max-width: 359px){.game-message[_ngcontent-%COMP%]{font-size:13px;padding:8px 12px;max-width:95%}}.challenge-prompt[_ngcontent-%COMP%]{background:#2196f3e6;color:#fff;padding:8px 16px;border-radius:6px;font-size:14px;font-weight:600;text-align:center;animation:_ngcontent-%COMP%_challenge-pulse 1s infinite alternate;box-shadow:0 2px 4px #0000004d}@media (max-width: 599px){.challenge-prompt[_ngcontent-%COMP%]{font-size:13px;padding:6px 12px}}@media (max-width: 359px){.challenge-prompt[_ngcontent-%COMP%]{font-size:12px;padding:4px 8px}}@keyframes _ngcontent-%COMP%_challenge-pulse{0%{opacity:.8;transform:scale(1)}to{opacity:1;transform:scale(1.05)}}@media (max-width: 599px){.player-area[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.player-info[_ngcontent-%COMP%]{order:1}.player-deck-area[_ngcontent-%COMP%]{order:2}}@media (max-width: 359px){.active-cards[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}[_nghost-%COMP%]     .dark-theme .game-board{background:#1b5e20}[_nghost-%COMP%]     .dark-theme .deck-count{background:#e0e0e0e6;color:#1b5e20}"]})};var Xa=["*",[["mat-toolbar-row"]]],Ja=["*","mat-toolbar-row"],Za=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=ii({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return i})(),Yt=(()=>{class i{_elementRef=ae(ei);_platform=ae(_i);_document=ae(gt);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=H({type:i,selectors:[["mat-toolbar"]],contentQueries:function(n,r,a){if(n&1&&oi(a,Za,5),n&2){let s;li(s=ci())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(n,r){n&2&&(et(r.color?"mat-"+r.color:""),he("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:Ja,decls:2,vars:0,template:function(n,r){n&1&&(si(Xa),dn(0),dn(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mat-button-text-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mat-button-outlined-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return i})();var Ht=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=ft({type:i});static \u0275inj=ht({imports:[pn,pn]})}return i})();function ns(i,e){i&1&&(m(0,"div",5)(1,"mat-icon",10),p(2,"delete_outline"),d(),m(3,"h3"),p(4,"No Cards Discarded"),d(),m(5,"p"),p(6,"Cards lost during gameplay will appear here."),d()())}function is(i,e){i&1&&p(0," Your Card ")}function rs(i,e){i&1&&p(0," Opponent's Card ")}function as(i,e){if(i&1&&(m(0,"div",18),p(1),d()),i&2){let t=T().$implicit;f(),ve("Turn ",t.turnNumber)}}function ss(i,e){if(i&1&&(m(0,"div",19),p(1),d()),i&2){let t=T().$implicit;f(),B(t.reason)}}function os(i,e){if(i&1&&(m(0,"div",13)(1,"div",14),U(2,"app-card",15),d(),m(3,"div",16)(4,"div",17),D(5,is,1,0)(6,rs,1,0),d(),D(7,as,2,1,"div",18),D(8,ss,2,1,"div",19),d()()),i&2){let t=e.$implicit;et("lost-by-"+t.playerType),f(2),K("card",t.card)("faceDown",!1),f(2),et(t.playerType),f(),O(t.playerType==="player"?5:6),f(2),O(t.turnNumber?7:-1),f(),O(t.reason?8:-1)}}function ls(i,e){if(i&1&&(m(0,"div",6)(1,"div",11),ze(2,os,9,9,"div",12,Be),d()()),i&2){let t=T();f(2),Ve(t.discardedCardInfos())}}function cs(i,e){if(i&1){let t=_e();m(0,"button",20),L("click",function(){Z(t);let r=T();return ee(r.scrollToTop())}),m(1,"mat-icon"),p(2,"keyboard_arrow_up"),d(),p(3," Back to Top "),d()}}var Qt=class i{constructor(e,t){this.dialogRef=e;this.data=t}discardedCards=N(()=>this.data.discardedCards||[]);discardedCardInfos=N(()=>this.discardedCards().map((e,t)=>({card:e,playerType:t%2===0?"player":"opponent",turnNumber:t+1,reason:t%3===0?"Lost in normal turn":t%3===1?"Lost in challenge":"Lost in battle"})));close(){this.dialogRef.close()}scrollToTop(){let e=document.querySelector(".cards-scroll");e&&(e.scrollTop=0)}static \u0275fac=function(t){return new(t||i)(me(Ti),me(xi))};static \u0275cmp=H({type:i,selectors:[["app-discard-pile-viewer"]],decls:18,vars:3,consts:[[1,"title"],[1,"spacer"],[1,"card-count"],["mat-icon-button","",3,"click"],[1,"dialog-content"],[1,"empty-state"],[1,"cards-container"],[1,"dialog-actions"],["mat-button","",3,"click"],["mat-raised-button","","color","primary"],[1,"empty-icon"],[1,"cards-scroll"],[1,"card-item",3,"class"],[1,"card-item"],[1,"card-wrapper"],[3,"card","faceDown"],[1,"card-info"],[1,"player-indicator"],[1,"turn-info"],[1,"reason"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,n){t&1&&(m(0,"mat-toolbar")(1,"span",0)(2,"mat-icon"),p(3,"delete"),d(),p(4," Discard Pile "),d(),U(5,"span",1),m(6,"span",2),p(7),d(),m(8,"button",3),L("click",function(){return n.close()}),m(9,"mat-icon"),p(10,"close"),d()()(),m(11,"div",4),D(12,ns,7,0,"div",5)(13,ls,4,0,"div",6),d(),m(14,"div",7)(15,"button",8),L("click",function(){return n.close()}),p(16,"Close"),d(),D(17,cs,4,0,"button",9),d()),t&2&&(f(7),ve("",n.discardedCards().length," cards"),f(5),O(n.discardedCards().length===0?12:13),f(5),O(n.discardedCards().length>0?17:-1))},dependencies:[be,Oi,je,bt,vt,Et,wt,Ht,Yt,we],styles:[".title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:500}.spacer[_ngcontent-%COMP%]{flex:1}.card-count[_ngcontent-%COMP%]{font-size:.9em;opacity:.8}.dialog-content[_ngcontent-%COMP%]{max-height:70vh;min-height:300px;padding:0;overflow:hidden}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:300px;text-align:center;color:#0009}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.3}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-weight:400}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9em}.cards-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.cards-scroll[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:12px}.card-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:12px;border-radius:8px;border:1px solid rgba(0,0,0,.12);background-color:#00000005;transition:all .2s ease}.card-item[_ngcontent-%COMP%]:hover{background-color:#0000000a}.card-item.lost-by-player[_ngcontent-%COMP%]{border-left:4px solid #f44336}.card-item.lost-by-opponent[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.card-wrapper[_ngcontent-%COMP%]{flex-shrink:0}.card-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.player-indicator[_ngcontent-%COMP%]{font-weight:500;font-size:.9em}.player-indicator.player[_ngcontent-%COMP%]{color:#f44336}.player-indicator.opponent[_ngcontent-%COMP%]{color:#4caf50}.turn-info[_ngcontent-%COMP%]{font-size:.8em;opacity:.7}.reason[_ngcontent-%COMP%]{font-size:.8em;font-style:italic;opacity:.8}.dialog-actions[_ngcontent-%COMP%]{padding:16px;display:flex;justify-content:space-between;align-items:center;border-top:1px solid rgba(0,0,0,.12)}@media (max-width: 599px){.card-item[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:8px}.card-info[_ngcontent-%COMP%]{align-items:center}.dialog-actions[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.dark-theme[_nghost-%COMP%]   .card-item[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .card-item[_ngcontent-%COMP%]{border-color:#ffffff1f;background-color:#ffffff05}.dark-theme[_nghost-%COMP%]   .card-item[_ngcontent-%COMP%]:hover, .dark-theme   [_nghost-%COMP%]   .card-item[_ngcontent-%COMP%]:hover{background-color:#ffffff0a}.dark-theme[_nghost-%COMP%]   .empty-state[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .empty-state[_ngcontent-%COMP%]{color:#fff9}.dark-theme[_nghost-%COMP%]   .dialog-actions[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{border-top-color:#ffffff1f}"]})};var Ne=class i{cards=[];constructor(e){e?this.cards=[...e]:this.initializeStandardDeck()}initializeStandardDeck(){let e=Object.values(qt),t=Object.values(ke);for(let n of e)for(let r of t)this.cards.push(new Ye(n,r))}static createRedDeck(){let e=[],t=["hearts","diamonds"],n=Object.values(ke);for(let r of t)for(let a of n)e.push(new Ye(r,a));return new i(e)}static createBlackDeck(){let e=[],t=["clubs","spades"],n=Object.values(ke);for(let r of t)for(let a of n)e.push(new Ye(r,a));return new i(e)}shuffle(){for(let e=this.cards.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[this.cards[e],this.cards[t]]=[this.cards[t],this.cards[e]]}}draw(){return this.cards.pop()||null}drawMultiple(e){let t=[];for(let n=0;n<e&&this.cards.length>0;n++){let r=this.draw();r&&t.push(r)}return t}addCard(e){this.cards.unshift(e)}addCards(e){this.cards.unshift(...e)}get count(){return this.cards.length}get isEmpty(){return this.cards.length===0}get hasMinimumForBattle(){return this.cards.length>=4}peek(){return this.cards[this.cards.length-1]||null}toArray(){return[...this.cards]}copy(){return new i([...this.cards])}reset(){this.cards=[]}};var ue=class i{playerDeck=b(Ne.createRedDeck());opponentDeck=b(Ne.createBlackDeck());discardPile=b([]);gamePhase=b("setup");turnNumber=b(0);activeTurn=b(null);winner=b(null);isPlayerTurn=b(!0);canChallenge=b(!1);lastResult=b(null);playerCardCount=N(()=>this.playerDeck().count);opponentCardCount=N(()=>this.opponentDeck().count);discardedCardCount=N(()=>this.discardPile().length);discardedCards=N(()=>[...this.discardPile()]);gameStats=N(()=>({turnNumber:this.turnNumber(),playerCardCount:this.playerCardCount(),opponentCardCount:this.opponentCardCount(),discardedCardCount:this.discardedCardCount()}));gameState=N(()=>({phase:this.gamePhase(),stats:this.gameStats(),activeTurn:this.activeTurn(),winner:this.winner(),isPlayerTurn:this.isPlayerTurn(),canChallenge:this.canChallenge(),lastResult:this.lastResult()}));get currentPhase(){return this.gamePhase()}get currentStats(){return this.gameStats()}get currentState(){return this.gameState()}get currentPlayerDeck(){return this.playerDeck()}get currentOpponentDeck(){return this.opponentDeck()}get currentDiscardPile(){return this.discardPile()}initializeGame(){this.playerDeck.set(Ne.createRedDeck()),this.opponentDeck.set(Ne.createBlackDeck()),this.discardPile.set([]),this.gamePhase.set("setup"),this.turnNumber.set(0),this.activeTurn.set(null),this.winner.set(null),this.isPlayerTurn.set(!0),this.canChallenge.set(!1),this.lastResult.set(null),this.playerDeck().shuffle(),this.opponentDeck().shuffle(),this.gamePhase.set("normal")}startTurn(){if(this.gamePhase()!=="normal")throw new Error("Cannot start turn in current phase");if(this.playerDeck().isEmpty||this.opponentDeck().isEmpty)return this.endGame(),{playerCard:null,opponentCard:null};let e=this.drawPlayerCard(),t=this.drawOpponentCard();return!e||!t?(this.endGame(),{playerCard:null,opponentCard:null}):(this.turnNumber.update(n=>n+1),this.activeTurn.set({playerCard:e,opponentCard:t,phase:"normal"}),{playerCard:e,opponentCard:t})}setPhase(e){this.gamePhase.set(e)}setChallengeAvailable(e){this.canChallenge.set(e)}setActiveTurn(e){this.activeTurn.set(e)}addToDiscardPile(e){this.discardPile.update(t=>[...t,...e]),this.validateDeckCounts()}returnCardsToPlayerDeck(e){let t=this.playerDeck().copy();t.addCards(e),this.playerDeck.set(t),this.validateDeckCounts()}returnCardsToOpponentDeck(e){let t=this.opponentDeck().copy();t.addCards(e),this.opponentDeck.set(t),this.validateDeckCounts()}validateDeckCounts(){let e=this.playerDeck().count,t=this.opponentDeck().count;if(e>26||t>26)throw console.error(`Invalid deck count detected: Player(${e}) Opponent(${t})`),new Error(`Invalid deck count: Player(${e}) Opponent(${t}) - No deck should exceed 26 cards`)}drawPlayerCard(){let e=this.playerDeck().copy(),t=e.draw();return this.playerDeck.set(e),t}drawOpponentCard(){let e=this.opponentDeck().copy(),t=e.draw();return this.opponentDeck.set(e),t}setLastResult(e){this.lastResult.set(e)}endGame(){this.gamePhase.set("game_over"),this.playerCardCount()===0?this.winner.set("opponent"):this.opponentCardCount()===0?this.winner.set("player"):this.winner.set(this.playerCardCount()>this.opponentCardCount()?"player":"opponent"),this.activeTurn.set(null),this.canChallenge.set(!1)}checkGameEndConditions(){return this.playerCardCount()===0||this.opponentCardCount()===0?(this.endGame(),!0):this.gamePhase()==="battle"&&(!this.playerDeck().hasMinimumForBattle||!this.opponentDeck().hasMinimumForBattle)?(this.endGame(),!0):!1}reset(){this.initializeGame()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};var Zt=class i{compareCards(e,t){return this.isSpecialAceVsTwoRule(e,t)?e.rank==="2"?"player_wins":"opponent_wins":e.value>t.value?"player_wins":e.value<t.value?"opponent_wins":"tie"}isSpecialAceVsTwoRule(e,t){let n=e.rank==="A"||t.rank==="A",r=e.rank==="2"||t.rank==="2";return n&&r}compareMultipleCards(e,t){if(e.length!==t.length)throw new Error("Card arrays must be the same length for comparison");if(e.length===1&&t.length===1)return this.compareCards(e[0],t[0]);throw new Error("Multiple card comparison not yet implemented for arrays > 1")}getHigherCard(e,t){switch(this.compareCards(e,t)){case"player_wins":return e;case"opponent_wins":return t;case"tie":return e}}areCardsEqual(e,t){return this.compareCards(e,t)==="tie"}static \u0275fac=function(t){return new(t||i)};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};var He=class i{constructor(e,t){this.gameStateService=e;this.cardComparisonService=t}resolveTurn(e,t){switch(this.cardComparisonService.compareCards(e,t)){case"player_wins":return this.resolveNormalWin(e,t,"player");case"opponent_wins":return this.resolveNormalLoss(e,t,"opponent");case"tie":return this.resolveTie(e,t)}}resolveNormalWin(e,t,n){let r=n==="player"?[e]:[t],a=n==="player"?[t]:[e];n==="player"?this.gameStateService.returnCardsToPlayerDeck([e]):this.gameStateService.returnCardsToOpponentDeck([t]),this.gameStateService.addToDiscardPile(a);let s=n==="opponent";return{winner:n,result:n==="player"?"player_wins":"opponent_wins",message:n==="player"?"You win this turn!":"Opponent wins this turn!",cardsLost:a,cardsKept:r,nextPhase:s?"challenge":"normal",canChallenge:s}}resolveNormalLoss(e,t,n){return this.resolveNormalWin(e,t,n)}resolveTie(e,t){return!this.gameStateService.currentPlayerDeck.hasMinimumForBattle||!this.gameStateService.currentOpponentDeck.hasMinimumForBattle?(this.gameStateService.endGame(),{winner:null,result:"tie",message:"Battle cannot be conducted - insufficient cards. Game ends.",cardsLost:[e,t],cardsKept:[],nextPhase:"game_over",canChallenge:!1}):{winner:null,result:"tie",message:"Cards tie! Preparing for battle...",cardsLost:[],cardsKept:[e,t],nextPhase:"battle",canChallenge:!1}}resolveChallenge(e,t,n){let r=this.cardComparisonService.compareCards(n,t);return r==="player_wins"?(this.gameStateService.returnCardsToPlayerDeck([e,n]),this.gameStateService.addToDiscardPile([t]),{winner:"player",result:"player_wins",message:"Challenge successful! You keep your cards.",cardsLost:[t],cardsKept:[e,n],nextPhase:"normal",canChallenge:!1}):(this.gameStateService.addToDiscardPile([e,n]),this.gameStateService.returnCardsToOpponentDeck([t]),{winner:"opponent",result:r==="tie"?"tie":"opponent_wins",message:r==="tie"?"Challenge ties! You lose your cards.":"Challenge failed! You lose your cards.",cardsLost:[e,n],cardsKept:[t],nextPhase:r==="tie"?"battle":"normal",canChallenge:!1})}resolveBattle(e,t,n,r,a,s){let o=this.cardComparisonService.compareCards(a,s),l=[e,...n],c=[t,...r];return o==="player_wins"?(this.gameStateService.returnCardsToPlayerDeck(l),this.gameStateService.addToDiscardPile(c),{winner:"player",result:"player_wins",message:"You win the battle! All opponent cards discarded.",cardsLost:c,cardsKept:l,nextPhase:"normal",canChallenge:!1}):o==="opponent_wins"?(this.gameStateService.addToDiscardPile(l),this.gameStateService.returnCardsToOpponentDeck(c),{winner:"opponent",result:"opponent_wins",message:"Opponent wins the battle! All your cards discarded.",cardsLost:l,cardsKept:c,nextPhase:"normal",canChallenge:!1}):!this.gameStateService.currentPlayerDeck.hasMinimumForBattle||!this.gameStateService.currentOpponentDeck.hasMinimumForBattle?(this.gameStateService.addToDiscardPile([...l,...c]),this.gameStateService.endGame(),{winner:null,result:"tie",message:"Another tie in battle, but insufficient cards for another battle. Game ends.",cardsLost:[...l,...c],cardsKept:[],nextPhase:"game_over",canChallenge:!1}):{winner:null,result:"tie",message:"Battle ties again! Another battle required.",cardsLost:[],cardsKept:[...l,...c],nextPhase:"battle",canChallenge:!1}}checkWinConditions(){return this.gameStateService.checkGameEndConditions()}static \u0275fac=function(t){return new(t||i)(V(ue),V(Zt))};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};var Qe=class i{progressData={project:{name:"War of Attrition Game",version:"Angular 20.1.6",type:"Progressive Web Application"},currentMilestone:{number:7,name:"Testing & Polish",status:"IN_PROGRESS",emoji:"\u{1F9EA}"},milestones:[{number:1,name:"Foundation & Setup",status:"COMPLETED",progress:100,items:[{name:"Basic Angular/PWA setup",status:"COMPLETED"},{name:"Theme toggle implementation",status:"COMPLETED"},{name:"Routing structure",status:"COMPLETED"},{name:"Responsive layout foundation",status:"PARTIALLY_COMPLETED"}]},{number:2,name:"Core Game Engine",status:"COMPLETED",progress:100,items:[{name:"Card & Deck Models",status:"COMPLETED",description:"Complete TypeScript interfaces and classes"},{name:"Game State Management",status:"COMPLETED",description:"Angular signals-based reactive state"},{name:"Card Comparison Logic",status:"COMPLETED",description:"All rules including special Ace vs 2 rule"},{name:"Turn Resolution Engine",status:"COMPLETED",description:"Normal turns, challenges, and battles"},{name:"Comprehensive Tests",status:"COMPLETED",description:"60 passing tests covering all game logic"}]},{number:3,name:"Basic UI Components",status:"COMPLETED",progress:100,items:[{name:"Game Board Layout",status:"COMPLETED"},{name:"Card Component",status:"COMPLETED"},{name:"Health Bar Component",status:"COMPLETED"},{name:"Player Action Indicators",status:"COMPLETED"}]},{number:4,name:"Game Mechanics Implementation",status:"COMPLETED",progress:100,items:[{name:"Basic Turn Flow",status:"COMPLETED"},{name:"Challenge System",status:"COMPLETED"},{name:"Battle System",status:"COMPLETED"},{name:"Game End Conditions",status:"COMPLETED"}]},{number:5,name:"Visual Polish & Animations",status:"COMPLETED",progress:100,items:[{name:"Material Icons Implementation",status:"COMPLETED",description:"Navigation and theme toggle icons implemented"},{name:"Theme Toggle Enhancement",status:"COMPLETED",description:"Lightbulb metaphor with lit/unlit states"},{name:"Card Animations",status:"COMPLETED",description:"Slide-in, flip, and clash animations implemented"},{name:"Health Bar Damage Animations",status:"COMPLETED",description:"Enhanced flash effects and danger pulse animations"},{name:"Enhanced UI Polish",status:"COMPLETED",description:"Card fall-away animations and responsive layout improvements"},{name:"Responsive Layout Optimization",status:"COMPLETED",description:"Game board now utilizes available viewport space effectively"}]},{number:6,name:"Settings & Customization",status:"COMPLETED",progress:100,items:[{name:"Settings Menu Implementation",status:"COMPLETED",description:"Comprehensive settings interface with tabs"},{name:"Card Backing Customization",status:"COMPLETED",description:"Multiple card backing design options"},{name:"Discard Pile Viewer",status:"COMPLETED",description:"Modal dialog showing discarded cards with metadata"},{name:"Game Statistics Tracking",status:"COMPLETED",description:"Turn counter and game session statistics"}]},{number:7,name:"Testing & Polish",status:"IN_PROGRESS",progress:40,items:[{name:"Unit Testing Suite",status:"IN_PROGRESS",description:"Component tests for health-bar, action-indicator, and card components"},{name:"Integration Testing",status:"NOT_STARTED",description:"Game flow and UI interaction tests"},{name:"Performance Optimization",status:"IN_PROGRESS",description:"Bundle size optimization and animation performance"},{name:"Accessibility & Final Polish",status:"IN_PROGRESS",description:"Error handling improvements and code quality"}]}],testMetrics:{totalTests:135,passingTests:135,coverage:"comprehensive"},nextSteps:{immediate:"Continue Milestone 7: Testing & Polish - Complete remaining component tests and integration tests",priority:"Integration testing, performance optimization, and accessibility enhancements"},features:{implemented:["Card and Deck models with proper typing","Game state management with Angular signals","Card comparison logic (including Ace vs 2 rule)","Turn resolution engine","Challenge and battle mechanics","Win condition checking","Comprehensive test coverage","Complete game UI with responsive game board","Health bar system with color coding","Interactive card components","Full turn flow implementation","Challenge system (Accept/Decline)","Battle system with card selection","Game end condition handling","Material Icons for navigation (casino/dice, settings gear)","Enhanced theme toggle with lightbulb metaphor","Local Material Icons font integration","Card slide and flip animations","Battle clash visual effects with shake animations","Health bar damage animations with enhanced flash effects","Dynamic animation system for card states","Responsive layout optimization for better viewport utilization","Card fall-away animations for discarded cards","Settings menu with comprehensive customization options","Card backing customization with multiple design choices","Discard pile viewer with detailed card metadata","Game statistics tracking and session monitoring","Comprehensive unit test suite for UI components","Enhanced error handling and code quality improvements"],nextMilestone:["Integration testing for game flow scenarios","Performance optimization for bundle size","Accessibility enhancements (keyboard navigation, ARIA)","Additional edge case testing and validation"]}};getProgressData(){return this.progressData}getCurrentMilestone(){return this.progressData.currentMilestone}getMilestones(){return this.progressData.milestones}getCompletedMilestone(e){return this.progressData.milestones.find(t=>t.number===e)}getImplementedFeatures(){return this.progressData.features.implemented}getTestMetrics(){return this.progressData.testMetrics}getNextSteps(){return this.progressData.nextSteps}generateDemoLog(){let e=[],t=this.getProgressData(),n=this.getCurrentMilestone(),r=this.getCompletedMilestone(2);return e.push(`\u{1F3AE} ${t.project.name} Demo`),e.push("====================================="),e.push(""),e.push("\u2705 Game initialized"),e.push(""),e.push("\u{1F527} Core Game Engine Features Verified:"),r&&r.items.forEach(a=>{e.push(`   \u2705 ${a.description||a.name}`)}),e.push(""),e.push(`\u{1F680} Ready for ${t.nextSteps.immediate}!`),e}static \u0275fac=function(t){return new(t||i)};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};var en=class i{constructor(e,t,n){this.gameStateService=e;this.turnResolutionService=t;this.progressService=n}runGameDemo(){let e=[];e.push("\u{1F3AE} War of Attrition Game Engine Demo"),e.push("====================================="),this.gameStateService.initializeGame(),e.push("\u2705 Game initialized"),e.push(`   Player cards: ${this.gameStateService.currentStats.playerCardCount}`),e.push(`   Opponent cards: ${this.gameStateService.currentStats.opponentCardCount}`),e.push(`   Game phase: ${this.gameStateService.currentPhase}`),e.push("");for(let r=1;r<=3;r++){if(e.push(`\u{1F3AF} Turn ${r}:`),this.gameStateService.currentPhase==="game_over"){e.push("   Game has ended!");break}this.gameStateService.currentPhase!=="normal"&&this.gameStateService.setPhase("normal");let{playerCard:a,opponentCard:s}=this.gameStateService.startTurn();if(!a||!s){e.push("   Cannot draw cards - game ended");break}e.push(`   Player drew: ${a.toString()}`),e.push(`   Opponent drew: ${s.toString()}`);let o=this.turnResolutionService.resolveTurn(a,s);if(e.push(`   Result: ${o.message}`),e.push(`   Winner: ${o.winner||"None (tie)"}`),e.push(`   Next phase: ${o.nextPhase}`),e.push(`   Cards kept: ${o.cardsKept.length}`),e.push(`   Cards lost: ${o.cardsLost.length}`),this.gameStateService.setPhase("normal"),this.gameStateService.setChallengeAvailable(!1),e.push(`   Current cards - Player: ${this.gameStateService.currentStats.playerCardCount}, Opponent: ${this.gameStateService.currentStats.opponentCardCount}`),e.push(""),this.turnResolutionService.checkWinConditions()){e.push(`\u{1F3C6} Game ended! Winner: ${this.gameStateService.currentState.winner}`);break}}let t=this.progressService.getProgressData(),n=this.progressService.getCompletedMilestone(2);return e.push("\u{1F527} Core Game Engine Features Verified:"),n&&n.items.forEach(r=>{e.push(`   \u2705 ${r.description||r.name}`)}),e.push(""),e.push(`\u{1F680} ${t.nextSteps.immediate}!`),e}static \u0275fac=function(t){return new(t||i)(V(ue),V(He),V(Qe))};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};var tn=class i{constructor(e,t){this.gameStateService=e;this.turnResolutionService=t}gameMessage=b("Click your deck to begin!");challengeAvailable=b(!1);showChallenge=b(!1);challengeCard=b(null);showChallengeCard=b(!1);battleCards=b([]);opponentBattleCards=b([]);battlePhase=b("setup");canPlayerAct=b(!1);get message(){return this.gameMessage()}get canChallenge(){return this.challengeAvailable()}get showChallengePrompt(){return this.showChallenge()}get currentChallengeCard(){return this.challengeCard()}get showChallengeCardDisplay(){return this.showChallengeCard()}get playerCanAct(){return this.canPlayerAct()}get currentBattleCards(){return this.battleCards()}get currentOpponentBattleCards(){return this.opponentBattleCards()}get currentBattlePhase(){return this.battlePhase()}startNewGame(){this.gameStateService.initializeGame(),this.gameMessage.set("Click your deck to begin!"),this.challengeAvailable.set(!1),this.showChallenge.set(!1),this.challengeCard.set(null),this.showChallengeCard.set(!1),this.battleCards.set([]),this.opponentBattleCards.set([]),this.battlePhase.set("setup"),this.canPlayerAct.set(!0)}playerDrawCard(){if(!this.canPlayerAct()||this.gameStateService.currentPhase!=="normal")return!1;try{let{playerCard:e,opponentCard:t}=this.gameStateService.startTurn();if(!e||!t)return!1;let n=this.turnResolutionService.resolveTurn(e,t);return this.handleTurnResult(n),!0}catch(e){return console.error("Error during turn:",e),!1}}handleChallenge(e){if(this.challengeAvailable()){if(!e){let t=this.gameStateService.currentState.activeTurn;t&&t.playerCard&&(this.gameStateService.addToDiscardPile([t.playerCard]),t.opponentCard&&this.gameStateService.returnCardsToOpponentDeck([t.opponentCard])),this.gameMessage.set("You declined the challenge. Your card is discarded."),this.showChallenge.set(!1),this.challengeAvailable.set(!1),this.canPlayerAct.set(!0);return}try{let t=this.gameStateService.drawPlayerCard();if(!t){this.gameMessage.set("Cannot draw card for challenge!");return}this.challengeCard.set(t),this.showChallenge.set(!1),this.showChallengeCard.set(!0),this.gameMessage.set("Your challenge card is revealed! Proceed with the challenge?"),this.canPlayerAct.set(!1);let n=this.gameStateService.currentState.activeTurn;n&&(n.challengeCard=t,this.gameStateService.setActiveTurn(n))}catch(t){console.error("Error during challenge:",t),this.gameMessage.set("Error during challenge!")}}}confirmChallenge(){if(this.challengeCard())try{let e=this.gameStateService.currentState.activeTurn;if(!e||!e.playerCard||!e.opponentCard){this.gameMessage.set("No active turn for challenge!");return}let t=this.turnResolutionService.resolveChallenge(e.playerCard,e.opponentCard,this.challengeCard());this.challengeCard.set(null),this.showChallengeCard.set(!1),this.challengeAvailable.set(!1),this.handleTurnResult(t)}catch(e){console.error("Error during challenge resolution:",e),this.gameMessage.set("Error during challenge resolution!")}}selectBattleCard(e){if(this.battlePhase()==="selection")try{let t=this.gameStateService.currentState.activeTurn;if(!t||!t.playerCard||!t.opponentCard)return;let n=this.opponentBattleCards()[Math.floor(Math.random()*this.opponentBattleCards().length)],r=this.turnResolutionService.resolveBattle(t.playerCard,t.opponentCard,this.battleCards(),this.opponentBattleCards(),e,n);this.handleTurnResult(r)}catch(t){console.error("Error during battle:",t),this.gameMessage.set("Error during battle!")}}handleTurnResult(e){switch(this.gameMessage.set(e.message),e.nextPhase){case"normal":this.canPlayerAct.set(!0),this.challengeAvailable.set(!1),this.showChallenge.set(!1),this.battleCards.set([]),this.opponentBattleCards.set([]),this.battlePhase.set("setup");break;case"challenge":this.canPlayerAct.set(!1),this.challengeAvailable.set(e.canChallenge),this.showChallenge.set(e.canChallenge);break;case"battle":this.setupBattle();break;case"game_over":this.canPlayerAct.set(!1),this.challengeAvailable.set(!1),this.showChallenge.set(!1);break}}setupBattle(){this.canPlayerAct.set(!1),this.battlePhase.set("setup");let e=[],t=[];for(let n=0;n<3;n++){let r=this.gameStateService.drawPlayerCard(),a=this.gameStateService.drawOpponentCard();r&&e.push(r),a&&t.push(a)}this.battleCards.set(e),this.opponentBattleCards.set(t),this.battlePhase.set("selection"),this.gameMessage.set("Battle! Select one of the opponent's face-down cards.")}getGameStats(){return this.gameStateService.currentStats}getGameState(){return this.gameStateService.currentState}static \u0275fac=function(t){return new(t||i)(V(ue),V(He))};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};function us(i,e){if(i&1){let t=_e();m(0,"div",3)(1,"mat-card",10)(2,"mat-card-header")(3,"mat-card-title"),p(4,"Challenge Available!"),d(),m(5,"mat-card-subtitle"),p(6,"Do you want to challenge the result?"),d()(),m(7,"mat-card-content")(8,"p"),p(9,"You lost this round, but you can draw an additional card to challenge the result."),d(),m(10,"p")(11,"strong"),p(12,"Risk:"),d(),p(13," If you lose the challenge, you lose both cards!"),d()(),m(14,"mat-card-actions")(15,"button",6),L("click",function(){Z(t);let r=T(2);return ee(r.acceptChallenge())}),p(16," Accept Challenge "),d(),m(17,"button",9),L("click",function(){Z(t);let r=T(2);return ee(r.declineChallenge())}),p(18," Decline "),d()()()()}}function hs(i,e){if(i&1&&U(0,"app-card",12),i&2){let t=T(3);K("card",t.challengeCard())("glow","blue")("animationState","flip")}}function gs(i,e){if(i&1){let t=_e();m(0,"div",3)(1,"mat-card",10)(2,"mat-card-header")(3,"mat-card-title"),p(4,"Your Challenge Card"),d(),m(5,"mat-card-subtitle"),p(6,"This is the card you drew for your challenge"),d()(),m(7,"mat-card-content")(8,"div",11),D(9,hs,1,3,"app-card",12),d(),m(10,"p")(11,"strong"),p(12,"This is your challenge card! You are now committed to the challenge."),d()(),m(13,"p")(14,"strong"),p(15,"Your challenge card will be compared against the opponent's original winning card."),d()()(),m(16,"mat-card-actions")(17,"button",6),L("click",function(){Z(t);let r=T(2);return ee(r.confirmChallenge())}),p(18," Continue with Challenge "),d()()()()}if(i&2){let t=T(2);f(9),O(t.challengeCard()?9:-1)}}function fs(i,e){if(i&1){let t=_e();m(0,"app-card",19),L("cardClicked",function(){let r=Z(t).$implicit,a=T(3);return ee(a.onBattleCardSelect(r))}),d()}i&2&&K("card",null)("faceDown",!0)("glow","blue")("clickable",!0)}function ys(i,e){i&1&&U(0,"app-card",18),i&2&&K("card",null)("faceDown",!0)}function Cs(i,e){if(i&1&&(m(0,"div",4)(1,"mat-card",13)(2,"mat-card-header")(3,"mat-card-title"),p(4,"Battle Time!"),d(),m(5,"mat-card-subtitle"),p(6,"Select one of the opponent's face-down cards"),d()(),m(7,"mat-card-content")(8,"p"),p(9,"Cards are tied! Both players have placed 3 cards face-down for battle."),d(),m(10,"div",14)(11,"h4"),p(12,"Opponent's Cards (Select One):"),d(),m(13,"div",15),ze(14,fs,1,4,"app-card",16,Be),d(),m(16,"h4"),p(17,"Your Cards in Battle:"),d(),m(18,"div",17),ze(19,ys,1,2,"app-card",18,Be),d()()()()()),i&2){let t=T(2);f(14),Ve(t.opponentBattleCards()),f(5),Ve(t.battleCards())}}function _s(i,e){if(i&1&&(m(0,"span",8),p(1),d()),i&2){let t=T(2);f(),ve("(",t.gameStateService.discardedCardCount(),")")}}function vs(i,e){if(i&1){let t=_e();m(0,"app-game-board",2),L("playerDeckClicked",function(){Z(t);let r=T();return ee(r.onPlayerDeckClick())}),d(),D(1,us,19,0,"div",3),D(2,gs,19,1,"div",3),D(3,Cs,21,0,"div",4),m(4,"div",5)(5,"button",6),L("click",function(){Z(t);let r=T();return ee(r.startNewGame())}),p(6," New Game "),d(),m(7,"button",7),L("click",function(){Z(t);let r=T();return ee(r.openDiscardPileViewer())}),p(8," Discard Pile "),D(9,_s,2,1,"span",8),d(),m(10,"button",9),L("click",function(){Z(t);let r=T();return ee(r.toggleDemo())}),p(11," Show Old Demo "),d()()}if(i&2){let t=T();K("playerCardCount",t.playerCardCount())("opponentCardCount",t.opponentCardCount())("playerActiveCard",t.playerActiveCard())("opponentActiveCard",t.opponentActiveCard())("playerCardGlow",t.playerCardGlow())("opponentCardGlow",t.opponentCardGlow())("playerCardAnimation",t.playerCardAnimation())("opponentCardAnimation",t.opponentCardAnimation())("playerHealthDamageAnimation",t.playerHealthDamageAnimation())("opponentHealthDamageAnimation",t.opponentHealthDamageAnimation())("gameMessage",t.gameMessage())("challengeAvailable",t.challengeAvailable())("canPlayerAct",t.canPlayerAct())("turnNumber",t.gameStateService.gameStats().turnNumber),f(),O(t.showChallengePrompt()?1:-1),f(),O(t.showChallengeCardDisplay()?2:-1),f(),O(t.showBattleUI()?3:-1),f(6),O(t.gameStateService.discardedCardCount()>0?9:-1)}}function bs(i,e){if(i&1&&(m(0,"div",21),p(1),d()),i&2){let t=e.$implicit;f(),B(t)}}function Ss(i,e){if(i&1){let t=_e();m(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title"),p(3,"War of Attrition - Milestone 3 Complete! \u{1F389}"),d(),m(4,"mat-card-subtitle"),p(5,"Basic UI Components Implementation"),d()(),m(6,"mat-card-content")(7,"p")(8,"strong"),p(9,"Milestone 3 has been successfully completed!"),d(),p(10," Core UI components are implemented and functional."),d(),m(11,"h3"),p(12,"New UI Components:"),d(),m(13,"ul")(14,"li")(15,"strong"),p(16,"Game Board Layout:"),d(),p(17," Head-to-head player layout with solitaire green background"),d(),m(18,"li")(19,"strong"),p(20,"Card Component:"),d(),p(21," Visual card representation with red/black suits and glow effects"),d(),m(22,"li")(23,"strong"),p(24,"Health Bar Component:"),d(),p(25," Color-coded health bars (Green\u2192Yellow\u2192Orange\u2192Red)"),d(),m(26,"li")(27,"strong"),p(28,"Action Indicators:"),d(),p(29," Blue glow effects for player actions"),d()(),m(30,"h3"),p(31,"Previous - Game Engine Demo:"),d(),m(32,"div",20),ze(33,bs,2,1,"div",21,Be),d()(),m(35,"mat-card-actions")(36,"button",6),L("click",function(){Z(t);let r=T();return ee(r.toggleDemo())}),p(37," Show New Game Board "),d(),m(38,"button",6),L("click",function(){Z(t);let r=T();return ee(r.runDemo())}),p(39,"Run Demo Again"),d(),m(40,"button",22),p(41,"Settings"),d()()()}if(i&2){let t=T();f(33),Ve(t.demoLog())}}var nn=class i{constructor(e,t,n,r,a,s){this.gameDemoService=e;this.gameController=t;this.progressService=n;this.gameStateService=r;this.settingsService=a;this.dialog=s;this.progressData=this.progressService.getProgressData(),this.currentMilestone=this.progressService.getCurrentMilestone(),this.completedMilestone=this.progressService.getCompletedMilestone(3),this.gameController.startNewGame(),this.updateGameState()}demoLog=b([]);showOldDemo=b(!1);showGameBoard=b(!0);gameStartTime=null;gameStats=b(this.getInitialGameStats());gameState=b(this.getInitialGameState());gameMessage=b("Click your deck to begin!");challengeAvailable=b(!1);canPlayerAct=b(!0);showChallengePrompt=b(!1);challengeCard=b(null);showChallengeCardDisplay=b(!1);playerCardCount=N(()=>this.gameStateService.playerCardCount());opponentCardCount=N(()=>this.gameStateService.opponentCardCount());playerActiveCard=b(null);opponentActiveCard=b(null);playerCardGlow=b(null);opponentCardGlow=b(null);playerCardAnimation=b(null);opponentCardAnimation=b(null);playerHealthDamageAnimation=b(!1);opponentHealthDamageAnimation=b(!1);battleCards=b([]);opponentBattleCards=b([]);battlePhase=b("setup");showBattleUI=b(!1);progressData;currentMilestone;completedMilestone;getInitialGameStats(){return{turnNumber:0,playerCardCount:26,opponentCardCount:26,discardedCardCount:0}}getInitialGameState(){return{phase:"setup",stats:this.getInitialGameStats(),activeTurn:null,winner:null,isPlayerTurn:!0,canChallenge:!1,lastResult:null}}ngOnInit(){this.showOldDemo()&&this.runDemo()}runDemo(){let e=this.gameDemoService.runGameDemo();this.demoLog.set(e)}toggleDemo(){this.showOldDemo.update(e=>!e),this.showGameBoard.update(e=>!e)}onPlayerDeckClick(){if(!this.gameController.playerCanAct)return;this.gameController.playerDrawCard()&&this.updateGameState()}acceptChallenge(){this.gameController.handleChallenge(!0),this.updateGameState()}declineChallenge(){this.gameController.handleChallenge(!1),this.updateGameState()}confirmChallenge(){this.gameController.confirmChallenge(),this.updateGameState()}startNewGame(){this.gameController.startNewGame(),this.gameStartTime=Date.now(),this.settingsService.recordGameStart(),this.updateGameState()}onBattleCardSelect(e){this.gameController.selectBattleCard(e),this.updateGameState()}simulateChallenge(){this.challengeAvailable.set(!0),this.gameMessage.set("You lost this round. Challenge available!"),this.playerCardGlow.set("red"),this.opponentCardGlow.set("green")}simulateBattle(){this.gameMessage.set("Cards tie! Battle initiated."),this.playerCardGlow.set("blue"),this.opponentCardGlow.set("blue"),this.challengeAvailable.set(!1)}updateGameState(){let e=this.gameController.getGameStats(),t=this.gameController.getGameState(),n=this.playerCardCount(),r=this.opponentCardCount();if(this.gameStats.set(e),this.gameState.set(t),this.gameMessage.set(this.gameController.message),this.challengeAvailable.set(this.gameController.canChallenge),this.canPlayerAct.set(this.gameController.playerCanAct),this.showChallengePrompt.set(this.gameController.showChallengePrompt),this.challengeCard.set(this.gameController.currentChallengeCard),this.showChallengeCardDisplay.set(this.gameController.showChallengeCardDisplay),this.battleCards.set(this.gameController.currentBattleCards),this.opponentBattleCards.set(this.gameController.currentOpponentBattleCards),this.battlePhase.set(this.gameController.currentBattlePhase),this.showBattleUI.set(this.battlePhase()==="selection"),e.playerCardCount<n&&this.triggerPlayerHealthDamageAnimation(),e.opponentCardCount<r&&this.triggerOpponentHealthDamageAnimation(),t.activeTurn?(this.playerActiveCard()!==t.activeTurn.playerCard&&(this.playerActiveCard.set(t.activeTurn.playerCard),this.triggerCardSlideAnimation("player")),this.opponentActiveCard()!==t.activeTurn.opponentCard&&(this.opponentActiveCard.set(t.activeTurn.opponentCard),this.triggerCardSlideAnimation("opponent")),t.lastResult?.includes("win")?(this.playerCardGlow.set("green"),this.opponentCardGlow.set("red"),this.triggerClashAnimations("player-win")):t.lastResult?.includes("lose")?(this.playerCardGlow.set("red"),this.opponentCardGlow.set("green"),this.triggerClashAnimations("opponent-win")):t.lastResult?.includes("tie")||t.lastResult?.includes("battle")?(this.playerCardGlow.set("blue"),this.opponentCardGlow.set("blue")):(this.playerCardGlow.set(null),this.opponentCardGlow.set(null))):this.showOldDemo()||(this.playerActiveCard.set(null),this.opponentActiveCard.set(null),this.playerCardGlow.set(null),this.opponentCardGlow.set(null),this.resetAnimations()),t.winner&&this.gameStartTime){let a=Date.now()-this.gameStartTime,s=t.winner==="player";this.settingsService.recordGameEnd(s,e.turnNumber,a),this.gameStartTime=null}}triggerCardSlideAnimation(e){e==="player"?(this.playerCardAnimation.set("slide-in"),setTimeout(()=>this.playerCardAnimation.set(null),800)):(this.opponentCardAnimation.set("slide-in"),setTimeout(()=>this.opponentCardAnimation.set(null),800))}triggerClashAnimations(e){e==="player-win"?(this.playerCardAnimation.set("clash-win"),this.opponentCardAnimation.set("clash-lose")):(this.playerCardAnimation.set("clash-lose"),this.opponentCardAnimation.set("clash-win")),setTimeout(()=>{this.playerCardAnimation.set(null),this.opponentCardAnimation.set(null)},1e3)}triggerPlayerHealthDamageAnimation(){this.playerHealthDamageAnimation.set(!0),setTimeout(()=>this.playerHealthDamageAnimation.set(!1),800)}triggerOpponentHealthDamageAnimation(){this.opponentHealthDamageAnimation.set(!0),setTimeout(()=>this.opponentHealthDamageAnimation.set(!1),800)}openDiscardPileViewer(){let e=this.gameStateService.discardedCards();this.dialog.open(Qt,{data:{discardedCards:e},width:"90%",maxWidth:"800px",maxHeight:"90vh",panelClass:"discard-pile-dialog"})}resetAnimations(){this.playerCardAnimation.set(null),this.opponentCardAnimation.set(null),this.playerHealthDamageAnimation.set(!1),this.opponentHealthDamageAnimation.set(!1)}static \u0275fac=function(t){return new(t||i)(me(en),me(tn),me(Qe),me(ue),me(St),me(Di))};static \u0275cmp=H({type:i,selectors:[["app-game"]],decls:3,vars:1,consts:[[1,"game-container"],[1,"welcome-card"],[3,"playerDeckClicked","playerCardCount","opponentCardCount","playerActiveCard","opponentActiveCard","playerCardGlow","opponentCardGlow","playerCardAnimation","opponentCardAnimation","playerHealthDamageAnimation","opponentHealthDamageAnimation","gameMessage","challengeAvailable","canPlayerAct","turnNumber"],[1,"challenge-overlay"],[1,"battle-overlay"],[1,"game-controls"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"],[1,"discard-count"],["mat-button","",3,"click"],[1,"challenge-card"],[1,"challenge-card-display"],[3,"card","glow","animationState"],[1,"battle-card"],[1,"battle-cards"],[1,"opponent-battle-cards"],[3,"card","faceDown","glow","clickable"],[1,"player-battle-cards"],[3,"card","faceDown"],[3,"cardClicked","card","faceDown","glow","clickable"],[1,"demo-output"],[1,"demo-line"],["mat-button","","routerLink","/settings"]],template:function(t,n){t&1&&(m(0,"div",0),D(1,vs,12,18)(2,Ss,42,0,"mat-card",1),d()),t&2&&(f(),O(n.showGameBoard()?1:2))},dependencies:[Mi,vi,Ei,Si,Pi,wi,bi,je,bt,_t,$t,we],styles:[".game-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:60vh;padding:20px;position:relative}@media (max-width: 959px){.game-container[_ngcontent-%COMP%]{padding:16px;min-height:50vh}}@media (max-width: 599px){.game-container[_ngcontent-%COMP%]{padding:8px;min-height:auto;align-items:flex-start}}.game-container[_ngcontent-%COMP%]:has(app-game-board){min-height:100vh;padding:0;align-items:stretch}@media (max-width: 599px){.game-container[_ngcontent-%COMP%]:has(app-game-board){min-height:100dvh}}.game-controls[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:50%;transform:translate(-50%);display:flex;gap:12px;background:#000c;padding:12px 16px;border-radius:8px;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1000}@media (max-width: 599px){.game-controls[_ngcontent-%COMP%]{bottom:16px;gap:8px;padding:10px 12px;flex-wrap:wrap;justify-content:center}}@media (max-width: 359px){.game-controls[_ngcontent-%COMP%]{bottom:12px;gap:6px;padding:8px 10px}}.game-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px;min-height:36px}.game-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .discard-count[_ngcontent-%COMP%]{margin-left:4px;font-size:.9em;opacity:.8;background:#fff3;padding:2px 6px;border-radius:12px;min-width:20px;display:inline-block;text-align:center}@media (max-width: 599px){.game-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:11px;min-height:32px;padding:0 12px}}@media (max-width: 359px){.game-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:10px;min-height:28px;padding:0 8px}}.challenge-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:2000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.battle-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:2000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.challenge-card[_ngcontent-%COMP%]{max-width:500px;width:90%;animation:_ngcontent-%COMP%_challengePopIn .3s ease-out}@keyframes _ngcontent-%COMP%_challengePopIn{0%{opacity:0;transform:scale(.8) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}.challenge-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ff6b35,#f7931e);color:#fff;margin:-16px -16px 16px;padding:16px;border-radius:4px 4px 0 0}.challenge-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:16px}.battle-card[_ngcontent-%COMP%]{max-width:600px;width:95%;animation:_ngcontent-%COMP%_battlePopIn .4s ease-out}@keyframes _ngcontent-%COMP%_battlePopIn{0%{opacity:0;transform:scale(.9) translateY(-30px)}to{opacity:1;transform:scale(1) translateY(0)}}.battle-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{background:linear-gradient(45deg,#d32f2f,#f44336);color:#fff;margin:-16px -16px 16px;padding:16px;border-radius:4px 4px 0 0}.battle-card[_ngcontent-%COMP%]   .battle-cards[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:16px 0 8px;font-weight:500}.battle-card[_ngcontent-%COMP%]   .battle-cards[_ngcontent-%COMP%]   .opponent-battle-cards[_ngcontent-%COMP%], .battle-card[_ngcontent-%COMP%]   .battle-cards[_ngcontent-%COMP%]   .player-battle-cards[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:center;margin-bottom:16px;flex-wrap:wrap}.battle-card[_ngcontent-%COMP%]   .battle-cards[_ngcontent-%COMP%]   .opponent-battle-cards[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s ease}.battle-card[_ngcontent-%COMP%]   .battle-cards[_ngcontent-%COMP%]   .opponent-battle-cards[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.welcome-card[_ngcontent-%COMP%]{max-width:800px;width:100%;transition:background-color .3s ease-in-out,color .3s ease-in-out,box-shadow .3s ease-in-out}@media (max-width: 659px){.welcome-card[_ngcontent-%COMP%]{max-width:none;margin:0}}@media (max-width: 359px){.welcome-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{padding:12px!important}}.welcome-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-start;flex-wrap:wrap}@media (max-width: 599px){.welcome-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{gap:8px}}@media (max-width: 359px){.welcome-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:8px}}.welcome-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition:background-color .3s ease-in-out,color .3s ease-in-out;min-height:44px}@media (max-width: 599px){.welcome-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 359px){.welcome-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.welcome-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:16px 0;padding-left:24px}@media (max-width: 599px){.welcome-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:20px;margin:12px 0}}@media (max-width: 359px){.welcome-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:16px;margin:8px 0}}.welcome-card[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}@media (max-width: 599px){.welcome-card[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px;font-size:14px}}@media (max-width: 359px){.welcome-card[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:4px;font-size:13px}}.demo-output[_ngcontent-%COMP%]{background:#f5f5f5;border:1px solid #ddd;border-radius:4px;padding:16px;margin:16px 0;font-family:Courier New,monospace;font-size:14px;max-height:400px;overflow-y:auto;line-height:1.4;color:#333}.demo-line[_ngcontent-%COMP%]{margin-bottom:4px;white-space:pre-wrap}[_nghost-%COMP%]     .dark-theme .demo-output, [_nghost-%COMP%]     body.dark-theme .demo-output, .dark-theme[_ngcontent-%COMP%]   .demo-output[_ngcontent-%COMP%]{background:#1e1e1e;border-color:#555;color:#e0e0e0}[_nghost-%COMP%]     .dark-theme .demo-line, [_nghost-%COMP%]     body.dark-theme .demo-line, .dark-theme[_ngcontent-%COMP%]   .demo-line[_ngcontent-%COMP%]{color:#e0e0e0}[_nghost-%COMP%]     .discard-pile-dialog .mat-mdc-dialog-container{padding:0;overflow:hidden}"]})};var Rr=[{path:"",component:nn},{path:"settings",loadComponent:()=>import("./chunk-S5VRGVDF.js").then(i=>i.Settings)},{path:"**",redirectTo:""}];var Kn="Service workers are disabled or not supported by this browser",Xe=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new pt(n=>n.error(new w(5601,!1)));else{let n=null,r=new ut;this.worker=new pt(c=>(n!==null&&c.next(n),r.subscribe(u=>c.next(u))));let a=()=>{let{controller:c}=e;c!==null&&(n=c,r.next(n))};e.addEventListener("controllerchange",a),a(),this.registration=this.worker.pipe(Je(()=>e.getRegistration().then(c=>{if(!c)throw new w(5601,!1);return c})));let s=new ut;this.events=s.asObservable();let o=c=>{let{data:u}=c;u?.type&&s.next(u)};e.addEventListener("message",o),t?.get(cn,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",a),e.removeEventListener("message",o)})}}postMessage(e,t){return new Promise(n=>{this.worker.pipe(Fe(1)).subscribe(r=>{r.postMessage(Le({action:e},t)),n()})})}postMessageWithOperation(e,t,n){let r=this.waitForOperationCompleted(n),a=this.postMessage(e,t);return Promise.all([a,r]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=n=>n.type===e:t=n=>e.includes(n.type),this.events.pipe(on(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Fe(1))}waitForOperationCompleted(e){return new Promise((t,n)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(on(r=>r.nonce===e),Fe(1),Te(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error)})).subscribe({next:t,error:n})})}get isEnabled(){return!!this.serviceWorker}},ws=(()=>{class i{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new ut;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=Ce,this.notificationClicks=Ce,this.notificationCloses=Ce,this.pushSubscriptionChanges=Ce,this.subscription=Ce;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Te(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Te(r=>r.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(Te(r=>r.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(Te(r=>r.data)),this.pushManager=this.sw.registration.pipe(Te(r=>r.pushManager));let n=this.pushManager.pipe(Je(r=>r.getSubscription()));this.subscription=new pt(r=>{let a=n.subscribe(r),s=this.subscriptionChanges.subscribe(r);return()=>{a.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Kn));let n={userVisibleOnly:!0},r=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(r.length));for(let s=0;s<r.length;s++)a[s]=r.charCodeAt(s);return n.applicationServerKey=a,new Promise((s,o)=>{this.pushManager.pipe(Je(l=>l.subscribe(n)),Fe(1)).subscribe({next:l=>{this.subscriptionChanges.next(l),s(l)},error:o})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Kn));let t=n=>{if(n===null)throw new w(5602,!1);return n.unsubscribe().then(r=>{if(!r)throw new w(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((n,r)=>{this.subscription.pipe(Fe(1),Je(t)).subscribe({next:n,error:r})})}decodeBase64(t){return atob(t)}static \u0275fac=function(n){return new(n||i)(V(Xe))};static \u0275prov=I({token:i,factory:i.\u0275fac})}return i})(),Es=(()=>{class i{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=Ce,this.unrecoverable=Ce;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Kn));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new w(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(n){return new(n||i)(V(Xe))};static \u0275prov=I({token:i,factory:i.\u0275fac})}return i})();var Lr=new Qn("");function Ps(){let i=ae(dt);if(!("serviceWorker"in navigator&&i.enabled!==!1))return;let e=ae(Lr),t=ae(yt),n=ae(cn);t.runOutsideAngular(()=>{let r=navigator.serviceWorker,a=()=>r.controller?.postMessage({action:"INITIALIZE"});r.addEventListener("controllerchange",a),n.onDestroy(()=>{r.removeEventListener("controllerchange",a)})}),t.runOutsideAngular(()=>{let r,{registrationStrategy:a}=i;if(typeof a=="function")r=new Promise(s=>a().subscribe(()=>s()));else{let[s,...o]=(a||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":r=Promise.resolve();break;case"registerWithDelay":r=Ir(+o[0]||0);break;case"registerWhenStable":r=Promise.race([n.whenStable(),Ir(+o[0])]);break;default:throw new w(5600,!1)}}r.then(()=>{n.destroyed||navigator.serviceWorker.register(e,{scope:i.scope}).catch(s=>console.error(Hn(5604,!1)))})})}function Ir(i){return new Promise(e=>setTimeout(e,i))}function Ms(i,e){return new Xe(i.enabled!==!1?navigator.serviceWorker:void 0,e)}var dt=class{enabled;scope;registrationStrategy};function Fr(i,e={}){return Xn([ws,Es,{provide:Lr,useValue:i},{provide:dt,useValue:e},{provide:Xe,useFactory:Ms,deps:[dt,Jn]},ri(Ps)])}var Gr={providers:[Zn(),pi({eventCoalescing:!0}),Ci(Rr),xr(),Fr("ngsw-worker.js",{enabled:!ui(),registrationStrategy:"registerWhenStable:30000"})]};var Ts=()=>({exact:!0}),rn=class i{title=b("\u2694\uFE0F Attrition");isDarkMode=b(!1);THEME_STORAGE_KEY="war-of-attrition-theme";ngOnInit(){this.loadThemePreference()}loadThemePreference(){let e=localStorage.getItem(this.THEME_STORAGE_KEY),t=e?e==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches;this.isDarkMode.set(t),this.applyTheme(t)}applyTheme(e){e?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme")}saveThemePreference(e){localStorage.setItem(this.THEME_STORAGE_KEY,e?"dark":"light")}toggleTheme(){this.isDarkMode.update(e=>{let t=!e;return this.applyTheme(t),this.saveThemePreference(t),t})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=H({type:i,selectors:[["app-root"]],decls:16,vars:7,consts:[["color","primary",1,"app-toolbar"],[1,"toolbar-spacer"],[1,"nav-links"],["mat-icon-button","","routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],["mat-icon-button","","routerLink","/settings","routerLinkActive","active"],["mat-icon-button","",3,"click"],[1,"app-content"]],template:function(t,n){t&1&&(m(0,"mat-toolbar",0)(1,"span"),p(2),d(),U(3,"span",1),m(4,"nav",2)(5,"button",3)(6,"mat-icon"),p(7,"casino"),d()(),m(8,"button",4)(9,"mat-icon"),p(10,"settings"),d()()(),m(11,"button",5),L("click",function(){return n.toggleTheme()}),m(12,"mat-icon"),p(13),d()()(),m(14,"main",6),U(15,"router-outlet"),d()),t&2&&(f(2),B(n.title()),f(3),K("routerLinkActiveOptions",mi(6,Ts)),Ge("aria-label","Game"),f(3),Ge("aria-label","Settings"),f(3),Ge("aria-label","Toggle "+(n.isDarkMode()?"light":"dark")+" theme"),f(2),B(n.isDarkMode()?"lightbulb":"lightbulb_outline"))},dependencies:[fi,_t,yi,Ht,Yt,je,vt,Et,wt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100vh;overflow-x:hidden}.app-toolbar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;transition:background-color .3s ease-in-out,color .3s ease-in-out;min-height:64px}@media (max-width: 599px){.app-toolbar[_ngcontent-%COMP%]{min-height:56px;padding:0 8px}}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.nav-links[_ngcontent-%COMP%]{display:flex;gap:8px;margin-right:16px}@media (max-width: 599px){.nav-links[_ngcontent-%COMP%]{gap:4px;margin-right:8px}}.nav-links[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition:background-color .3s ease-in-out,color .3s ease-in-out;min-height:44px}@media (max-width: 599px){.nav-links[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 12px;font-size:14px}}.nav-links[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ffffff1a}.app-content[_ngcontent-%COMP%]{flex:1;padding:24px;overflow-y:auto;overflow-x:hidden;transition:background-color .3s ease-in-out,color .3s ease-in-out}@media (max-width: 959px){.app-content[_ngcontent-%COMP%]{padding:16px}}@media (max-width: 599px){.app-content[_ngcontent-%COMP%]{padding:12px 8px}}@media (max-width: 359px){.app-content[_ngcontent-%COMP%]{padding:8px 4px}}.dark-theme[_nghost-%COMP%]   .app-content[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .app-content[_ngcontent-%COMP%]{background-color:var(--mat-sys-surface-container)}"]})};gi(rn,Gr).catch(i=>console.error(i));
